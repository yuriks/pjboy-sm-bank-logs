;;; $8000: Tiles - Samus death sequence ;;;
{
; |--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|
; |        |  FF 777|B       |        |        |        |        |        |        |       4| 33 43  |        |        |        |        |   BBBB |
; |        |FFEE7BBB|AAB     |     444|44  4   |4       |        |        |        |        |4433443 |        |        |     443|4  4    |   BAAB |
; |       7|F9FE7AAA|BAAB    |    44  |  44 24 |44      |        |        | FFFF   |      44|43343443|        |        |      44|34  4   |  BAAAB |
; |     777|969FB262|AB2B7   |   44  4|33 33 14| 4      |        |        |FE9EFF  |        | 4344344|3       |     434|4      4|434 44  | BAA2AB |
; |    7557|F9EFA222|AB2B7   |      4 |321123 1| 24     |        |        |F9999EF |        |44434434|34      |    4323|4444   4|4334 4  | BA22AB |
; |   7D735|7F4FAAAA|BBAB7   |        |33222231|A2A     |        |        |FEFFFEF |     4  | 4443434|44      |   44313|42344  4|4334 4  | BAA2B  |
; |  D75375|744EBBB7|BBBB7   |       3|13333232|213     |      4 |  44444 |FF   FFF|     3 4|44432234|34      |   43412|33133444|334  4  |  BAAB  |
; | D737557|D4F35338|77BB7   |       3|23333322|3344    |      43|33343344|      FF|    3233|34443334|34      |   34421|23212344|4343 4  |  BBBB  |
; |--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|
; |7D5755DD|F7FF7777|8557    |      33|32333431|334     |     444| 4444434|44      |   44112|13443332|34      |   34442|12233333|34334   |        |
; |77877DD7|DEFB7BAB|777D7   |      33|21233443|344     |     4  |33334443|44      |   34212|22333233|44      |   43449|22333322|44344   |    FF  |
; |6775777B|B7A7BA6A|B777    |      42|32323344|44      |        | 34 4342|344     |  924421|23323233|44      |    4464|94223233|33444   |   FEEF |
; |AB7777BB|7777A222|AB77    |     44A|3333344A|4       |     344|34444342|344     |  999492|22332334|4       |      79|46433343|4444  4 |  E999F |
; |BB777B77|A22BBA2A|B77     |       4|A8894999|A4      |    4233|33443343|444     |   94444|34433344| 4      |      87|47443333|334  4  |  FFEEF |
; | 77777BA|A62A7BAB|B7F     |       4|AA7A9989|9A      |   41231|23333344|444     |    4944|3644344 |4       |       9|94444334|44444   |   FFF  |
; |     7BB|AAAB77BB|7FF     |  A77AA8|76799878|9A      |   32312|11234334|434     |     789|47444444|4       |        |98944444|444     |        |
; |    777B|7BB77777|7F5     | A888AA8|788F8879|9A      |   43424|24244334|344     |     988|844444  |        |        |98899   |        |        |
; |--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|
; | 77BAAAB|77777B11|17      | A8AA9A9|9FF98799|AA      |   43423|44333344|444     |      99|8444    |        |        |779768  |        |        |
; |77A22ABB|2B7BBBB7|77      | AA767AA|9F98779A|A4      |    4442|34433444|444     |        |7899    |        |       9|6867779 |        | FEF    |
; |777BBBBB|A77BAAAB|B7      |  A667AA|A99779AA|4       |     994|97444444|44      |       9|798778  |        |      88|7777778 |        | E9EF   |
; |A771C12B|B7BA222A|B7      |   A8889|98879AAA|4       |     977|984 4444|        |      98|6866678 |        |     F86|77788879|        |F99F    |
; |AB7771B7|7BA2262A|B7      |    AA89|7779AFFA|4       |      87|8999    |        |      86|77776679|        |     F9F|F7898767|        | FF     |
; |BB777777|BBA222AA|B7      |      99|889AFFFA|4       |       9|99999   |        |      77|87787678|        |     FFF|EF994978|9       |        |
; | 777B77B|AABA2AAB|7       |        |99 FFFFF|A       |        |9888799 |        |    F878|66789867|9       |     EFF|DEF9 498|89      |        |
; | B2777BA|A2ABABB7|        |        |  AFFFFA|A       |       7|76776689|        |    FF9F|F9899886|9       |      EF|FEF9  49|98      |        |
; |--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|
; | BBA7BBA|AAAB77  |        |        | AAFFA98|9A      |      77|66797678|        |    EFFF|DF999 87|7       |       F|FFFF   9|994     |        |
; |  BB727B|ABB77   |        |       A|A8AFA987|89      |     F88|F7799679|   BAAA |     EFF|EEF99 97|79      |       E|EFEF  86|894     |    FFF |
; |   7BA77|777BBB  |        |      A9|78AF9876|8A      |    FF9F|FF799689|  BBA2AB|      FF|FF999  8|79      |   7889F|FE9EF 68|674     |    F9F |
; |   7B7B7|AAA26AB7|        |    A987|889A8767|8A      |    FEFE|EF99A699| BAAA2AB|       F|FE9FF878|89      |  78979F|E9999 7 |674     |    FEF |
; |    77B7|BAA222AB|77      |   A9788|89A98667|A       |     FFF|EF999799| BA222AB|       F|EFF97778|9       |  9  8 F|F98899  | 6      |     F  |
; |   B7B77|7BBBAAAB|B77     |  A98889|9AA97678|A       |      FF|FF9F9899| BAAAAAB|     999|99876899|        |      4F|987789  |        |        |
; |   A7BB7|7777BBBB|B7BB7   |  AA88A9|  98678A|        |       F|FFF9678A| BAABBB |  888896|6899FF  |        |      9F|877789  |        |        |
; |    77AB|77777777|7BAB7   |   AA9AA| A8778A |        |     994|FFF688EE|  BB    | 8989967|79FFFA  |        |     49A|86778   |        |        |
; |--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|
; |   7AABB|77    7A|22AB7   |    AA99|AA8789  |        |  899948|6879FF  |        | 7   988|9FA889A |        |     98A|86789   |        |        |
; |  7AABB7|77    77|77BB7   |     4AA|A88799A |        | 8999947|799F99E |        |      49|FA87789 |    BBBB|    9799|86789   |        |  BB    |
; | 7AB777 |      7B|2AB77   |       4|FF87667A|A       | 79 9 98|9F98899 |        |      99|F876779 |   BAAAB|   97889|86789   |    BB  | B2AB   |
; |777     |       B|2A77    |        |FFFF7667|8FF     |       9|FE88889 |        |     988|9776789 |  BA2AAB|  987899|8678    |   BAB  | BAB    |
; |        |       A|AB7     |        | FFFFA88|AFEFF   |      AA|E986789 |        |     889|876789  | BA22AB |  978999|8678    |  BA2B  |  B     |
; |        |      BA|B7      |        | FFFFF  |FFFEF   |     AAA|986679A |        |    8789|77689   | BA2AAB | 9788999|8679    |  BBB   |        |
; |        |      BB|7       |        | FFFF   | FFFF   |    AAA9|97678A  |        |    7898|7678    | BAAAB  | 9889999|8779    |        |        |
; |        |      77|        |        | FFF    | FFEF   |   AAAA9|9678A   |        |   98997|7789    | BBB    |  989889|8789    |        |        |
; |--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|
; |        |        |        |        | FF     | FFF    |   AAA99|767A    |    BB  |   98987|779     |        |   99989|8689    |        |        |
; |        |        |        |        |FF      | FFF    |   AAA99|77A     |   BAB  |   98987|789     |        |     999|7678FF  |        |  BAB   |
; |        |        |   4    |        |        | FF     |   AAA98|7AA     |   BABB |    9988|7899    |        |       9|87679FFF|        |  B2A   |
; |     434|        |   4 4  |        |        | FF     |    AA99|88A     |  BA2AB |      99|88889   |        |        |A87679FF|F       |  BAA   |
; |    4424|434     |  43 44 |        |        |        |     AA9|8789    |  BA2AB |        |987678  |        |        | A97779F|F       |   BB   |
; |   43412|32344   | 4434444|        |        |        |      AA|A868A   |  BAAB  |        | 987679 |        |        |  A98899|F       |        |
; |  434421|13234444|44344344|        |        |        |       A|AA869A  |  BBAB  |        |  F8779F|        |        |    A99F|        |        |
; |  434492|12333444|33344344|        |        |        |        |AA978F  |   BBB  |        |  FF89FF|        |        |     AFF|F       |        |
; |--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|
; |  4 3449|92233333|3344344 | 9999879|9AAFFFFF|        |        | FFFFFF |        |        |  FFFFFF|F       |        |      FE|FF      |        |
; |  4   49|44322233|44334444|     868|9   FFFF|        |        |  FFFFFF|        |        | FFF  DF|FF      |        |      FE|EFF     |  BB    |
; |      67|46443333|33344344|     977|899  FF |    434 |        |  EFFFDF|F       |        | FF   FE|FFF     |        |      FF|FFF     | BAB    |
; |      88|97444443|33433444|     998|8789 FF |    4244|        | FFF  FE|FF      |        | F    FF|FF      |   44   |      FF|F       | BB     |
; |      99|94443433|433344  |       9|8678 FF |  323123|4       |FFF   FF|FF      |        |      FF|        |   4    |     FFF|        |        |
; |       9|94444344|34444   |        |98689F  |  234122|24      |FF   FFF|        |        |     FF |        |        |     FF |        |        |
; |       9|89444444|444 4   |        |  989F  | 3344212|234     |    FFF |        |        |     F  |        |        |        |        |        |
; |     997|89944444|4444    |        |   9    | 3344321|234     |        |        |        |        |        |        |        |        |        |
; |--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|
; |     987|766844  |        |        |    FFF | 4344332|2334    |   4    |  879986|684     |        |        |      F8|        |        |        |
; |    9967|6777944 |        |        |    FFFF|  464442|223344  |   4 4  |  889876|794     |        |        |     FD9|        |        |        |
; |    8677|88777  4|44      |     B  |    FFFF|  478463|23233444| 44444  |  789876|79      |    434 |        |     FE9|     3  |        |        |
; |   F8FA7|898879  |  4     |    BAB |    FFF |   88983|23433333|44444   | 8789877|8A      |    4244|        |      F9|    3234|        |   4    |
; |  EFFFFA|8987679 |        |     B  |    FFF |    9944|32344333|343     | 9899877|84      |  323123|4       |      99|  323223|4       |        |
; |  FFFDEF|AA98898 |        |        |   FF   |   99949|34333444|3444    | 899A877|94      |  234122|24      |      97|  234122|34      |        |
; |   FFEEF|FAA99889|        |        |  FFF   |  998844|43443344|444     | 8999867|944FFFF | 3344211|234     |      87| 3344212|234     |        |
; |    EFFF|FF   987|9       |        |        | 98A9878|44344444|444444  | 9899977|8A4FFFF | 3344321|234     |      87| 3444321|234     |        |
; |--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|
; |    E8EF|FE    97|9A      |        |      F8|88888767|94434444|44444   |  999988|894FFFF | 4344332|22344   |        | 4344322|22244   |        |
; |    87EE|F     99|9A      |     B  |     FD9|FFFA9866|84433344|44      |      98|78A FFF |  464442|323344  |     4  |  464442|32334   |        |
; |  89E888|F      9|88      |    BAB |     FE9|DEFAA976|84444444|444444  |       8|769  FFF|  478462|3223444 |     4  |  478462|322344  |        |
; | 879FFE8|EF     6|678     |    BB  |      F9|EEF44487|79444444|44444   |       9|8679  FF|   88983|33233444|   444  |   88983|323334  |        |
; | 9  FEE8|89E    6|977     |        |      99|EFFF4498|78   444|4  4    |        |8768  FF|    9944|23323443|44344   |    9944|3234344 |        |
; |   9FE97|789    8| 67     |        |      97|9EFFF449|884     |        |        |97784   |   99949|92324444|44444   |   99949|9333444 |        |
; |   9F987|789     | 9      |        |      87|7EFF4444|989     |        |        | 9789   |  998844|43432344|444     |  998844|43433444|4       |
; |   9A976|78A     |        |        |      87|89F 444 |9784    |        |        | 988F   | 98A9878|43343333|444444  | 98A9878|44343444|34  4   |
; |--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|
; |  989886|89A     |        |        |      76|8E  44A |4879    |        |     FD9|  FFF   |8FF88767|94333344|34444   |88888767|94344344|4444    |
; |  989876|89      |        |        |     977|7F  44A | 978    |        |     FE9|  FFF   |DDFA9866|84334344|44      |FFFA9866|84434444|44      |
; | 9889876|8A      |        |  BB    |     978|8E 444A |  989   |        |     FE9|  FDFF  |EEFAA976|89434434|444 44  |DEFAA976|89444444|4444    |
; | 9889867|8       |        | B2A    |    9E8E|7A444A  |   88   |        |      F8|  FEFF  |FFEF4487|79444433|44444   |EEF44487|79444444|44444   |
; | 8789867|8       |        | BAB    |    9FE7|78944   |   8779 |        |      98|  FEFF  |EFFF4448|78 43 44|4  4    |EFFF4498|7844 443|4444 4  |
; |97799878|9       |        |        |    9F97|7894    |   99878|        |      97| FFFF   |9EFFF449|889 44 4|4       |9EFFF449|88944444|4  44   |
; |98789878|9A9     |        |        |   89F87|789     |   7 988|        |      87| FFF    |79FF4444|989  4  |        |7EFF4444|98944  4|44  4   |
; |99889878|9AA9999F|        |        |   79A87|689     |   9   7|        |      87|FFF     |79F 444 |9784    |        |89F 444 |9784 4 4|4  4    |
; |--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|--------|

$9B:8000             db 00,00,00,00,01,01,07,07,0F,09,1F,16,3F,16,7F,39,00,00,00,00,01,00,07,00,0F,00,1D,08,3B,20,6F,40,
                        37,37,CF,FF,E8,BF,B8,5F,D0,BF,D0,DF,8F,9F,BE,36,37,30,F8,F7,B8,F7,52,B8,B0,F8,F0,5F,F1,1E,E8,A1,
                        80,80,20,E0,90,F0,58,F8,58,F8,D8,F8,F8,F8,F8,F8,00,80,00,E0,00,F0,08,D0,08,D0,08,F0,08,F0,C8,30,
                        00,00,00,00,00,00,00,00,00,00,00,00,01,01,01,01,00,00,07,00,0C,00,19,00,02,00,00,00,00,00,00,00,
                        00,00,00,00,00,04,DA,D8,B5,CC,C3,FE,FA,7F,7C,FF,00,00,C8,00,32,00,01,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,40,00,E0,60,A0,C0,C0,00,00,80,00,C0,00,40,00,20,00,00,A0,00,00,30,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,01,01,00,00,00,00,00,00,00,00,00,00,00,00,02,00,02,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,EC,EC,00,00,00,00,00,00,00,00,00,00,00,00,3E,00,13,00,
                        00,00,00,00,78,78,AC,DC,FA,86,BA,FE,C7,C7,03,03,00,00,00,00,78,78,DC,FC,86,FE,FE,FE,C7,C7,03,03,
                        00,00,00,00,00,00,00,00,00,00,00,00,04,04,0B,0F,01,00,00,00,03,00,00,00,00,00,04,00,01,00,00,00,
                        64,64,32,32,69,69,24,24,12,12,0A,0A,12,1E,8E,8E,08,00,CC,00,96,00,5B,00,ED,00,75,00,E1,00,71,00,
                        00,00,00,00,00,00,80,80,80,80,00,00,80,80,80,80,00,00,00,00,00,00,00,00,40,00,C0,00,40,00,40,00,
                        00,00,00,00,00,00,02,02,05,07,07,05,0A,09,11,12,00,00,00,00,00,00,05,00,08,00,18,00,14,00,0C,00,
                        00,00,01,01,00,00,00,00,00,00,20,60,F8,D8,54,EC,00,00,06,00,03,00,81,00,F1,00,99,00,07,00,03,00,
                        00,00,00,00,80,80,40,40,60,60,60,60,C0,C0,50,50,00,00,90,00,48,00,AC,00,94,00,94,00,24,00,A4,00,
                        1E,1E,12,1E,22,3E,42,7E,42,7E,44,7C,24,3C,3C,3C,00,1E,00,1E,00,3E,00,76,00,66,00,74,00,3C,00,3C,
                        FF,90,DF,D9,7F,EF,7F,FF,FF,FF,7E,7F,07,07,0F,0F,FF,43,DF,26,FE,01,3C,C3,3B,C4,7C,03,04,03,0E,01,
                        FF,FF,BD,7F,D8,FF,F0,FF,18,FF,0D,FF,1F,FF,FF,FF,FF,B0,E8,F7,52,AD,F0,08,00,9D,48,97,0C,F3,9F,60,
                        70,10,F8,E8,F0,F0,70,F0,E0,E0,E0,E0,E0,E0,E0,C0,70,80,F8,10,70,80,30,C0,60,80,60,A0,E0,60,E0,40,
                        03,03,03,03,00,01,00,01,00,00,00,00,18,3E,00,46,00,00,00,00,02,00,06,01,01,00,01,00,18,27,00,7F,
                        BB,FA,59,B9,AC,FC,F8,F9,17,80,2D,F0,BA,E2,93,92,04,00,06,00,03,00,06,01,08,F7,20,DF,E2,1D,92,7D,
                        C0,C0,80,80,00,00,00,00,00,80,80,40,80,40,80,40,20,00,60,00,C0,00,80,00,40,80,00,C0,00,C0,00,C0,
                        00,00,00,00,00,00,04,04,03,07,0B,06,16,1D,08,0A,07,00,04,00,00,00,03,00,08,00,10,00,00,00,15,00,
                        02,02,F1,F1,44,45,84,85,CD,CD,7C,FC,D6,36,06,A6,7D,00,0E,00,2A,00,7A,00,32,00,03,00,09,00,59,00,
                        00,00,00,00,80,80,80,80,00,00,00,00,40,40,80,80,C0,00,C0,00,60,00,60,00,E0,00,E0,00,A0,00,60,00,
                        06,01,12,15,21,12,3A,01,10,00,04,00,05,04,04,00,18,00,08,00,0C,20,04,3A,0F,10,0B,04,04,03,00,07,
                        CE,4F,3B,FF,6B,FF,36,FE,9C,9C,88,C8,40,40,00,00,30,00,00,00,00,00,01,00,63,00,76,00,FF,00,7C,80,
                        80,80,00,00,00,00,00,00,00,00,00,00,00,00,00,00,40,00,C0,00,C0,00,80,00,40,00,80,00,80,00,00,00,
                        10,11,09,08,00,02,03,02,01,01,01,00,00,00,00,00,0E,00,16,01,0F,00,02,01,01,02,00,01,00,00,00,00,
                        9F,7F,3C,FF,8B,3F,1D,5D,4F,4F,86,06,A0,00,98,00,00,00,00,00,40,80,E2,00,F0,00,79,80,1F,E0,00,F8,
                        B0,B0,20,20,C0,C0,00,00,C0,C0,00,00,00,00,00,00,48,00,D8,00,38,00,F2,00,24,00,F8,00,E0,00,00,00,
                        00,00,0C,0C,12,1E,1E,22,32,3E,1C,1C,00,00,00,00,00,00,0C,0C,1E,1E,22,3E,3E,3E,1C,1C,00,00,00,00,
                        71,7F,C3,FF,FF,FF,75,E3,7F,FB,FF,FF,7F,7F,5E,7F,60,1F,C0,27,E0,1F,68,89,39,C2,3F,C0,76,09,1C,43,
                        FF,FC,7F,FF,71,FF,E0,FF,C0,FF,C0,FF,21,FF,17,FF,F8,04,21,5E,60,9F,40,B1,84,61,00,E3,00,F7,01,BE,
                        C0,40,C0,C0,C0,C0,C0,C0,C0,C0,C0,C0,80,80,00,00,40,00,C0,00,40,80,40,80,40,80,40,80,80,00,00,00,
                        05,5A,14,7F,04,3F,01,10,01,0C,03,00,00,00,00,00,00,7F,1C,63,1C,23,00,1F,00,0F,00,03,00,00,00,00,
                        F7,64,EE,4D,7C,9B,98,17,F6,EF,2E,1F,DF,1F,1E,3F,64,FB,4C,F3,18,E7,10,EF,E6,1F,0E,FF,1F,DF,1E,3F,
                        00,C0,00,80,00,00,00,00,00,00,00,00,00,80,00,80,00,C0,40,80,80,00,80,00,80,00,80,00,00,80,00,80,
                        09,0B,00,01,06,00,07,03,01,01,01,00,00,00,01,01,14,00,0E,00,01,06,03,04,01,02,00,01,00,00,01,00,
                        3C,3C,98,98,C0,40,80,00,70,00,F8,00,8E,08,B1,FC,C3,00,67,00,7F,80,2F,C0,00,F0,00,F8,08,F6,FC,03,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,E0,00,E0,00,C0,00,00,00,00,00,00,00,00,00,00,00,
                        03,00,00,00,01,00,02,00,00,01,03,03,0A,0A,0F,0D,00,03,00,00,00,01,00,03,01,02,03,00,0A,0D,0D,0F,
                        00,00,B0,80,D8,98,04,BC,F3,FE,6A,6E,29,E3,D8,81,70,80,80,70,98,64,BC,42,FE,01,6E,91,E3,1C,81,FE,
                        00,00,00,00,00,00,00,00,00,00,00,00,80,00,80,00,00,00,00,00,00,00,00,00,00,00,00,00,00,80,00,80,
                        00,00,01,00,00,00,04,05,07,05,07,07,03,07,01,03,00,00,00,01,00,03,05,06,05,07,07,07,07,07,03,03,
                        F0,D8,1E,BC,FC,FC,E3,E2,D5,C7,76,C2,B2,60,B1,E0,D8,24,BC,42,FC,02,E2,1D,C7,B8,CA,F5,E4,F3,E2,F1,
                        00,00,00,00,00,00,00,00,00,00,80,00,40,00,80,00,00,00,00,00,00,00,00,00,00,00,00,80,00,C0,00,C0,
                        00,00,50,70,28,58,F0,90,60,60,00,00,00,00,00,00,00,00,70,70,58,78,90,F0,60,60,00,00,00,00,00,00,
                        6E,7F,3B,3F,1B,1F,1F,1F,0F,0F,1F,1F,0F,1F,0D,0F,08,77,0A,31,13,0C,15,0A,0D,02,0B,14,09,16,0C,03,
                        1C,FC,78,F8,FC,FC,03,FF,81,FF,F1,FF,FF,FF,FF,FF,0C,F0,18,E0,E0,1C,09,E6,00,E3,80,7F,F0,0F,FF,00,
                        00,00,00,00,00,00,00,00,C0,C0,E0,E0,F8,F8,D8,F8,00,00,00,00,00,00,00,00,C0,00,60,80,48,B0,88,70,
                        00,00,00,01,01,02,05,09,0C,14,11,20,01,32,04,1B,00,00,00,01,00,03,01,0E,04,1B,00,3F,00,3F,00,1F,
                        1A,7C,15,B9,9A,B3,25,17,51,27,9A,6E,24,0D,18,5A,18,7F,11,FE,93,7C,07,F8,07,F8,0E,F1,0C,33,18,66,
                        80,40,40,00,00,40,00,40,00,80,00,80,00,00,00,00,00,C0,00,C0,00,C0,00,C0,00,80,00,80,00,00,00,00,
                        03,03,04,04,0F,0D,0A,0F,07,07,03,03,01,01,06,00,03,00,04,07,0D,0F,0F,0F,07,07,03,03,01,01,01,06,
                        3A,EE,FB,E6,F9,E4,73,CC,7F,C4,FB,D0,F4,ED,E0,F3,EE,11,E6,99,E4,DB,C4,FB,C4,FB,D0,FF,EC,F3,F3,EF,
                        00,00,10,1E,31,3F,41,7F,41,7F,41,7F,4E,7E,30,30,00,00,00,1E,00,3B,00,7B,00,63,00,7F,00,7E,00,30,
                        07,0F,03,07,03,03,01,01,01,01,07,00,02,01,2D,03,0F,0F,07,07,03,03,01,01,01,01,00,07,01,3E,03,7C,
                        F9,41,3B,E1,F8,C0,BA,DA,7E,EE,D3,18,3C,8C,F8,BC,C1,FA,E1,FA,C0,F9,DA,FD,EE,F1,18,E7,8C,7C,B8,7C,
                        80,80,C0,80,C0,80,40,00,80,00,00,00,00,00,00,00,80,00,80,40,80,40,00,C0,00,80,00,00,00,00,00,00,
                        01,01,00,01,13,11,2F,25,21,01,01,01,03,01,02,01,01,01,01,01,11,0F,25,1B,01,25,03,01,01,03,04,03,
                        F1,F0,50,F1,A8,DA,7A,82,CC,80,B4,30,74,70,30,70,F0,F1,F1,F2,DA,F9,82,F8,80,FC,30,CC,70,8C,70,88,
                        C0,00,40,00,40,C0,40,C0,00,40,00,00,00,00,00,00,20,C0,20,C0,E0,00,E0,00,40,00,00,00,00,00,00,00,
                        00,00,0E,0E,0E,0A,0A,0E,04,04,00,00,00,00,00,00,00,00,0E,0E,0A,0E,0E,0E,04,04,00,00,00,00,00,00,
                        13,1F,27,3F,5E,7E,E0,E0,00,00,00,00,00,00,00,00,10,0F,21,1E,4E,30,E0,00,00,00,00,00,00,00,00,00,
                        C2,C3,C3,C3,03,03,01,01,00,01,02,03,03,03,03,03,C2,01,C3,00,02,01,00,01,00,01,00,03,00,03,03,00,
                        18,F8,F8,F8,38,F8,30,F0,60,E0,C0,C0,80,80,00,00,08,30,C8,30,18,60,30,40,20,C0,40,80,80,00,00,00,
                        03,0C,00,03,00,00,00,00,00,00,00,00,00,00,00,00,00,0F,04,03,01,00,00,00,00,00,00,00,00,00,00,00,
                        14,D0,1C,92,D2,DF,F9,FF,78,7C,7C,7C,78,78,70,70,10,EC,10,EE,DE,E1,FF,F0,78,7F,7C,7C,78,78,70,70,
                        00,00,00,00,00,80,60,60,58,F8,E8,F8,78,78,68,78,00,00,00,00,00,80,60,E0,78,F8,F8,F8,78,78,78,78,
                        1C,00,3D,01,6A,40,01,00,00,03,00,07,01,0E,01,1E,02,3D,03,7C,40,2B,00,01,00,03,00,07,00,0F,00,1F,
                        3C,AC,FC,92,E6,40,82,C0,4A,98,8C,3A,D0,74,A0,68,AC,5C,92,7E,40,FE,C0,FE,98,E6,38,C6,70,8C,60,98,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        44,40,01,00,03,00,04,00,01,00,05,04,0A,08,17,01,40,07,02,01,00,03,00,07,00,07,04,0B,08,07,01,1E,
                        C4,62,9A,D8,AE,BC,EA,78,54,70,C8,E0,A0,E0,D0,C0,40,FE,98,E6,BC,C2,78,86,70,8C,E0,18,E0,10,C0,30,
                        00,00,0F,0F,11,1F,21,3F,42,7E,42,7E,44,7C,70,70,00,00,00,0F,00,1F,00,37,00,66,00,6E,00,7C,00,70,
                        04,01,0F,04,19,08,2B,08,37,10,67,20,4F,00,29,00,00,07,04,0B,08,17,08,37,10,2F,20,5F,00,7F,00,3F,
                        28,60,28,60,28,60,20,60,20,60,30,60,70,60,50,40,60,98,60,98,60,98,60,90,60,90,60,90,60,90,40,B0,
                        00,00,00,00,0C,0C,14,1C,24,3C,38,38,00,00,00,00,00,00,00,00,00,0C,00,1C,00,34,00,38,00,00,00,00,
                        00,00,30,30,48,78,50,70,20,20,00,00,00,00,00,00,00,00,00,30,00,58,00,70,00,20,00,00,00,00,00,00,
                        00,00,00,00,00,00,02,02,00,02,0A,09,11,12,12,11,00,00,00,00,00,00,05,00,0D,00,14,00,2C,00,2C,02,
                        00,00,00,00,00,00,00,00,40,40,A0,E0,D0,70,B8,78,00,00,00,00,00,00,00,00,A0,00,18,00,0F,00,07,00,
                        00,00,00,00,00,00,00,00,10,10,10,10,24,24,E4,E4,00,00,00,00,10,00,14,00,26,00,6F,00,DB,00,1B,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        60,60,C0,C0,00,00,00,00,00,00,00,00,00,00,00,00,60,60,C0,C0,00,00,00,00,00,00,00,00,00,00,00,00,
                        70,70,70,70,60,60,60,60,00,00,00,00,00,00,00,00,70,70,70,70,60,60,60,60,00,00,00,00,00,00,00,00,
                        03,1C,03,1C,02,1C,03,0C,01,06,00,03,00,01,00,00,00,1F,00,1F,00,1F,00,0F,00,07,00,03,00,01,00,00,
                        A0,F0,C0,E0,80,E0,00,20,50,40,00,A8,08,D4,34,D4,E0,10,C0,20,80,60,00,E0,40,B0,20,D8,10,EC,14,EC,
                        0C,0C,14,1C,16,1E,22,3E,22,3E,24,3C,34,3C,1C,1C,00,0C,00,1C,00,1E,00,36,00,36,00,3C,00,3C,00,1C,
                        15,01,15,01,0C,00,03,00,00,00,00,00,00,00,00,00,01,1E,01,1E,00,0F,00,03,00,00,00,00,00,00,00,00,
                        E0,C0,A0,80,B0,80,08,00,A8,38,56,1C,2F,2D,37,33,C0,20,80,60,80,70,00,F8,38,C4,1C,62,2D,33,33,3F,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        1D,00,07,00,01,00,00,00,00,00,00,00,00,00,00,00,00,1F,00,07,00,01,00,00,00,00,00,00,00,00,00,00,
                        10,40,AC,EC,5F,77,2F,BB,3F,5D,13,20,07,09,03,07,40,B0,EC,1C,77,8F,3B,C7,1D,63,00,3F,01,0F,03,07,
                        00,00,00,00,00,00,80,80,80,80,80,80,00,00,80,80,00,00,00,00,00,00,80,80,80,80,80,80,00,00,80,80,
                        00,00,28,38,20,38,20,38,18,18,00,00,00,00,00,00,00,00,00,38,00,28,00,38,00,18,00,00,00,00,00,00,
                        09,08,01,00,01,03,00,00,03,00,01,00,01,00,07,01,26,01,22,01,03,00,00,03,00,03,00,01,00,01,01,06,
                        9F,7F,23,3F,0F,4F,C1,41,8B,0B,84,04,40,00,60,00,00,80,C0,00,F0,00,7E,80,74,80,7B,80,3F,C0,1F,E0,
                        C8,C8,30,30,E4,E4,D8,D8,70,70,80,80,00,00,00,00,36,00,CF,00,1B,00,27,00,8C,00,78,00,E8,00,F0,00,
                        7B,02,00,02,07,03,06,00,01,00,00,00,00,00,00,00,02,7D,02,05,03,04,00,07,00,01,00,00,00,00,00,00,
                        9F,7F,8F,0F,66,06,56,46,26,66,8C,24,2C,04,10,00,1F,FF,0F,8F,06,E6,46,B6,66,96,24,DC,04,3C,00,10,
                        00,00,00,00,04,04,00,04,2D,3B,14,33,62,65,65,66,00,00,00,00,0A,00,0B,00,00,00,08,00,18,00,18,00,
                        00,00,00,00,00,00,00,00,00,00,00,80,40,C0,40,C0,00,00,00,00,00,00,00,00,80,00,40,00,20,00,20,00,
                        7E,7E,3F,3F,1F,3D,72,73,E3,E3,C7,C7,0E,0E,00,00,7E,7E,3F,3F,3F,3F,73,73,E3,E3,C7,C7,0E,0E,00,00,
                        00,00,00,00,80,80,C0,C0,C0,C0,00,00,00,00,00,00,00,00,00,00,80,80,C0,C0,C0,C0,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        3F,3F,73,71,62,63,43,43,03,03,06,06,04,04,00,00,3F,3F,73,73,63,63,43,43,03,03,06,06,04,04,00,00,
                        80,80,C0,C0,E0,E0,C0,C0,00,00,00,00,00,00,00,00,80,80,C0,C0,E0,E0,C0,C0,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,18,00,10,00,00,00,00,00,00,00,
                        02,03,02,03,03,03,03,03,07,07,06,06,00,00,00,00,03,03,03,03,03,03,03,03,07,07,06,06,00,00,00,00,
                        C0,C0,60,E0,E0,E0,80,80,00,00,00,00,00,00,00,00,C0,C0,E0,E0,E0,E0,80,80,00,00,00,00,00,00,00,00,
                        00,00,30,30,50,70,60,60,00,00,00,00,00,00,00,00,00,00,00,30,00,70,00,60,00,00,00,00,00,00,00,00,
                        05,01,0D,03,03,07,15,17,1E,3F,3D,3B,19,1F,07,0F,01,06,03,0C,07,08,15,1E,3E,3F,3F,3F,1F,1F,0F,0F,
                        80,E0,78,F0,38,38,4C,08,56,1C,24,C0,99,E0,C5,C1,EC,10,F6,08,39,C0,08,F4,1C,E2,00,FE,80,FF,C1,C6,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,80,00,00,00,00,00,C0,00,20,00,00,00,00,00,00,00,00,80,
                        00,00,00,00,04,04,0A,0E,04,04,00,00,00,00,00,00,00,00,00,00,00,04,00,0E,00,04,00,00,00,00,00,00,
                        0E,0E,0F,0F,0F,0F,0E,0E,0E,0E,18,18,38,38,00,00,0E,0E,0F,0F,0F,0F,0E,0E,0E,0E,18,18,38,38,00,00,
                        26,27,00,11,11,13,05,01,0C,00,1D,00,30,00,4A,12,58,00,3E,00,36,08,00,1E,03,0C,02,1D,03,3C,02,7D,
                        60,E0,30,F0,58,F8,5F,DF,A7,E7,B8,B8,4C,4C,20,20,10,00,0C,00,07,00,20,00,18,00,47,00,B3,00,DF,00,
                        00,00,00,00,00,00,00,00,A0,A0,80,80,00,00,00,00,10,00,14,00,7C,00,F8,00,40,00,70,00,E0,00,FC,00,
                        1C,11,0A,03,2A,23,2B,23,5B,03,33,0B,39,03,5F,03,11,2E,03,3C,23,1C,23,5C,03,7C,03,7C,03,7C,03,7C,
                        00,80,C0,80,C0,80,00,40,00,00,80,00,9E,1E,1E,5E,A0,40,A0,40,80,40,00,C0,40,80,40,80,7E,9E,3E,DE,
                        00,00,00,00,04,04,00,04,2D,3B,14,33,63,64,65,66,00,00,00,00,0A,00,0B,00,00,00,08,00,18,00,18,00,
                        00,00,00,00,00,00,00,00,00,00,00,80,40,C0,40,C0,00,00,00,00,00,00,00,00,80,00,40,00,20,00,20,00,
                        02,02,07,04,05,06,03,02,03,00,03,01,01,01,01,01,02,03,06,07,06,07,02,03,00,03,01,02,01,02,01,02,
                        00,00,00,00,04,04,0A,0E,29,3F,14,33,62,65,45,46,00,00,00,00,00,00,01,00,00,00,08,00,18,00,38,00,
                        00,00,00,00,00,00,00,00,00,00,80,80,40,C0,40,C0,00,00,00,00,00,00,00,00,80,00,40,00,20,00,20,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,10,00,00,00,00,00,00,00,00,00,
                        01,0B,04,07,10,08,3C,2E,48,0E,1B,0D,1D,09,16,0B,0B,0F,07,0B,08,3F,2E,5F,0E,4F,0D,1E,09,1E,03,1C,
                        83,C1,83,80,81,80,40,C1,40,21,A0,80,A0,80,80,A0,C1,C2,80,83,80,81,C1,C0,21,E0,80,61,80,60,80,60,
                        80,40,80,40,00,00,40,C0,E0,60,20,60,40,00,00,00,00,C0,00,C0,00,C0,C0,20,60,80,60,00,00,40,00,00,
                        00,00,04,04,0A,0E,0C,0C,00,00,00,00,00,00,00,00,00,00,00,04,00,0E,00,0C,00,00,00,00,00,00,00,00,
                        02,02,07,04,05,06,03,02,03,00,03,01,01,01,01,01,02,03,06,07,06,07,02,03,00,03,01,02,01,02,01,02,
                        05,07,E8,F3,A6,7B,21,E1,72,F0,B9,78,B0,F0,60,20,07,F8,E3,FC,E3,FC,FD,E2,FC,F3,7E,F9,FF,70,2E,E0,
                        90,10,1C,1C,00,00,C0,80,80,80,00,00,A0,00,C0,40,6F,80,63,80,7F,80,BF,40,87,40,20,C0,00,E0,50,A0,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,F8,00,C0,00,FC,00,F8,00,90,00,00,00,00,00,00,00,
                        3C,00,02,00,00,00,01,00,00,00,00,00,00,00,00,00,00,3F,00,03,00,01,00,01,00,00,00,00,00,00,00,00,
                        5E,1E,8E,AE,A7,C7,33,63,43,63,E0,60,68,20,48,08,3E,DE,8E,6E,C7,27,63,93,63,93,68,90,20,58,08,78,
                        26,27,00,11,10,13,05,01,0C,00,1D,00,30,00,4A,12,58,00,3E,00,36,08,00,1E,03,0C,02,1D,03,3C,02,7D,
                        20,E0,B0,F0,90,F0,D8,F8,69,F9,A0,70,54,5C,6F,6F,18,00,0C,00,0E,00,07,00,06,00,0F,80,A3,00,90,00,
                        00,00,00,00,00,00,00,00,20,20,00,00,00,00,00,00,00,00,04,00,04,00,1C,00,D8,00,F8,00,E0,00,FC,00,
                        24,27,00,11,10,13,05,01,0C,00,1D,00,30,00,4A,12,58,00,3E,00,36,08,00,1E,03,0C,02,1D,03,3C,02,7D,
                        00,E0,B0,F0,90,F0,B8,F8,A8,E8,F0,70,58,58,28,28,18,00,08,00,0C,00,04,00,16,00,0E,80,A7,00,D7,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,80,80,00,00,00,00,00,00,00,00,00,00,00,00,80,00,48,00,
                        28,01,2A,03,4A,03,49,03,29,23,FA,62,AA,22,CA,02,01,3E,03,3C,03,7C,03,7C,23,5C,62,9D,22,DD,02,FD,
                        40,20,40,00,00,40,00,00,00,00,80,00,A0,40,9F,61,00,E0,00,C0,00,C0,00,80,00,80,00,80,00,E0,01,FF,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,30,30,40,70,50,70,00,00,00,00,00,00,00,00,00,00,00,30,00,50,00,70,00,00,00,00,00,00,
                        02,03,07,03,06,02,08,05,0D,07,0F,05,0D,05,19,15,03,00,03,04,02,05,05,0F,07,0E,05,0E,05,1E,11,0E,
                        00,42,C0,C2,00,42,80,C4,A0,80,A0,80,A0,80,20,80,4C,C2,CC,42,5C,C2,B8,44,98,60,90,60,80,60,80,60,
                        30,20,60,20,28,00,00,00,0E,0C,1A,02,14,10,11,01,A0,50,20,50,00,38,00,18,0C,12,02,1D,10,07,01,10,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        07,04,05,06,05,06,02,02,02,00,03,01,01,01,01,01,06,07,06,07,06,07,02,03,00,03,01,02,01,02,01,02,
                        38,38,38,38,3C,2C,2C,3C,2C,3C,78,78,70,70,E0,E0,38,38,38,38,3C,3C,3C,3C,3C,3C,78,78,70,70,E0,E0,
                        65,67,E8,33,26,FB,D1,F1,70,F0,B9,78,F0,B0,E0,A0,67,F8,E3,FC,E3,FC,FD,F2,FE,F1,7E,F9,BF,70,AE,60,
                        BC,3C,34,34,52,12,C3,83,88,88,20,00,A0,00,C0,40,43,80,4B,80,2D,C0,BC,40,93,40,0D,E0,04,E0,50,A0,
                        80,80,00,00,00,00,00,00,00,00,00,00,00,00,00,00,78,00,C0,00,EC,00,F8,00,90,00,80,00,00,00,00,00,
                        05,07,E8,F3,A6,7B,21,E1,72,F0,B9,78,B0,F0,60,20,07,F8,E3,FC,E3,FC,FD,E2,FC,F3,7E,F9,FF,70,2E,E0,
                        A4,24,10,10,40,00,C0,80,81,81,20,00,A0,00,C0,40,5B,80,6F,80,3F,C0,BF,40,B6,40,1F,E0,19,E0,55,A0,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,F0,00,C0,00,F0,00,F8,00,F4,00,98,00,C8,00,90,00
}


;;; $9400: Samus palettes ;;;
{
; Power suit
$9B:9400             dw 3800,0108,03BD,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,02B5,016B,0252,1104,0074,000D

; Samus death sequence - yellow flash
$9B:9420             dw 03FF,03FF,03FF,03FF,03FF,03FF,03FF,03FF,03FF,03FF,03FF,03FF,03FF,03FF,03FF,03FF

; Seemingly unused
$9B:9440             dw 3800,02FF,0217,0150,0089,00BB,3A9F,2A19,1DB4,114F,090B,3BE0,033F,021B,010E,0074
$9B:9460             dw 3800,1B1F,1A78,19D3,192D,155B,46DF,3A7A,2E16,25D2,1D8E,5FE0,13BF,129B,0192,00F8
$9B:9480             dw 3800,3B5F,3AFA,3A77,3A13,21BB,573F,4EFB,4AB9,4276,3E54,6FE8,13FF,231B,0216,017C
$9B:94A0             dw 3800,5B9F,5B7C,5B3B,5AF8,365B,6B7F,677D,635B,5F3A,5B19,7FF4,53FF,339F,333F,2A9F
$9B:94C0             dw 3800,7FFF,7FFF,7FFF,7FFF,7FFF,7FFF,7FFF,7FFF,7FFF,7FFF,7FFF,7FFF,7FFF,7FFF,7FFF
$9B:94E0             dw 7D00,7D00,7D00,7D00,7D00,7D00,7D00,7D00,7D00,7D00,7D00,7D00,7D00,7D00,7D00,7D00

; Used by unused routine $91:DD4C, test palette perhaps
$9B:9500             dw 3800,7FFF,7FFF,7FFF,7FFF,7FFF,7FFF,7FFF,7FFF,7FFF,7FFF,7FFF,7FFF,7FFF,7FFF,7FFF

; Varia suit
$9B:9520             dw 0000,0108,02FF,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,01BE,008E,0252,1104,0074,000D

; Seemingly unused
$9B:9540             dw 14E0,00CE,421F,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,5914,30AA,0216,1104,0074,000D
$9B:9560             dw 2003,28CE,6E1F,3C05,63E0,49A8,7F9F,72D2,624E,28BB,7D14,58AA,2A16,3904,2874,280D
$9B:9580             dw 2003,516E,7EBF,64A5,7FE0,7248,7FFF,7F72,7EEE,555B,7DB4,7D4A,52B6,61A4,5114,50AD
$9B:95A0             dw 0000,52AE,7FFF,65E5,7FE0,7388,7FFF,7FF2,7FEE,569B,7EF4,7E8A,53F6,62E4,5254,51ED
$9B:95C0             dw 3800,00CE,421F,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,5914,30AA,0216,1104,0074,000D
$9B:95E0             dw 3800,1618,575F,294F,4FEA,36F2,6BFF,5FFC,4798,15FF,6E5E,45F4,175F,264E,15BE,1557
$9B:9600             dw 3800,02DE,43FF,1615,3BF0,23B8,57FF,4BFF,3BFE,02BF,5B1F,32BA,03FF,1314,027F,021D
$9B:9620             dw 3800,2BFF,6BFF,3F5F,63FA,4BFF,7FFF,73FF,63FF,2BFF,7FFF,5BFF,2BFF,3BFE,2BBF,2B5F
$9B:9640             dw 3800,00CE,421F,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,5914,30AA,0216,1104,0074,000D
$9B:9660             dw 3800,020E,435F,1545,43E0,22E8,57FF,4BF2,3B8E,01FB,5A54,31EA,0356,1244,01B4,014D
$9B:9680             dw 3800,034E,43FF,1685,4FE0,23E8,57FF,4BF2,3BEE,033B,5B94,332A,03F6,1384,02F4,028D
$9B:96A0             dw 3800,2BEE,6BFF,3FC5,63E0,4BE8,7FFF,73F2,63EE,2BFB,7FF4,5BEA,2BF6,3BE4,2BF4,2BED

; Crystal flash Samus. Colours 0..9 = Samus colours, Ah..Fh = bubble colours
; These two parts are loaded independently / asynchronously
$9B:96C0             dw 3800,4210,4210,4210,4210,4210,4210,4210,4210,4210, 7FFF,7BDF,77BF,6F7F,6B5F,673F
$9B:96E0             dw 3800,4E73,4E73,4E73,4E73,4E73,4E73,4E73,4E73,4E73, 673F,7FFF,7BDF,77BF,6F7F,6B5F
$9B:9700             dw 3800,5EF7,5EF7,5EF7,5EF7,5EF7,5EF7,5EF7,5EF7,5EF7, 6B5F,673F,7FFF,7BDF,77BF,6F7F
$9B:9720             dw 3800,6F7B,6F7B,6F7B,6F7B,6F7B,6F7B,6F7B,6F7B,6F7B, 6F7F,6B5F,673F,7FFF,7BDF,77BF
$9B:9740             dw 3800,5EF7,5EF7,5EF7,5EF7,5EF7,5EF7,5EF7,5EF7,5EF7, 77BF,6F7F,6B5F,673F,7FFF,7BDF
$9B:9760             dw 3800,4E73,4E73,4E73,4E73,4E73,4E73,4E73,4E73,4E73, 7FFF,77BF,6F7F,6B5F,673F,7FFF

; Seemingly unused
$9B:9780             dw 0000,00CE,421F,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,5914,30AA,0216,1104,0074,000D
$9B:97A0             dw 0000,21D6,56BF,28AA,4FE5,364D,63BF,5B36,52D4,155C,65B8,454F,16B9,25A9,1518,14B2
$9B:97C0             dw 0000,2E39,6B5F,4170,67EB,4F13,73DF,6F9B,6779,2E1E,727B,5E15,2F5C,3E6F,2DDB,2D78
$9B:97E0             dw 0000,42DE,7FFF,5615,7BF0,63B8,7FFF,7FFF,7BFE,42BF,7F1F,72BA,43FF,5314,427F,421D

; Gravity suit
$9B:9800             dw 3800,0108,421F,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,5914,30AA,0274,1104,0074,000D

; Power suit - death sequence (eight frames) / beam charging (first four frames)
$9B:9820             dw 0000,0108,03BD,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,02B5,016B,0252,1104,0074,000D
$9B:9840             dw 0C63,0D4A,0FBD,2068,43E3,29EA,5B9F,4EF3,4270,0D1B,0ED6,0DAD,0E73,1D47,0CD5,0C6F
$9B:9860             dw 1CE7,1DAD,1FBD,2CEB,4BE7,362D,5F9F,5715,4AB2,1D7C,1EF7,1E10,1EB5,29AA,1D56,1CF1
$9B:9880             dw 2D6B,2E10,2FBD,396E,53EB,4270,63BF,5B36,52D4,2DDC,2F18,2E52,2ED6,3A0E,2DB8,2D73
$9B:98A0             dw 3DEF,3E73,3FDE,49F2,5BEF,4ED3,6BBF,6358,5B16,3E5D,3F5A,3EB5,3F18,4671,3E39,3DF6
$9B:98C0             dw 4E73,4ED6,4FDE,5675,63F3,5B16,6FBF,6B7A,6358,4EBD,4F7B,4EF7,4F5A,52D4,4E9A,4E78
$9B:98E0             dw 5EF7,5F39,5FDE,62F8,6BF7,6759,73DF,6F9B,6B7A,5F1E,5F9C,5F5A,5F7B,6338,5F1C,5EFA
$9B:9900             dw 6F7B,6F9C,6FDE,6F7B,73FB,739C,77DF,77BD,73BC,6F7E,6FBD,6F9C,6FBD,6F9B,6F7D,6F7C

; Varia suit - death sequence (eight frames) / beam charging (first four frames)
$9B:9920             dw 0000,0108,02FF,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,01BE,008E,0252,1104,0074,000D
$9B:9940             dw 0C63,0D4A,0F1F,2068,43E3,29EA,5B9F,4EF3,4270,0D1B,0DFE,0CF0,0E73,1D47,0CD5,0C6F
$9B:9960             dw 1CE7,1DAD,1F3F,2CEB,4BE7,362D,5F9F,5715,4AB2,1D7C,1E3E,1D52,1EB5,29AA,1D56,1CF1
$9B:9980             dw 2D6B,2E10,2F5F,396E,53EB,4270,63BF,5B36,52D4,2DDC,2E7E,2DD4,2ED6,3A0E,2DB8,2D73
$9B:99A0             dw 3DEF,3E73,3F7F,49F2,5BEF,4ED3,6BBF,6358,5B16,3E5D,3EDE,3E36,3F18,4671,3E39,3DF6
$9B:99C0             dw 4E73,4ED6,4F9F,5675,63F3,5B16,6FBF,6B7A,6358,4EBD,4F1E,4E98,4F5A,52D4,4E9A,4E78
$9B:99E0             dw 5EF7,5F39,5FBF,62F8,6BF7,6759,73DF,6F9B,6B7A,5F1E,5F5E,5F1A,5F7B,6338,5F1C,5EFA
$9B:9A00             dw 6F7B,6F9C,6FDF,6F7B,73FB,739C,77DF,77BD,73BC,6F7E,6F9E,6F7C,6FBD,6F9B,6F7D,6F7C

; Gravity suit - death sequence (eight frames) / beam charging (first four frames)
$9B:9A20             dw 14E0,00CE,421F,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,5914,30AA,0216,1104,0074,000D
$9B:9A40             dw 2143,0D30,463F,2068,43E3,29EA,5B9F,4EF3,4270,0D1B,5D55,390C,0E37,1D47,0CD5,0C6F
$9B:9A60             dw 2DA7,1D92,4E7F,2CEB,4BE7,362D,5F9F,5715,4AB2,1D7C,61B6,416F,1E78,29AA,1D56,1CF1
$9B:9A80             dw 3A0B,2DF4,56BF,396E,53EB,4270,63BF,5B36,52D4,2DDC,6618,4DD1,2EB9,3A0E,2DB8,2D73
$9B:9AA0             dw 4A6F,3E56,5EFF,49F2,5BEF,4ED3,6BBF,6358,5B16,3E5D,6A79,5654,3EFA,4671,3E39,3DF6
$9B:9AC0             dw 56D3,4EB8,673F,5675,63F3,5B16,6FBF,6B7A,6358,4EBD,6EDA,5EB7,4F3B,52D4,4E9A,4E78
$9B:9AE0             dw 6337,5F1A,6F7F,62F8,6BF7,6759,73DF,6F9B,6B7A,5F1E,733C,6B19,5F7C,6338,5F1C,5EFA
$9B:9B00             dw 6F9B,6F7C,77BF,6F7B,73FB,739C,77DF,77BD,73BC,6F7E,779D,737C,6FBD,6F9B,6F7D,6F7C

; Power suit - speed boosting
; $9B80 also used for metroid drain blue
$9B:9B20             dw 0000,0108,03BD,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,02B5,016B,0252,1104,0074,000D
$9B:9B40             dw 2003,28CE,37BD,3C05,63E0,49A8,7F9F,72D2,624E,28BB,36B5,356B,2A16,3904,2874,280D
$9B:9B60             dw 2003,516E,4BBD,64A5,7FE0,7248,7FFF,7F72,7EEE,555B,4AB5,496B,52B6,61A4,5114,50AD
$9B:9B80             dw 0000,52AE,5FBD,65E5,7FE0,7388,7FFF,7FF2,7FEE,569B,5F55,5E0B,53F6,62E4,5254,51ED

; Power suit - speed booster shine
$9B:9BA0             dw 0000,0108,03BD,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,02B5,016B,0252,1104,0074,000D
$9B:9BC0             dw 0000,1DAD,1FBD,2CEB,4BE7,362D,5F9F,5715,4AB2,1D7C,1EF7,1E10,1EB5,29AA,1D56,1CF1
$9B:9BE0             dw 0000,3E73,3FDE,49F2,5BEF,4ED3,6BBF,6358,5B16,3E5D,3F5A,3EB5,3F18,4671,3E39,3DF6
$9B:9C00             dw 0000,5F39,5FDE,62F8,6BF7,6759,73DF,6F9B,6B7A,5F1E,5F9C,5F5A,5F7B,6338,5F1C,5EFA

; Power suit - shinespark
; $9C80 also used for power suit pseudo screw attack
$9B:9C20             dw 3800,0108,03BD,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,02B5,016B,0252,1104,0074,000D
$9B:9C40             dw 3800,01AD,03FF,294F,4FEA,36F2,6BFF,5FFC,4798,017C,0318,0210,02B5,264E,15BE,1557
$9B:9C60             dw 3800,0273,17FF,1615,3BF0,23B8,57FF,4BFF,3BFE,025D,037B,02B5,0318,1314,027F,021D
$9B:9C80             dw 3800,0339,23FF,3F5F,63FA,4BFF,7FFF,73FF,63FF,031E,03DE,035A,037B,3BFE,2BBF,2B5F

; Power suit - screw attack
$9B:9CA0             dw 3800,0108,03BD,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,02B5,016B,0252,1104,0074,000D
$9B:9CC0             dw 3800,01A8,03F8,1545,43E0,22E8,57FF,4BF2,3B8E,01FB,0355,020B,0356,1244,01B4,014D
$9B:9CE0             dw 3800,0248,03F3,1685,4FE0,23E8,57FF,4BF2,3BEE,033B,03F5,02AB,03F6,1384,02F4,028D
$9B:9D00             dw 3800,02E8,03EE,3FC5,63E0,4BE8,7FFF,73F2,63EE,2BFB,03F0,034B,2BF6,3BE4,2BF4,2BED

; Varia suit - speed boosting
; $9D80 also used for metroid drain blue
$9B:9D20             dw 0000,0108,02FF,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,01BE,008E,0252,1104,0074,000D
$9B:9D40             dw 2003,2908,2AFF,3C05,63E0,49A8,7F9F,72D2,624E,28BB,29BE,288E,2A4D,3904,2874,280D
$9B:9D60             dw 2003,5108,52FF,64A5,7FE0,7248,7FFF,7F72,7EEE,555B,51BE,508E,3E4D,61A4,5114,50AD
$9B:9D80             dw 0000,79A8,7B9F,65E5,7FE0,7388,7FFF,7FF2,7FEE,569B,765E,752E,524D,62E4,5254,51ED

; Varia suit - speed booster shine
$9B:9DA0             dw 0000,0108,02FF,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,01BE,008E,0252,1104,0074,000D
$9B:9DC0             dw 0000,1DAD,1F3F,2CEB,4BE7,362D,5F9F,5715,4AB2,1D7C,1E3E,1D52,1EB5,29AA,1D56,1CF1
$9B:9DE0             dw 0000,3E73,3F7F,49F2,5BEF,4ED3,6BBF,6358,5B16,3E5D,3EDE,3E36,3F18,4671,3E39,3DF6
$9B:9E00             dw 0000,5F39,5FBF,62F8,6BF7,6759,73DF,6F9B,6B7A,5F1E,5F5E,5F1A,5F7B,6338,5F1C,5EFA

; Varia suit - shinespark
; $9E80 also used for varia suit pseudo screw attack
$9B:9E20             dw 3800,0108,02FF,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,01BE,008E,0252,1104,0074,000D
$9B:9E40             dw 3800,01AD,039F,294F,4FEA,36F2,6BFF,5FFC,4798,15FF,025E,0133,02F7,264E,15BE,1557
$9B:9E60             dw 3800,0252,03FF,1615,3BF0,23B8,57FF,4BFF,3BFE,02BF,02FE,01D8,039C,1314,027F,021D
$9B:9E80             dw 3800,02F7,17FF,3F5F,63FA,4BFF,7FFF,73FF,63FF,2BFF,039E,027D,03FF,3BFE,2BBF,2B5F

; Varia suit - screw attack
$9B:9EA0             dw 3800,0108,02FF,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,01BE,008E,0252,1104,0074,000D
$9B:9EC0             dw 3800,01A8,039F,1545,43E0,22E8,57FF,4BF2,3B8E,01FB,025E,012E,02F2,1244,01B4,014D
$9B:9EE0             dw 3800,0248,039A,1685,4FE0,23E8,57FF,4BF2,3BEE,033B,02FE,01CE,0392,1384,02F4,028D
$9B:9F00             dw 3800,02E8,0394,3FC5,63E0,4BE8,7FFF,73F2,63EE,2BFB,039E,026E,03F2,3BE4,2BF4,2BED

; Gravity suit - speed boosting
; $9F80 also used for metroid drain blue
$9B:9F20             dw 14E0,00CE,421F,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,5914,30AA,0216,1104,0074,000D
$9B:9F40             dw 2003,28CE,6E1F,3C05,63E0,49A8,7F9F,72D2,624E,28BB,7D14,58AA,2A16,3904,2874,280D
$9B:9F60             dw 2003,516E,7EBF,64A5,7FE0,7248,7FFF,7F72,7EEE,555B,7DB4,7D4A,52B6,61A4,5114,50AD
$9B:9F80             dw 0000,52AE,7FFF,65E5,7FE0,7388,7FFF,7FF2,7FEE,569B,7EF4,7E8A,53F6,62E4,5254,51ED

; Gravity suit - speed booster shine
$9B:9FA0             dw 0000,00CE,421F,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,5914,30AA,0216,1104,0074,000D
$9B:9FC0             dw 0000,1D92,4E7F,2CEB,4BE7,362D,5F9F,5715,4AB2,1D7C,61B6,416F,1E78,29AA,1D56,1CF1
$9B:9FE0             dw 0000,3E56,5EFF,49F2,5BEF,4ED3,6BBF,6358,5B16,3E5D,6A79,5654,3EFA,4671,3E39,3DF6
$9B:A000             dw 0000,5F1A,6F7F,62F8,6BF7,6759,73DF,6F9B,6B7A,5F1E,733C,6B19,5F7C,6338,5F1C,5EFA

; Gravity suit - shinespark
; $A080 also used for gravity suit pseudo screw attack
$9B:A020             dw 3800,00CE,421F,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,5914,30AA,0216,1104,0074,000D
$9B:A040             dw 3800,1618,575F,294F,4FEA,36F2,6BFF,5FFC,4798,15FF,6E5E,45F4,175F,264E,15BE,1557
$9B:A060             dw 3800,02DE,43FF,1615,3BF0,23B8,57FF,4BFF,3BFE,02BF,5B1F,32BA,03FF,1314,027F,021D
$9B:A080             dw 3800,2BFF,6BFF,3F5F,63FA,4BFF,7FFF,73FF,63FF,2BFF,7FFF,5BFF,2BFF,3BFE,2BBF,2B5F

; Gravity suit - screw attack
$9B:A0A0             dw 3800,00CE,421F,1405,3BE0,21A8,579F,4AD2,3A4E,00BB,5914,30AA,0216,1104,0074,000D
$9B:A0C0             dw 3800,020E,435F,1545,43E0,22E8,57FF,4BF2,3B8E,01FB,5A54,31EA,0356,1244,01B4,014D
$9B:A0E0             dw 3800,034E,43FF,1685,4FE0,23E8,57FF,4BF2,3BEE,033B,5B94,332A,03F6,1384,02F4,028D
$9B:A100             dw 3800,2BEE,6BFF,3FC5,63E0,4BE8,7FFF,73F2,63EE,2BFB,7FF4,5BEA,2BF6,3BE4,2BF4,2BED

; Samus death sequence - suitless Samus
$9B:A120             dw 21A8,02FF,0217,0150,0089,7FFF,3A9F,2A19,1DB4,114F,090B,4E73,4210,318C,2108,1084
$9B:A140             dw 29EA,0F1F,0E38,0D91,0CEB,7FFF,42BF,3239,29F5,1D91,154D,5294,4631,39CE,294A,1CE7
$9B:A160             dw 362D,1F3F,1E79,1DF3,1D4E,7FFF,4ADF,3E7A,3636,29F3,25B0,5AD6,4E73,4210,35AD,294A
$9B:A180             dw 4270,2F5F,2EBA,2E35,2DD1,7FFF,531F,46BB,4278,3A35,3212,5EF7,56B5,4E73,4210,39CE
$9B:A1A0             dw 4ED3,3F7F,3EFB,3E97,3E34,7FFF,5B3F,52FC,4ED9,4697,4275,6739,5EF7,56B5,4E73,4631
$9B:A1C0             dw 5B16,4F9F,4F3C,4EF9,4E96,7FFF,635F,5F3C,5B1A,52F9,52D7,6B5A,6739,5EF7,5AD6,5294
$9B:A1E0             dw 6759,5FBF,5F7D,5F3B,5F19,7FFF,6B9F,677D,675C,633B,5F3A,739C,6F7B,6B5A,6739,6318
$9B:A200             dw 739C,6FDF,6FBE,6F9D,6F7C,7FFF,73BF,73BE,739D,6F9D,6F9C,77BD,77BD,739C,739C,6F7B
$9B:A220             dw 77BD,77BD,77BD,77BD,77BD,77BD,77BD,77BD,77BD,77BD,77BD,77BD,77BD,77BD,77BD,77BD

; Hyper beam
$9B:A240             dw 0000,2119,319E,1096,35BF,1CF9,319E,2D7D,295B,253B,211A,18D7,211A,14B7,18D8,1096
$9B:A260             dw 0000,1639,2ABE,09B6,2EDF,1619,2ABE,26BD,1E7B,1E5B,1A3A,0DF7,1A3A,0DD7,11F8,09B6
$9B:A280             dw 0000,0F39,23DE,02D6,23FF,0B39,23DE,1FBD,177B,137B,135A,06F7,135A,02F7,0B18,02D6
$9B:A2A0             dw 0000,0F2F,23D3,02CB,23F4,0B2E,23D3,1FB2,1771,1370,134F,06ED,134F,02EC,0B0D,02CB
$9B:A2C0             dw 0000,0F23,23C8,02C0,23E8,0B22,23C8,1FA7,1765,1364,1344,06E1,1344,02E0,0B02,02C0
$9B:A2E0             dw 0000,3284,4329,2221,4749,2E83,4329,4308,3AC6,36C5,32A5,2A42,32A5,2641,2A63,2221
$9B:A300             dw 0400,51E5,6289,4181,66AA,4DE4,6289,5E68,5A27,5626,5205,49A3,5205,45A2,49C3,4181
$9B:A320             dw 0000,554D,69D2,48CA,69F2,512C,69D2,65B1,5D8F,596E,594E,4D0B,594E,48EA,510C,48CA
$9B:A340             dw 7FFF,5876,691A,4812,6D1B,5455,691A,68FA,60B8,5C97,5896,5034,5896,4C13,5054,4812
$9B:A360             dw 3800,3CB8,4D5D,2C55,517D,38B7,4D5D,493C,44FA,40F9,3CD9,3476,3CD9,3075,3497,2C55

; Hurt flash
$9B:A380             dw 0000,6739,6F9C,5EF7,7BFF,6739,77BD,6F9C,6B7B,6B7B,6B7B,5F18,6B7B,5F18,6739,5F18

; Intro Samus (greyscale)
$9B:A3A0             dw 3800,2DAD,52D6,1084,77FF,2DAD,677B,52D6,4252,4252,4252,1908,4252,1908,2DAD,1908

; Visor colours
$9B:A3C0             dw 3BE0,5FF0,7FFF, ; Palette transition when x-ray is widening
                        43FF,2F5A,1AB5  ; Full x-ray beam, or in room with layer blending configuration = 28h/2Ah (with colour math backdrop)
}


;;; $A3CC: Set projectile trail position ;;;
{
;; Parameters:
;;     X: Projectile index
;;     Y: Projectile trail index
$9B:A3CC 08          PHP
$9B:A3CD 8B          PHB
$9B:A3CE 4B          PHK                    ;\
$9B:A3CF AB          PLB                    ;} DB = $9B
$9B:A3D0 C2 30       REP #$30
$9B:A3D2 22 D1 81 93 JSL $9381D1[$93:81D1]  ; $16 = projectile trail frame
$9B:A3D6 AD 3F 09    LDA $093F  [$7E:093F]  ;\
$9B:A3D9 10 18       BPL $18    [$A3F3]     ;} If Ceres elevator shaft is rotating:
$9B:A3DB 22 D9 8A 8B JSL $8B8AD9[$8B:8AD9]  ; Calculate position of projectile in rotating elevator room
$9B:A3DF A5 12       LDA $12    [$7E:0012]  ;\
$9B:A3E1 48          PHA                    ;|
$9B:A3E2 A5 14       LDA $14    [$7E:0014]  ;|
$9B:A3E4 18          CLC                    ;|
$9B:A3E5 6D 11 09    ADC $0911  [$7E:0911]  ;|
$9B:A3E8 85 12       STA $12    [$7E:0012]  ;} ($12, $14) = ([layer 1 X position] + [$14], [layer 1 Y position] + [$12])
$9B:A3EA 68          PLA                    ;|
$9B:A3EB 18          CLC                    ;|
$9B:A3EC 6D 15 09    ADC $0915  [$7E:0915]  ;|
$9B:A3EF 85 14       STA $14    [$7E:0014]  ;/
$9B:A3F1 80 0A       BRA $0A    [$A3FD]

$9B:A3F3 BD 64 0B    LDA $0B64,x[$7E:0B64]  ;\ Else (Ceres elevator shaft is not rotating):
$9B:A3F6 85 12       STA $12    [$7E:0012]  ;} $12 = [projectile X position]
$9B:A3F8 BD 78 0B    LDA $0B78,x[$7E:0B78]  ;\
$9B:A3FB 85 14       STA $14    [$7E:0014]  ;} $14 = [projectile Y position]

$9B:A3FD 5A          PHY
$9B:A3FE BD 18 0C    LDA $0C18,x[$7E:0C18]  ;\
$9B:A401 89 20 00    BIT #$0020             ;} If [projectile type] & 20h != 0: go to BRANCH_SBA_TRAIL
$9B:A404 D0 29       BNE $29    [$A42F]     ;/
$9B:A406 89 10 00    BIT #$0010             ;\
$9B:A409 D0 12       BNE $12    [$A41D]     ;} If projectile is not charged beam:
$9B:A40B 29 0F 00    AND #$000F             ;\
$9B:A40E 0A          ASL A                  ;|
$9B:A40F A8          TAY                    ;|
$9B:A410 BD 04 0C    LDA $0C04,x[$7E:0C04]  ;|
$9B:A413 29 0F 00    AND #$000F             ;} A = [$A4B3 + (beam type) * 2] + ([projectile direction] & Fh) * 2
$9B:A416 0A          ASL A                  ;|
$9B:A417 18          CLC                    ;|
$9B:A418 79 B3 A4    ADC $A4B3,y[$9B:A4B3]  ;/
$9B:A41B 80 22       BRA $22    [$A43F]     ; Go to BRANCH_MERGE

$9B:A41D 29 0F 00    AND #$000F             ;\
$9B:A420 0A          ASL A                  ;|
$9B:A421 A8          TAY                    ;|
$9B:A422 BD 04 0C    LDA $0C04,x[$7E:0C04]  ;|
$9B:A425 29 0F 00    AND #$000F             ;} A = [$A4CB + (beam type) * 2] + ([projectile direction] & Fh) * 2
$9B:A428 0A          ASL A                  ;|
$9B:A429 18          CLC                    ;|
$9B:A42A 79 CB A4    ADC $A4CB,y[$9B:A4D3]  ;/
$9B:A42D 80 10       BRA $10    [$A43F]     ; Go to BRANCH_MERGE

; BRANCH_SBA_TRAIL
$9B:A42F 29 0F 00    AND #$000F             ;\
$9B:A432 0A          ASL A                  ;|
$9B:A433 A8          TAY                    ;|
$9B:A434 BD 04 0C    LDA $0C04,x            ;|
$9B:A437 29 0F 00    AND #$000F             ;} A = [$A4E3 + (beam type) * 2] + ([projectile direction] & Fh) * 2
$9B:A43A 0A          ASL A                  ;|
$9B:A43B 18          CLC                    ;|
$9B:A43C 79 E3 A4    ADC $A4E3,y            ;/

; BRANCH_MERGE
$9B:A43F A8          TAY                    ;\
$9B:A440 A5 16       LDA $16    [$7E:0016]  ;|
$9B:A442 0A          ASL A                  ;|
$9B:A443 0A          ASL A                  ;} Y = [[A]] + (projectile trail frame) * 4
$9B:A444 18          CLC                    ;|
$9B:A445 79 00 00    ADC $0000,y[$9B:A519]  ;|
$9B:A448 A8          TAY                    ;/
$9B:A449 FA          PLX                    ; X = (projectile trail index)
$9B:A44A B9 00 00    LDA $0000,y[$9B:A56F]  ;\
$9B:A44D EB          XBA                    ;|
$9B:A44E 30 05       BMI $05    [$A455]     ;|
$9B:A450 29 FF 00    AND #$00FF             ;|
$9B:A453 80 03       BRA $03    [$A458]     ;|
                                            ;|
$9B:A455 09 00 FF    ORA #$FF00             ;} Projectile trail left Y position = [$14] - 4 + ±[[Y] + 1]
                                            ;|
$9B:A458 18          CLC                    ;|
$9B:A459 65 14       ADC $14    [$7E:0014]  ;|
$9B:A45B 38          SEC                    ;|
$9B:A45C E9 04 00    SBC #$0004             ;|
$9B:A45F 9F 78 D7 7E STA $7ED778,x[$7E:D79A];/
$9B:A463 88          DEY                    ;\
$9B:A464 B9 00 00    LDA $0000,y[$9B:A56E]  ;|
$9B:A467 EB          XBA                    ;|
$9B:A468 30 05       BMI $05    [$A46F]     ;|
$9B:A46A 29 FF 00    AND #$00FF             ;|
$9B:A46D 80 03       BRA $03    [$A472]     ;|
                                            ;|
$9B:A46F 09 00 FF    ORA #$FF00             ;} Projectile trail left X position = [$12] - 4 + ±[[Y]]
                                            ;|
$9B:A472 18          CLC                    ;|
$9B:A473 65 12       ADC $12    [$7E:0012]  ;|
$9B:A475 38          SEC                    ;|
$9B:A476 E9 04 00    SBC #$0004             ;|
$9B:A479 9F 30 D7 7E STA $7ED730,x[$7E:D752];/
$9B:A47D C8          INY                    ;\
$9B:A47E B9 02 00    LDA $0002,y[$9B:A571]  ;|
$9B:A481 EB          XBA                    ;|
$9B:A482 30 05       BMI $05    [$A489]     ;|
$9B:A484 29 FF 00    AND #$00FF             ;|
$9B:A487 80 03       BRA $03    [$A48C]     ;|
                                            ;|
$9B:A489 09 00 FF    ORA #$FF00             ;} Projectile trail right Y position = [$14] - 4 + ±[[Y] + 3]
                                            ;|
$9B:A48C 18          CLC                    ;|
$9B:A48D 65 14       ADC $14    [$7E:0014]  ;|
$9B:A48F 38          SEC                    ;|
$9B:A490 E9 04 00    SBC #$0004             ;|
$9B:A493 9F 9C D7 7E STA $7ED79C,x[$7E:D7BE];/
$9B:A497 B9 01 00    LDA $0001,y[$9B:A570]  ;\
$9B:A49A EB          XBA                    ;|
$9B:A49B 30 05       BMI $05    [$A4A2]     ;|
$9B:A49D 29 FF 00    AND #$00FF             ;|
$9B:A4A0 80 03       BRA $03    [$A4A5]     ;|
                                            ;|
$9B:A4A2 09 00 FF    ORA #$FF00             ;} Projectile trail right X position = [$12] - 4 + ±[[Y] + 2]
                                            ;|
$9B:A4A5 18          CLC                    ;|
$9B:A4A6 65 12       ADC $12    [$7E:0012]  ;|
$9B:A4A8 38          SEC                    ;|
$9B:A4A9 E9 04 00    SBC #$0004             ;|
$9B:A4AC 9F 54 D7 7E STA $7ED754,x[$7E:D776];/
$9B:A4B0 AB          PLB
$9B:A4B1 28          PLP
$9B:A4B2 6B          RTL
}


;;; $A4B3..B3A6: Beam trail offsets ;;;
{
$9B:A4B3             dw A50B, A4F7, A50B, A4F7, A50B, A50B, A51F, A533, A50B, A50B, A547, A55B ; Uncharged beams
$9B:A4CB             dw A98F, A9A3, A98F, A9A3, A98F, A98F, A9B7, A9CB, A98F, A98F, A9DF, A9F3 ; Charged beams
$9B:A4E3             dw 0000, 0000, 0000, 0000, B37B, B327, B37B, 0000, 0000, 0000             ; Spazer SBA trail


;;; $A4F7: Uncharged beams ;;;
{
;                        ________________________________________________ Up, facing right
;                       |     ___________________________________________ Up-right
;                       |    |     ______________________________________ Right
;                       |    |    |     _________________________________ Down-right
;                       |    |    |    |     ____________________________ Down, facing right
;                       |    |    |    |    |     _______________________ Down, facing left
;                       |    |    |    |    |    |     __________________ Down-left
;                       |    |    |    |    |    |    |     _____________ Left
;                       |    |    |    |    |    |    |    |     ________ Up-left
;                       |    |    |    |    |    |    |    |    |     ___ Up, facing left
;                       |    |    |    |    |    |    |    |    |    |
$9B:A4F7             dw A58F,A60F,A5CF,A64F,A58F,A58F,A60F,A5CF,A64F,A58F ; Wave / wave ice
$9B:A50B             dw A56F,A56F,A56F,A56F,A56F,A56F,A56F,A56F,A56F,A56F ; Default
$9B:A51F             dw A68F,A6A7,A6B3,A6BF,A69B,A69B,A6CB,A6D7,A6E3,A68F ; Ice spazer
$9B:A533             dw A6EF,A717,A73F,A767,A78F,A78F,A7B7,A7DF,A807,A6EF ; Wave ice spazer
$9B:A547             dw A82F,A837,A83F,A847,A84F,A84F,A857,A85F,A867,A82F ; Ice plasma
$9B:A55B             dw A86F,A893,A8B7,A8DB,A8FF,A8FF,A923,A947,A96B,A86F ; Wave ice plasma

; Format:
;     x,y,X,Y
;     x: Left trail X offset
;     y: Left trail Y offset
;     X: Right trail X offset
;     Y: Right trail Y offset

; Indexed by [[projectile instruction pointer] - 2] * 4

; Default
$9B:A56F             db 00,00,00,00, 00,00,00,00, 00,00,00,00, 00,00,00,00, 00,00,00,00, 00,00,00,00, 00,00,00,00, 00,00,00,00

; Wave / wave ice
$9B:A58F             db 00,00,00,00, 08,00,00,00, 0C,00,00,00, 10,00,00,00, 14,00,00,00, 10,00,00,00, 0C,00,00,00, 08,00,00,00, 00,00,00,00, F8,00,00,00, F4,00,00,00, F0,00,00,00, EC,00,00,00, F0,00,00,00, F4,00,00,00, F8,00,00,00
$9B:A5CF             db 00,00,00,00, 00,F8,00,00, 00,F4,00,00, 00,F0,00,00, 00,EC,00,00, 00,F0,00,00, 00,F4,00,00, 00,F8,00,00, 00,00,00,00, 00,08,00,00, 00,0C,00,00, 00,10,00,00, 00,14,00,00, 00,10,00,00, 00,0C,00,00, 00,08,00,00
$9B:A60F             db 00,00,00,00, FC,FC,00,00, F8,F8,00,00, F6,F6,00,00, F4,F4,00,00, F6,F6,00,00, F8,F8,00,00, FC,FC,00,00, 00,00,00,00, 04,04,00,00, 08,08,00,00, 0A,0A,00,00, 0C,0C,00,00, 0A,0A,00,00, 08,08,00,00, 04,04,00,00
$9B:A64F             db 00,00,00,00, 04,FC,00,00, 08,F8,00,00, 0A,F6,00,00, 0C,F4,00,00, 0A,F6,00,00, 08,F8,00,00, 04,FC,00,00, 00,00,00,00, FC,04,00,00, F8,08,00,00, F6,0A,00,00, F4,0C,00,00, F6,0A,00,00, F8,08,00,00, FC,04,00,00

; Ice spazer
$9B:A68F             db 00,00,00,00, F8,08,08,08, F0,08,10,08
$9B:A69B             db 00,00,00,00, F8,F8,08,F8, F0,F8,10,F8
$9B:A6A7             db F8,08,F8,08, F2,02,FE,0E, EC,FC,02,14
$9B:A6B3             db F8,00,F8,00, F8,F8,F8,08, F8,F0,F8,10
$9B:A6BF             db F8,F8,F8,F8, FE,F0,F0,FE, 04,EC,EC,04
$9B:A6CB             db 08,F8,08,F8, 0E,FE,02,F2, 14,04,FE,EC
$9B:A6D7             db 08,00,08,00, 08,08,08,F8, 08,10,08,F0
$9B:A6E3             db 08,08,08,08, 02,10,10,02, FC,14,14,FC

; Wave ice spazer
$9B:A6EF             db 00,00,00,00, FC,08,04,08, F8,08,08,08, F4,08,0C,08, F0,08,10,08, F0,08,10,08, F0,08,10,08, F4,08,0C,08, F8,08,08,08, FC,08,04,08
$9B:A717             db 00,00,00,00, F4,06,FA,0C, F2,02,FE,0E, F0,00,00,10, EE,FE,02,12, EC,FC,02,14, EE,FE,02,12, F0,00,00,10, F2,02,FE,0E, F4,06,FA,0C
$9B:A73F             db 00,00,00,00, F8,FC,F8,04, F8,F8,F8,08, F8,F4,F8,0C, F8,F0,F8,10, F8,F0,F8,10, F8,F0,F8,10, F8,F4,F8,0C, F8,F8,F8,08, F8,FC,F8,04
$9B:A767             db 00,00,00,00, F4,FA,FA,F4, FE,F0,F0,FE, F0,00,00,F0, EE,02,02,EE, 04,EC,EC,04, EE,02,02,EE, F0,00,00,F0, FE,F0,F0,FE, F4,FA,FA,F4
$9B:A78F             db 00,00,00,00, FC,F8,04,F8, F8,F8,08,F8, F4,F8,0C,F8, F0,F8,10,F8, F0,F8,10,F8, F0,F8,10,F8, F4,F8,0C,F8, F8,F8,08,F8, FC,F8,04,F8
$9B:A7B7             db 00,00,00,00, 02,F2,0E,FE, 00,F0,10,00, FE,EE,12,02, FE,EC,14,04, FE,EC,14,04, FE,EC,14,04, FE,EE,12,02, 00,F0,10,00, 02,F2,0E,FE
$9B:A7DF             db 00,00,00,00, 08,FC,08,04, 08,F8,08,08, 08,F4,08,0C, 08,F0,08,10, 08,F0,08,10, 08,F0,08,10, 08,F4,08,0C, 08,F8,08,08, 08,FC,08,04
$9B:A807             db 00,00,00,00, 06,0A,0A,06, 02,10,10,02, 00,10,10,00, FE,12,12,FE, FC,14,14,FC, FE,12,12,FE, 00,10,10,00, 02,10,10,02, 06,0A,0A,06

; Ice plasma
$9B:A82F             db 00,00,00,00, 00,10,00,10
$9B:A837             db 00,00,00,00, F4,0C,F4,0C
$9B:A83F             db 00,00,00,00, F0,00,F0,00
$9B:A847             db 00,00,00,00, F4,F4,F4,F4
$9B:A84F             db 00,00,00,00, 00,F0,00,F0
$9B:A857             db 00,00,00,00, 0C,F4,0C,F4
$9B:A85F             db 00,00,00,00, 10,00,10,00
$9B:A867             db 00,00,00,00, 0C,0C,0C,0C

; Wave ice plasma
$9B:A86F             db 00,00,00,00, 00,10,00,10, F8,10,08,10, F0,10,10,10, F0,10,10,10, F0,10,10,10, F0,10,10,10, F0,10,10,10, F8,10,08,10
$9B:A893             db 00,00,00,00, F4,0C,F4,0C, EC,08,F8,12, E8,02,FE,14, E8,00,00,18, E8,00,00,18, E8,00,00,18, E8,02,FE,14, EC,08,F8,12
$9B:A8B7             db 00,00,00,00, F0,00,F0,00, F0,F8,F0,08, F0,F4,F0,0C, F0,F0,F0,10, F0,F0,F0,10, F0,F0,F0,10, F0,F4,F0,0C, F0,F8,F0,08
$9B:A8DB             db 00,00,00,00, F4,F4,F4,F4, EE,FA,FA,EE, EC,FE,FE,EC, E8,00,00,E8, E8,00,00,E8, E8,00,00,E8, EC,FE,FE,EC, EE,FA,FA,EE
$9B:A8FF             db 00,00,00,00, 00,F0,00,F0, F8,F0,08,F0, F0,F0,10,F0, F0,F0,10,F0, F0,F0,10,F0, F0,F0,10,F0, F0,F0,10,F0, F8,F0,08,F0
$9B:A923             db 00,00,00,00, 0C,F4,0C,F4, 14,F8,08,EE, 18,FE,02,EC, 18,00,00,E8, 18,00,00,E8, 18,00,00,E8, 18,FE,02,EC, 14,F8,08,EE
$9B:A947             db 00,00,00,00, 10,00,10,00, 10,F8,10,08, 10,F4,10,0C, 10,F0,10,10, 10,F0,10,10, 10,F0,10,10, 10,F4,10,0C, 10,F8,10,08
$9B:A96B             db 00,00,00,00, 0C,0C,0C,0C, 12,06,06,12, 14,02,02,14, 18,00,00,18, 18,00,00,18, 18,00,00,18, 14,02,02,14, 12,06,06,12
}


;;; $A98F: Charged beams ;;;
{
;                        ________________________________________________ Up, facing right
;                       |     ___________________________________________ Up-right
;                       |    |     ______________________________________ Right
;                       |    |    |     _________________________________ Down-right
;                       |    |    |    |     ____________________________ Down, facing right
;                       |    |    |    |    |     _______________________ Down, facing left
;                       |    |    |    |    |    |     __________________ Down-left
;                       |    |    |    |    |    |    |     _____________ Left
;                       |    |    |    |    |    |    |    |     ________ Up-left
;                       |    |    |    |    |    |    |    |    |     ___ Up, facing left
;                       |    |    |    |    |    |    |    |    |    |
$9B:A98F             dw AA07,AA07,AA07,AA07,AA07,AA07,AA07,AA07,AA07,AA07 ; Default
$9B:A9A3             dw AA27,AAA7,AA67,AAE7,AA27,AA27,AAA7,AA67,AAE7,AA27 ; Wave / wave ice
$9B:A9B7             dw AB27,AB4F,AB77,AB9F,ABC7,ABC7,ABEF,AC17,AC3F,AB27 ; Ice spazer
$9B:A9CB             dw AC67,ACC7,AD27,AD87,ADE7,ADE7,AE47,AEA7,AF07,AC67 ; Wave ice spazer
$9B:A9DF             dw AF67,AF87,AFA7,AFC7,AFE7,AFE7,B007,B027,B047,AF67 ; Ice plasma
$9B:A9F3             dw B067,B0BF,B117,B16F,B1C7,B1C7,B21F,B277,B2CF,B067 ; Wave ice plasma

; Format:
;     x,y,X,Y
;     x: Left trail X offset
;     y: Left trail Y offset
;     X: Right trail X offset
;     Y: Right trail Y offset

; Indexed by [[projectile instruction pointer] - 2] * 4

; Default
$9B:AA07             db 00,00,00,00, 00,00,00,00, 00,00,00,00, 00,00,00,00, 00,00,00,00, 00,00,00,00, 00,00,00,00, 00,00,00,00

; Wave / wave ice
$9B:AA27             db 00,00,00,00, 00,00,00,00, F8,00,08,00, F8,00,08,00, F4,00,0C,00, F4,00,0C,00, F0,00,10,00, F0,00,10,00, F0,00,10,00, F0,00,10,00, F0,00,10,00, F0,00,10,00, F4,00,0C,00, F4,00,0C,00, F8,00,08,00, F8,00,08,00
$9B:AA67             db 00,00,00,00, 00,00,00,00, 00,F8,00,08, 00,F8,00,08, 00,F4,00,0C, 00,F4,00,0C, 00,F0,00,10, 00,F0,00,10, 00,F0,00,10, 00,F0,00,10, 00,F0,00,10, 00,F0,00,10, 00,F4,00,0C, 00,F4,00,0C, 00,F8,00,08, 00,F8,00,08
$9B:AAA7             db 00,00,00,00, 00,00,00,00, FC,FC,04,04, FC,FC,04,04, F8,F8,08,08, F8,F8,08,08, F8,F8,08,08, F8,F8,08,08, F6,F6,0A,0A, F6,F6,0A,0A, F8,F8,08,08, F8,F8,08,08, F8,F8,08,08, F8,F8,08,08, FC,FC,04,04, FC,FC,04,04
$9B:AAE7             db 00,00,00,00, 00,00,00,00, FC,04,04,FC, FC,04,04,FC, F8,08,08,F8, F8,08,08,F8, F8,08,08,F8, F8,08,08,F8, F6,0A,0A,F6, F6,0A,0A,F6, F8,08,08,F8, F8,08,08,F8, F8,08,08,F8, F8,08,08,F8, FC,04,04,FC, FC,04,04,FC

; Ice spazer
$9B:AB27             db 00,00,00,00, 00,00,00,00, 00,08,00,08, 00,08,00,08, 00,10,00,10, 00,10,00,10, F8,10,08,10, F8,10,08,10, F0,10,10,10, F0,10,10,10
$9B:AB4F             db 00,00,00,00, 00,00,00,00, F8,08,F8,08, F8,08,F8,08, F4,0C,F4,0C, F4,0C,F4,0C, F0,08,F8,10, F0,08,F8,10, E8,00,00,18, E8,00,00,18
$9B:AB77             db 00,00,00,00, 00,00,00,00, F8,08,F8,08, F8,08,F8,08, F0,00,F0,00, F0,00,F0,00, F0,F8,F0,08, F0,F8,F0,08, F0,F0,F0,10, F0,F0,F0,10
$9B:AB9F             db 00,00,00,00, 00,00,00,00, F8,F8,F8,F8, F8,F8,F8,F8, F4,F4,F4,F4, F4,F4,F4,F4, F0,F8,F8,F0, F0,F8,F8,F0, E8,00,00,E8, E8,00,00,E8
$9B:ABC7             db 00,00,00,00, 00,00,00,00, 00,F8,00,F8, 00,F8,00,F8, 00,F0,00,F0, 00,F0,00,F0, F8,F0,08,F0, F8,F0,08,F0, F0,F0,10,F0, F0,F0,10,F0
$9B:ABEF             db 00,00,00,00, 00,00,00,00, 08,F8,08,F8, 08,F8,08,F8, 0C,F4,0C,F4, 0C,F4,0C,F4, 10,F8,08,F0, 10,F8,08,F0, 18,00,00,E8, 18,00,00,E8
$9B:AC17             db 00,00,00,00, 00,00,00,00, 08,00,08,00, 08,00,08,00, 10,00,10,00, 10,00,10,00, 10,F8,10,08, 10,F8,10,08, 10,F0,10,10, 10,F0,10,10
$9B:AC3F             db 00,00,00,00, 00,00,00,00, 08,08,08,08, 08,08,08,08, 0C,0C,0C,0C, 0C,0C,0C,0C, 10,08,08,10, 10,08,08,10, 18,00,00,18, 18,00,00,18

; Wave ice spazer
$9B:AC67             db 00,00,00,00, 00,00,00,00, 00,08,00,08, 00,08,00,08, 00,10,00,10, 00,10,00,10, FC,10,04,10, FC,10,04,10, F8,10,08,10, F8,10,08,10, F4,10,0C,10, F4,10,0C,10, F0,10,10,10, F0,10,10,10, F0,10,10,10, F0,10,10,10, F0,10,10,10, F0,10,10,10, F4,10,0C,10, F4,10,0C,10, F8,10,08,10, F8,10,08,10, FC,10,04,10, FC,10,04,10
$9B:ACC7             db 00,00,00,00, 00,00,00,00, F8,08,F8,08, F8,08,F8,08, F4,0C,F4,0C, F4,0C,F4,0C, F0,08,F8,10, F0,08,F8,10, F0,08,F8,10, F0,08,F8,10, F0,08,F8,10, F0,08,F8,10, E8,00,00,18, E8,00,00,18, E8,00,00,18, E8,00,00,18, E8,00,00,18, E8,00,00,18, F0,08,F8,10, F0,08,F8,10, F0,08,F8,10, F0,08,F8,10, F0,08,F8,10, F0,08,F8,10
$9B:AD27             db 00,00,00,00, 00,00,00,00, F8,00,F8,00, F8,00,F8,00, F0,00,F0,00, F0,00,F0,00, F0,FC,F0,04, F0,FC,F0,04, F0,F8,F0,08, F0,F8,F0,08, F0,F4,F0,0C, F0,F4,F0,0C, F0,F0,F0,10, F0,F0,F0,10, F0,F0,F0,10, F0,F0,F0,10, F0,F0,F0,10, F0,F0,F0,10, F0,F4,F0,0C, F0,F4,F0,0C, F0,F8,F0,08, F0,F8,F0,08, F0,FC,F0,04, F0,FC,F0,04
$9B:AD87             db 00,00,00,00, 00,00,00,00, F8,F8,F8,F8, F8,F8,F8,F8, F4,F4,F4,F4, F4,F4,F4,F4, F0,F8,F8,F0, F0,F8,F8,F0, F0,F8,F8,F0, F0,F8,F8,F0, EC,FC,FC,EC, EC,FC,FC,EC, E8,00,00,E8, E8,00,00,E8, E8,00,00,E8, E8,00,00,E8, E8,00,00,E8, E8,00,00,E8, EC,FC,FC,EC, EC,FC,FC,EC, F0,F8,F8,F0, F0,F8,F8,F0, F0,F8,F8,F0, F0,F8,F8,F0
$9B:ADE7             db 00,00,00,00, 00,00,00,00, 00,F8,00,F8, 00,F8,00,F8, 00,F0,00,F0, 00,F0,00,F0, FC,F0,04,F0, FC,F0,04,F0, F8,F0,08,F0, F8,F0,08,F0, F4,F0,0C,F0, F4,F0,0C,F0, F0,F0,10,F0, F0,F0,10,F0, F0,F0,10,F0, F0,F0,10,F0, F0,F0,10,F0, F0,F0,10,F0, F4,F0,0C,F0, F4,F0,0C,F0, F8,F0,08,F0, F8,F0,08,F0, FC,F0,04,F0, FC,F0,04,F0
$9B:AE47             db 00,00,00,00, 00,00,00,00, 08,F8,08,F8, 08,F8,08,F8, 0C,F4,0C,F4, 0C,F4,0C,F4, 08,F0,10,F8, 08,F0,10,F8, 08,F0,10,F8, 08,F0,10,F8, 04,EC,14,FC, 04,EC,14,FC, 00,E8,18,00, 00,E8,18,00, 00,E8,18,00, 00,E8,18,00, 00,E8,18,00, 00,E8,18,00, 04,EC,14,FC, 04,EC,14,FC, 08,F0,10,F8, 08,F0,10,F8, 08,F0,10,F8, 08,F0,10,F8
$9B:AEA7             db 00,00,00,00, 00,00,00,00, 08,00,08,00, 08,00,08,00, 10,00,10,00, 10,00,10,00, 10,FC,10,04, 10,FC,10,04, 10,F8,10,08, 10,F8,10,08, 10,F4,10,0C, 10,F4,10,0C, 10,F0,10,10, 10,F0,10,10, 10,F0,10,10, 10,F0,10,10, 10,F0,10,10, 10,F0,10,10, 10,F4,10,0C, 10,F4,10,0C, 10,F8,10,08, 10,F8,10,08, 10,FC,10,04, 10,FC,10,04
$9B:AF07             db 00,00,00,00, 00,00,00,00, 08,08,08,08, 08,08,08,08, 0C,0C,0C,0C, 0C,0C,0C,0C, 08,10,10,08, 08,10,10,08, 08,10,10,08, 08,10,10,08, 04,14,14,04, 04,14,14,04, 00,18,18,00, 00,18,18,00, 00,18,18,00, 00,18,18,00, 00,18,18,00, 00,18,18,00, 04,14,14,04, 04,14,14,04, 08,10,10,08, 08,10,10,08, 08,10,10,08, 08,10,10,08

; Ice plasma
$9B:AF67             db 00,00,00,00, 00,00,00,00, 00,0C,00,0C, 00,0C,00,0C, 00,18,00,18, 00,18,00,18, 00,1C,00,1C, 00,1C,00,1C
$9B:AF87             db 00,00,00,00, 00,00,00,00, F8,08,F8,08, F8,08,F8,08, F0,10,F0,10, F0,10,F0,10, E8,18,E8,18, E8,18,E8,18
$9B:AFA7             db 00,00,00,00, 00,00,00,00, F4,00,F4,00, F4,00,F4,00, E8,00,E8,00, E8,00,E8,00, E4,00,E4,00, E4,00,E4,00
$9B:AFC7             db 00,00,00,00, 00,00,00,00, F8,F8,F8,F8, F8,F8,F8,F8, F0,F0,F0,F0, F0,F0,F0,F0, E8,E8,E8,E8, E8,E8,E8,E8
$9B:AFE7             db 00,00,00,00, 00,00,00,00, 00,F4,00,F4, 00,F4,00,F4, 00,E8,00,E8, 00,E8,00,E8, 00,E4,00,E4, 00,E4,00,E4
$9B:B007             db 00,00,00,00, 00,00,00,00, 08,F8,08,F8, 08,F8,08,F8, 10,F0,10,F0, 10,F0,10,F0, 18,E8,18,E8, 18,E8,18,E8
$9B:B027             db 00,00,00,00, 00,00,00,00, 0C,00,0C,00, 0C,00,0C,00, 18,00,18,00, 18,00,18,00, 1C,00,1C,00, 1C,00,1C,00
$9B:B047             db 00,00,00,00, 00,00,00,00, 08,08,08,08, 08,08,08,08, 10,10,10,10, 10,10,10,10, 18,18,18,18, 18,18,18,18

; Wave ice plasma
$9B:B067             db 00,00,00,00, 00,00,00,00, 00,0C,00,0C, 00,0C,00,0C, 00,18,00,18, 00,18,00,18, 00,1C,00,1C, 00,1C,00,1C, F8,1C,08,1C, F8,1C,08,1C, F4,1C,0C,1C, F4,1C,0C,1C, F0,1C,10,1C, F0,1C,10,1C, F0,1C,10,1C, F0,1C,10,1C, F0,1C,10,1C, F0,1C,10,1C, F4,1C,0C,1C, F4,1C,0C,1C, F8,1C,08,1C, F8,1C,08,1C
$9B:B0BF             db 00,00,00,00, 00,00,00,00, F8,08,F8,08, F8,08,F8,08, F0,10,F0,10, F0,10,F0,10, EC,14,EC,14, EC,14,EC,14, E4,0C,F0,18, E4,0C,F0,18, E0,0C,F4,1C, E0,0C,F4,1C, E0,08,F8,20, E0,08,F8,20, E0,08,F8,20, E0,08,F8,20, E0,08,F8,20, E0,08,F8,20, E0,0C,F4,1C, E0,0C,F4,1C, E4,0C,F0,18, E4,0C,F0,18
$9B:B117             db 00,00,00,00, 00,00,00,00, F4,00,F4,00, F4,00,F4,00, E8,00,E8,00, E8,00,E8,00, E4,00,E4,00, E4,00,E4,00, E4,F8,E4,08, E4,F8,E4,08, E4,F4,E4,0C, E4,F4,E4,0C, E4,F0,E4,10, E4,F0,E4,10, E4,F0,E4,10, E4,F0,E4,10, E4,F0,E4,10, E4,F0,E4,10, E4,F4,E4,0C, E4,F4,E4,0C, E4,F8,E4,08, E4,F8,E4,08
$9B:B16F             db 00,00,00,00, 00,00,00,00, F8,F8,F8,F8, F8,F8,F8,F8, F0,F0,F0,F0, F0,F0,F0,F0, EC,EC,EC,EC, EC,EC,EC,EC, E8,F0,F0,E8, E8,F0,F0,E8, E0,F4,F4,E0, E0,F4,F4,E0, E0,F8,F8,E0, E0,F8,F8,E0, E0,F8,F8,E0, E0,F8,F8,E0, E0,F8,F8,E0, E0,F8,F8,E0, E0,F4,F4,E0, E0,F4,F4,E0, E8,F0,F0,E8, E8,F0,F0,E8
$9B:B1C7             db 00,00,00,00, 00,00,00,00, 00,F4,00,F4, 00,F4,00,F4, 00,E8,00,E8, 00,E8,00,E8, 00,E4,00,E4, 00,E4,00,E4, F8,E4,08,E4, F8,E4,08,E4, F4,E4,0C,E4, F4,E4,0C,E4, F0,E4,10,E4, F0,E4,10,E4, F0,E4,10,E4, F0,E4,10,E4, F0,E4,10,E4, F0,E4,10,E4, F4,E4,0C,E4, F4,E4,0C,E4, F8,E4,08,E4, F8,E4,08,E4
$9B:B21F             db 00,00,00,00, 00,00,00,00, 08,F8,08,F8, 08,F8,08,F8, 10,F0,10,F0, 10,F0,10,F0, 14,EC,14,EC, 14,EC,14,EC, 1C,F4,10,E8, 1C,F4,10,E8, 20,F4,0C,E4, 20,F4,0C,E4, 20,F8,08,E0, 20,F8,08,E0, 20,F8,08,E0, 20,F8,08,E0, 20,F8,08,E0, 20,F8,08,E0, 20,F4,0C,E4, 20,F4,0C,E4, 1C,F4,10,E8, 1C,F4,10,E8
$9B:B277             db 00,00,00,00, 00,00,00,00, 0C,00,0C,00, 0C,00,0C,00, 18,00,18,00, 18,00,18,00, 1C,00,1C,00, 1C,00,1C,00, 1C,F8,1C,08, 1C,F8,1C,08, 1C,F4,1C,0C, 1C,F4,1C,0C, 1C,F0,1C,10, 1C,F0,1C,10, 1C,F0,1C,10, 1C,F0,1C,10, 1C,F0,1C,10, 1C,F0,1C,10, 1C,F4,1C,0C, 1C,F4,1C,0C, 1C,F8,1C,08, 1C,F8,1C,08
$9B:B2CF             db 00,00,00,00, 00,00,00,00, 08,08,08,08, 08,08,08,08, 10,10,10,10, 10,10,10,10, 14,14,14,14, 14,14,14,14, 18,10,10,18, 18,10,10,18, 20,0C,0C,20, 20,0C,0C,20, 20,08,08,20, 20,08,08,20, 20,08,08,20, 20,08,08,20, 20,08,08,20, 20,08,08,20, 20,0C,0C,20, 20,0C,0C,20, 18,10,10,18, 18,10,10,18
}


;;; $B327: Spazer SBA trail ;;;
{
;                        ________________________________________________ Up, facing right
;                       |     ___________________________________________ Up-right
;                       |    |     ______________________________________ Right
;                       |    |    |     _________________________________ Down-right
;                       |    |    |    |     ____________________________ Down, facing right
;                       |    |    |    |    |     _______________________ Down, facing left
;                       |    |    |    |    |    |     __________________ Down-left
;                       |    |    |    |    |    |    |     _____________ Left
;                       |    |    |    |    |    |    |    |     ________ Up-left
;                       |    |    |    |    |    |    |    |    |     ___ Up, facing left
;                       |    |    |    |    |    |    |    |    |    |
$9B:B327             dw B33B,B34B,B35B,B36B,B33B,B33B,B34B,B35B,B36B,B33B ; Wave spazer?

; Format:
;     x,y,X,Y
;     x: Left trail X offset
;     y: Left trail Y offset
;     X: Right trail X offset
;     Y: Right trail Y offset

; Indexed by [[projectile instruction pointer] - 2] * 4

$9B:B33B             db 00,00,00,00, 10,00,F0,00, 00,00,00,00, F0,00,10,00
$9B:B34B             db 00,00,00,00, F6,F6,0A,0A, 00,00,00,00, 0A,0A,F6,F6
$9B:B35B             db 00,00,00,00, 00,F0,00,10, 00,00,00,00, 00,10,00,F0
$9B:B36B             db 00,00,00,00, 0A,F6,F6,0A, 00,00,00,00, F6,0A,0A,F6

$9B:B37B             dw B38F,B38F,B38F,B38F,B39B,B39B,B38F,B38F,B38F,B38F ; Spazer (/ ice spazer?)

$9B:B38F             db 00,00,00,00, F8,08,08,08, F0,08,10,08
$9B:B39B             db 00,00,00,00, F8,F8,08,F8, F0,F8,10,F8
}
}


;;; $B3A7..B860: Death sequence ;;;
{
;;; $B3A7: Set Samus death sequence pose ;;;
{
$9B:B3A7 08          PHP
$9B:B3A8 8B          PHB
$9B:B3A9 4B          PHK                    ;\
$9B:B3AA AB          PLB                    ;} DB = $9B
$9B:B3AB C2 30       REP #$30
$9B:B3AD AD 1F 0A    LDA $0A1F  [$7E:0A1F]  ;\
$9B:B3B0 29 FF 00    AND #$00FF             ;|
$9B:B3B3 48          PHA                    ;} If [Samus movement type] = spin jumping:
$9B:B3B4 C9 03 00    CMP #$0003             ;|
$9B:B3B7 D0 07       BNE $07    [$B3C0]     ;/
$9B:B3B9 A9 32 00    LDA #$0032             ;\
$9B:B3BC 22 49 90 80 JSL $809049[$80:9049]  ;} Queue sound 32h, sound library 1, max queued sounds allowed = 6 (spin jump end)

$9B:B3C0 68          PLA
$9B:B3C1 AA          TAX                    ;\
$9B:B3C2 BD 20 B4    LDA $B420,x[$9B:B42A]  ;} A = [$B420 + [Samus movement type]]
$9B:B3C5 29 FF 00    AND #$00FF             ;/
$9B:B3C8 48          PHA
$9B:B3C9 AD 1E 0A    LDA $0A1E  [$7E:0A1E]  ;\
$9B:B3CC 29 FF 00    AND #$00FF             ;|
$9B:B3CF C9 04 00    CMP #$0004             ;} If Samus is facing right:
$9B:B3D2 F0 08       BEQ $08    [$B3DC]     ;/
$9B:B3D4 A9 D7 00    LDA #$00D7             ;\
$9B:B3D7 8D 1C 0A    STA $0A1C  [$7E:0A1C]  ;} Samus pose = facing right - crystal flash ending
$9B:B3DA 80 06       BRA $06    [$B3E2]

$9B:B3DC A9 D8 00    LDA #$00D8             ;\ Else (Samus is facing left):
$9B:B3DF 8D 1C 0A    STA $0A1C  [$7E:0A1C]  ;} Samus pose = facing left - crystal flash ending

$9B:B3E2 22 33 F4 91 JSL $91F433[$91:F433]  ; Initialise Samus pose
$9B:B3E6 22 08 FB 91 JSL $91FB08[$91:FB08]  ; Set Samus animation frame if pose changed
$9B:B3EA AD 20 0A    LDA $0A20  [$7E:0A20]  ;\
$9B:B3ED 8D 24 0A    STA $0A24  [$7E:0A24]  ;} Samus last different pose = [Samus previous pose]
$9B:B3F0 AD 22 0A    LDA $0A22  [$7E:0A22]  ;\
$9B:B3F3 8D 26 0A    STA $0A26  [$7E:0A26]  ;} Samus last different pose X direction / movement type = [Samus previous pose X direction / movement type]
$9B:B3F6 AD 1C 0A    LDA $0A1C  [$7E:0A1C]  ;\
$9B:B3F9 8D 20 0A    STA $0A20  [$7E:0A20]  ;} Samus previous pose = [Samus pose]
$9B:B3FC AD 1E 0A    LDA $0A1E  [$7E:0A1E]  ;\
$9B:B3FF 8D 22 0A    STA $0A22  [$7E:0A22]  ;} Samus previous pose X direction / movement type = [Samus pose X direction / movement type]
$9B:B402 9C 9A 0A    STZ $0A9A  [$7E:0A9A]  ; New pose Samus animation frame = 0
$9B:B405 68          PLA
$9B:B406 8D 96 0A    STA $0A96  [$7E:0A96]  ; Samus animation frame = [A]
$9B:B409 AD F6 0A    LDA $0AF6  [$7E:0AF6]  ;\
$9B:B40C 38          SEC                    ;|
$9B:B40D ED 11 09    SBC $0911  [$7E:0911]  ;} Samus X position -= [layer 1 X position]
$9B:B410 8D F6 0A    STA $0AF6  [$7E:0AF6]  ;/
$9B:B413 AD FA 0A    LDA $0AFA  [$7E:0AFA]  ;\
$9B:B416 38          SEC                    ;|
$9B:B417 ED 15 09    SBC $0915  [$7E:0915]  ;} Samus Y position -= [layer 1 Y position]
$9B:B41A 8D FA 0A    STA $0AFA  [$7E:0AFA]  ;/
$9B:B41D AB          PLB
$9B:B41E 28          PLP
$9B:B41F 6B          RTL

; Samus animation frame. 1 (transition from morphed) if Samus is morphed, otherwise 5 (unmorphed)
$9B:B420             db 05, ; 0: Standing
                        05, ; 1: Running
                        05, ; 2: Normal jumping
                        05, ; 3: Spin jumping
                        01, ; 4: Morph ball - on ground
                        05, ; 5: Crouching
                        05, ; 6: Falling
                        00, ; 7: Unused
                        01, ; 8: Morph ball - falling
                        00, ; 9: Unused
                        05, ; Ah: Knockback / crystal flash ending
                        05, ; Bh: Unused
                        05, ; Ch: Unused
                        05, ; Dh: Unused
                        05, ; Eh: Turning around - on ground
                        05, ; Fh: Crouching/standing/morphing/unmorphing transition
                        05, ; 10h: Moonwalking
                        01, ; 11h: Spring ball - on ground
                        01, ; 12h: Spring ball - in air
                        01, ; 13h: Spring ball - falling
                        05, ; 14h: Wall jumping
                        05, ; 15h: Ran into a wall
                        05, ; 16h: Grappling
                        05, ; 17h: Turning around - jumping
                        05, ; 18h: Turning around - falling
                        05, ; 19h: Damage boost
                        05, ; 1Ah: Grabbed by Draygon
                        05  ; 1Bh: Shinespark / crystal flash / drained by metroid / damaged by MB's attacks
}


;;; $B43C: Draw Samus starting death animation ;;;
{
$9B:B43C 22 76 89 90 JSL $908976[$90:8976]
$9B:B440 6B          RTL
}


;;; $B441: Handle death animation flashing ;;;
{
;; Returns:
;;     A: 1 if flashing has ended, 0 otherwise
$9B:B441 08          PHP
$9B:B442 8B          PHB
$9B:B443 4B          PHK                    ;\
$9B:B444 AB          PLB                    ;} DB = $9B
$9B:B445 C2 30       REP #$30
$9B:B447 AD E6 0D    LDA $0DE6  [$7E:0DE6]  ;\
$9B:B44A C9 04 00    CMP #$0004             ;} If [death animation counter] < 4:
$9B:B44D 10 05       BPL $05    [$B454]     ;/
$9B:B44F 0A          ASL A                  ;\
$9B:B450 A8          TAY                    ;} Y = [death animation counter] * 2
$9B:B451 20 D8 B6    JSR $B6D8  [$9B:B6D8]  ; Queue transfer of segment of Samus death sequence to VRAM

$9B:B454 AD E6 0D    LDA $0DE6  [$7E:0DE6]  ;\
$9B:B457 1A          INC A                  ;} Increment death animation counter
$9B:B458 8D E6 0D    STA $0DE6  [$7E:0DE6]  ;/
$9B:B45B C9 3C 00    CMP #$003C             ;\
$9B:B45E 10 38       BPL $38    [$B498]     ;} If [death animation counter] >= 60: go to BRANCH_END
$9B:B460 AD E2 0D    LDA $0DE2  [$7E:0DE2]  ;\
$9B:B463 3A          DEC A                  ;} Decrement death animation timer
$9B:B464 8D E2 0D    STA $0DE2  [$7E:0DE2]  ;/
$9B:B467 F0 02       BEQ $02    [$B46B]     ;\
$9B:B469 10 27       BPL $27    [$B492]     ;} If [death animation timer] > 0: return A = 0

$9B:B46B AD E4 0D    LDA $0DE4  [$7E:0DE4]  ;\
$9B:B46E F0 0E       BEQ $0E    [$B47E]     ;} If [death animation index] != 0:
$9B:B470 A9 00 00    LDA #$0000             ;\
$9B:B473 8D E4 0D    STA $0DE4  [$7E:0DE4]  ;} Death animation index = 0
$9B:B476 A9 03 00    LDA #$0003             ;\
$9B:B479 8D E2 0D    STA $0DE2  [$7E:0DE2]  ;} Death animation timer = 3
$9B:B47C 80 0C       BRA $0C    [$B48A]

$9B:B47E A9 01 00    LDA #$0001             ;\ Else ([death animation index] = 0):
$9B:B481 8D E4 0D    STA $0DE4  [$7E:0DE4]  ;} Death animation index = 1
$9B:B484 A9 01 00    LDA #$0001             ;\
$9B:B487 8D E2 0D    STA $0DE2  [$7E:0DE2]  ;} Death animation timer = 1

$9B:B48A AD E4 0D    LDA $0DE4  [$7E:0DE4]  ;\
$9B:B48D 0A          ASL A                  ;} X = [death animation index] * 2
$9B:B48E AA          TAX                    ;/
$9B:B48F 20 CE B5    JSR $B5CE  [$9B:B5CE]  ; Write death animation palette

$9B:B492 A9 00 00    LDA #$0000             ;\
$9B:B495 AB          PLB                    ;|
$9B:B496 28          PLP                    ;} Return A = 0
$9B:B497 6B          RTL                    ;/

; BRANCH_END
$9B:B498 20 B6 B4    JSR $B4B6  [$9B:B4B6]  ; Finish death animation flashing
$9B:B49B A5 8D       LDA $8D    [$7E:008D]  ;\
$9B:B49D 29 B0 00    AND #$00B0             ;|
$9B:B4A0 C9 B0 00    CMP #$00B0             ;} If controller 2 pressing A + L + R:
$9B:B4A3 D0 08       BNE $08    [$B4AD]     ;/
$9B:B4A5 A9 01 00    LDA #$0001             ;\
$9B:B4A8 8D EC 0D    STA $0DEC  [$7E:0DEC]  ;} Debug death animation flag = 1
$9B:B4AB 80 03       BRA $03    [$B4B0]
                                            ; Else (controller 2 not pressing A + L + R):
$9B:B4AD 9C EC 0D    STZ $0DEC  [$7E:0DEC]  ; Debug death animation flag = 0

$9B:B4B0 A9 01 00    LDA #$0001             ;\
$9B:B4B3 AB          PLB                    ;|
$9B:B4B4 28          PLP                    ;} Return A = 1
$9B:B4B5 6B          RTL                    ;/
}


;;; $B4B6: Finish death animation flashing ;;;
{
; Writes the first frame of beam charging palette for Samus to end the last yellow frame, I guess(?)
; Also writes background colours (in preparation?) for the fade-to-white(?)
$9B:B4B6 08          PHP
$9B:B4B7 C2 30       REP #$30
$9B:B4B9 AC 74 0A    LDY $0A74  [$7E:0A74]  ;\
$9B:B4BC B9 C8 B5    LDA $B5C8,y[$9B:B5C8]  ;|
$9B:B4BF AA          TAX                    ;} X = [[$B5C8 + [Samus suit palette index]]]
$9B:B4C0 BD 00 00    LDA $0000,x[$9B:B7D3]  ;|
$9B:B4C3 AA          TAX                    ;/
$9B:B4C4 8B          PHB
$9B:B4C5 F4 00 9B    PEA $9B00              ;\
$9B:B4C8 AB          PLB                    ;} DB = $9B
$9B:B4C9 AB          PLB                    ;/
$9B:B4CA BD 00 00    LDA $0000,x[$9B:9820]  ;\
$9B:B4CD 8F 80 C1 7E STA $7EC180[$7E:C180]  ;|
$9B:B4D1 BD 02 00    LDA $0002,x[$9B:9822]  ;|
$9B:B4D4 8F 82 C1 7E STA $7EC182[$7E:C182]  ;|
$9B:B4D8 BD 04 00    LDA $0004,x[$9B:9824]  ;|
$9B:B4DB 8F 84 C1 7E STA $7EC184[$7E:C184]  ;|
$9B:B4DF BD 06 00    LDA $0006,x[$9B:9826]  ;|
$9B:B4E2 8F 86 C1 7E STA $7EC186[$7E:C186]  ;|
$9B:B4E6 BD 08 00    LDA $0008,x[$9B:9828]  ;|
$9B:B4E9 8F 88 C1 7E STA $7EC188[$7E:C188]  ;|
$9B:B4ED BD 0A 00    LDA $000A,x[$9B:982A]  ;|
$9B:B4F0 8F 8A C1 7E STA $7EC18A[$7E:C18A]  ;|
$9B:B4F4 BD 0C 00    LDA $000C,x[$9B:982C]  ;|
$9B:B4F7 8F 8C C1 7E STA $7EC18C[$7E:C18C]  ;|
$9B:B4FB BD 0E 00    LDA $000E,x[$9B:982E]  ;|
$9B:B4FE 8F 8E C1 7E STA $7EC18E[$7E:C18E]  ;|
$9B:B502 BD 10 00    LDA $0010,x[$9B:9830]  ;} Sprite palette 4 = 20h bytes from [X]
$9B:B505 8F 90 C1 7E STA $7EC190[$7E:C190]  ;|
$9B:B509 BD 12 00    LDA $0012,x[$9B:9832]  ;|
$9B:B50C 8F 92 C1 7E STA $7EC192[$7E:C192]  ;|
$9B:B510 BD 14 00    LDA $0014,x[$9B:9834]  ;|
$9B:B513 8F 94 C1 7E STA $7EC194[$7E:C194]  ;|
$9B:B517 BD 16 00    LDA $0016,x[$9B:9836]  ;|
$9B:B51A 8F 96 C1 7E STA $7EC196[$7E:C196]  ;|
$9B:B51E BD 18 00    LDA $0018,x[$9B:9838]  ;|
$9B:B521 8F 98 C1 7E STA $7EC198[$7E:C198]  ;|
$9B:B525 BD 1A 00    LDA $001A,x[$9B:983A]  ;|
$9B:B528 8F 9A C1 7E STA $7EC19A[$7E:C19A]  ;|
$9B:B52C BD 1C 00    LDA $001C,x[$9B:983C]  ;|
$9B:B52F 8F 9C C1 7E STA $7EC19C[$7E:C19C]  ;|
$9B:B533 BD 1E 00    LDA $001E,x[$9B:983E]  ;|
$9B:B536 8F 9E C1 7E STA $7EC19E[$7E:C19E]  ;/
$9B:B53A A2 20 A1    LDX #$A120             ;\
$9B:B53D BD 00 00    LDA $0000,x[$9B:A120]  ;|
$9B:B540 8F E0 C1 7E STA $7EC1E0[$7E:C1E0]  ;|
$9B:B544 BD 02 00    LDA $0002,x[$9B:A122]  ;|
$9B:B547 8F E2 C1 7E STA $7EC1E2[$7E:C1E2]  ;|
$9B:B54B BD 04 00    LDA $0004,x[$9B:A124]  ;|
$9B:B54E 8F E4 C1 7E STA $7EC1E4[$7E:C1E4]  ;|
$9B:B552 BD 06 00    LDA $0006,x[$9B:A126]  ;|
$9B:B555 8F E6 C1 7E STA $7EC1E6[$7E:C1E6]  ;|
$9B:B559 BD 08 00    LDA $0008,x[$9B:A128]  ;|
$9B:B55C 8F E8 C1 7E STA $7EC1E8[$7E:C1E8]  ;|
$9B:B560 BD 0A 00    LDA $000A,x[$9B:A12A]  ;|
$9B:B563 8F EA C1 7E STA $7EC1EA[$7E:C1EA]  ;|
$9B:B567 BD 0C 00    LDA $000C,x[$9B:A12C]  ;|
$9B:B56A 8F EC C1 7E STA $7EC1EC[$7E:C1EC]  ;|
$9B:B56E BD 0E 00    LDA $000E,x[$9B:A12E]  ;|
$9B:B571 8F EE C1 7E STA $7EC1EE[$7E:C1EE]  ;} Sprite palette 7 = 20h bytes from $A120
$9B:B575 BD 10 00    LDA $0010,x[$9B:A130]  ;|
$9B:B578 8F F0 C1 7E STA $7EC1F0[$7E:C1F0]  ;|
$9B:B57C BD 12 00    LDA $0012,x[$9B:A132]  ;|
$9B:B57F 8F F2 C1 7E STA $7EC1F2[$7E:C1F2]  ;|
$9B:B583 BD 14 00    LDA $0014,x[$9B:A134]  ;|
$9B:B586 8F F4 C1 7E STA $7EC1F4[$7E:C1F4]  ;|
$9B:B58A BD 16 00    LDA $0016,x[$9B:A136]  ;|
$9B:B58D 8F F6 C1 7E STA $7EC1F6[$7E:C1F6]  ;|
$9B:B591 BD 18 00    LDA $0018,x[$9B:A138]  ;|
$9B:B594 8F F8 C1 7E STA $7EC1F8[$7E:C1F8]  ;|
$9B:B598 BD 1A 00    LDA $001A,x[$9B:A13A]  ;|
$9B:B59B 8F FA C1 7E STA $7EC1FA[$7E:C1FA]  ;|
$9B:B59F BD 1C 00    LDA $001C,x[$9B:A13C]  ;|
$9B:B5A2 8F FC C1 7E STA $7EC1FC[$7E:C1FC]  ;|
$9B:B5A6 BD 1E 00    LDA $001E,x[$9B:A13E]  ;|
$9B:B5A9 8F FE C1 7E STA $7EC1FE[$7E:C1FE]  ;/
$9B:B5AD AB          PLB
$9B:B5AE A0 08 00    LDY #$0008             ; Y = 6
$9B:B5B1 20 D8 B6    JSR $B6D8  [$9B:B6D8]  ; Queue transfer of segment of Samus death sequence to VRAM
$9B:B5B4 AD 23 B8    LDA $B823  [$9B:B823]  ;\
$9B:B5B7 29 FF 00    AND #$00FF             ;} Death animation timer = 15h
$9B:B5BA 8D E2 0D    STA $0DE2  [$7E:0DE2]  ;/
$9B:B5BD 9C E4 0D    STZ $0DE4  [$7E:0DE4]  ; Death animation index = 0
$9B:B5C0 9C E6 0D    STZ $0DE6  [$7E:0DE6]  ; Death animation counter = 0
$9B:B5C3 20 58 B7    JSR $B758  [$9B:B758]  ; Handle death sequence suit explosion
$9B:B5C6 28          PLP
$9B:B5C7 60          RTS

$9B:B5C8             dw B7D3, B7E7, B7FB
}


;;; $B5CE: Write death animation sprite palettes ;;;
{
;; Parameters:
;;     X: Death animation palette table index
$9B:B5CE 08          PHP
$9B:B5CF C2 30       REP #$30
$9B:B5D1 AC 74 0A    LDY $0A74  [$7E:0A74]  ;\
$9B:B5D4 B9 D2 B6    LDA $B6D2,y[$9B:B6D2]  ;} $14 = [$B6D2 + [Samus suit palette index]]
$9B:B5D7 85 14       STA $14    [$7E:0014]  ;/
$9B:B5D9 BD 0F B8    LDA $B80F,x[$9B:B811]  ;\
$9B:B5DC 85 12       STA $12    [$7E:0012]  ;} $12 = [$B80F + [X]]
$9B:B5DE 8A          TXA                    ;\
$9B:B5DF 18          CLC                    ;|
$9B:B5E0 65 14       ADC $14    [$7E:0014]  ;|
$9B:B5E2 AA          TAX                    ;} X = [[$14] + [X]]
$9B:B5E3 BD 00 00    LDA $0000,x[$9B:B7D5]  ;|
$9B:B5E6 AA          TAX                    ;/
$9B:B5E7 8B          PHB
$9B:B5E8 F4 00 9B    PEA $9B00              ;\
$9B:B5EB AB          PLB                    ;} DB = $9B
$9B:B5EC AB          PLB                    ;/
$9B:B5ED BD 00 00    LDA $0000,x[$9B:9420]  ;\
$9B:B5F0 8F 80 C1 7E STA $7EC180[$7E:C180]  ;|
$9B:B5F4 BD 02 00    LDA $0002,x[$9B:9422]  ;|
$9B:B5F7 8F 82 C1 7E STA $7EC182[$7E:C182]  ;|
$9B:B5FB BD 04 00    LDA $0004,x[$9B:9424]  ;|
$9B:B5FE 8F 84 C1 7E STA $7EC184[$7E:C184]  ;|
$9B:B602 BD 06 00    LDA $0006,x[$9B:9426]  ;|
$9B:B605 8F 86 C1 7E STA $7EC186[$7E:C186]  ;|
$9B:B609 BD 08 00    LDA $0008,x[$9B:9428]  ;|
$9B:B60C 8F 88 C1 7E STA $7EC188[$7E:C188]  ;|
$9B:B610 BD 0A 00    LDA $000A,x[$9B:942A]  ;|
$9B:B613 8F 8A C1 7E STA $7EC18A[$7E:C18A]  ;|
$9B:B617 BD 0C 00    LDA $000C,x[$9B:942C]  ;|
$9B:B61A 8F 8C C1 7E STA $7EC18C[$7E:C18C]  ;|
$9B:B61E BD 0E 00    LDA $000E,x[$9B:942E]  ;|
$9B:B621 8F 8E C1 7E STA $7EC18E[$7E:C18E]  ;|
$9B:B625 BD 10 00    LDA $0010,x[$9B:9430]  ;} Sprite palette 4 = 20h bytes from [X]
$9B:B628 8F 90 C1 7E STA $7EC190[$7E:C190]  ;|
$9B:B62C BD 12 00    LDA $0012,x[$9B:9432]  ;|
$9B:B62F 8F 92 C1 7E STA $7EC192[$7E:C192]  ;|
$9B:B633 BD 14 00    LDA $0014,x[$9B:9434]  ;|
$9B:B636 8F 94 C1 7E STA $7EC194[$7E:C194]  ;|
$9B:B63A BD 16 00    LDA $0016,x[$9B:9436]  ;|
$9B:B63D 8F 96 C1 7E STA $7EC196[$7E:C196]  ;|
$9B:B641 BD 18 00    LDA $0018,x[$9B:9438]  ;|
$9B:B644 8F 98 C1 7E STA $7EC198[$7E:C198]  ;|
$9B:B648 BD 1A 00    LDA $001A,x[$9B:943A]  ;|
$9B:B64B 8F 9A C1 7E STA $7EC19A[$7E:C19A]  ;|
$9B:B64F BD 1C 00    LDA $001C,x[$9B:943C]  ;|
$9B:B652 8F 9C C1 7E STA $7EC19C[$7E:C19C]  ;|
$9B:B656 BD 1E 00    LDA $001E,x[$9B:943E]  ;|
$9B:B659 8F 9E C1 7E STA $7EC19E[$7E:C19E]  ;/
$9B:B65D A6 12       LDX $12    [$7E:0012]  ;\
$9B:B65F BD 00 00    LDA $0000,x[$9B:A120]  ;|
$9B:B662 8F E0 C1 7E STA $7EC1E0[$7E:C1E0]  ;|
$9B:B666 BD 02 00    LDA $0002,x[$9B:A122]  ;|
$9B:B669 8F E2 C1 7E STA $7EC1E2[$7E:C1E2]  ;|
$9B:B66D BD 04 00    LDA $0004,x[$9B:A124]  ;|
$9B:B670 8F E4 C1 7E STA $7EC1E4[$7E:C1E4]  ;|
$9B:B674 BD 06 00    LDA $0006,x[$9B:A126]  ;|
$9B:B677 8F E6 C1 7E STA $7EC1E6[$7E:C1E6]  ;|
$9B:B67B BD 08 00    LDA $0008,x[$9B:A128]  ;|
$9B:B67E 8F E8 C1 7E STA $7EC1E8[$7E:C1E8]  ;|
$9B:B682 BD 0A 00    LDA $000A,x[$9B:A12A]  ;|
$9B:B685 8F EA C1 7E STA $7EC1EA[$7E:C1EA]  ;|
$9B:B689 BD 0C 00    LDA $000C,x[$9B:A12C]  ;|
$9B:B68C 8F EC C1 7E STA $7EC1EC[$7E:C1EC]  ;|
$9B:B690 BD 0E 00    LDA $000E,x[$9B:A12E]  ;|
$9B:B693 8F EE C1 7E STA $7EC1EE[$7E:C1EE]  ;} Sprite palette 7 = 20h bytes from [$12]
$9B:B697 BD 10 00    LDA $0010,x[$9B:A130]  ;|
$9B:B69A 8F F0 C1 7E STA $7EC1F0[$7E:C1F0]  ;|
$9B:B69E BD 12 00    LDA $0012,x[$9B:A132]  ;|
$9B:B6A1 8F F2 C1 7E STA $7EC1F2[$7E:C1F2]  ;|
$9B:B6A5 BD 14 00    LDA $0014,x[$9B:A134]  ;|
$9B:B6A8 8F F4 C1 7E STA $7EC1F4[$7E:C1F4]  ;|
$9B:B6AC BD 16 00    LDA $0016,x[$9B:A136]  ;|
$9B:B6AF 8F F6 C1 7E STA $7EC1F6[$7E:C1F6]  ;|
$9B:B6B3 BD 18 00    LDA $0018,x[$9B:A138]  ;|
$9B:B6B6 8F F8 C1 7E STA $7EC1F8[$7E:C1F8]  ;|
$9B:B6BA BD 1A 00    LDA $001A,x[$9B:A13A]  ;|
$9B:B6BD 8F FA C1 7E STA $7EC1FA[$7E:C1FA]  ;|
$9B:B6C1 BD 1C 00    LDA $001C,x[$9B:A13C]  ;|
$9B:B6C4 8F FC C1 7E STA $7EC1FC[$7E:C1FC]  ;|
$9B:B6C8 BD 1E 00    LDA $001E,x[$9B:A13E]  ;|
$9B:B6CB 8F FE C1 7E STA $7EC1FE[$7E:C1FE]  ;/
$9B:B6CF AB          PLB
$9B:B6D0 28          PLP
$9B:B6D1 60          RTS

$9B:B6D2             dw B7D3, B7E7, B7FB
}


;;; $B6D8: Queue transfer of segment of Samus death sequence to VRAM ;;;
{
;; Parameters:
;;     Y: Samus death sequence segment index
$9B:B6D8 08          PHP
$9B:B6D9 C2 30       REP #$30
$9B:B6DB AE 30 03    LDX $0330  [$7E:0330]  ;\
$9B:B6DE A9 00 04    LDA #$0400             ;|
$9B:B6E1 95 D0       STA $D0,x  [$7E:00D0]  ;|
$9B:B6E3 E8          INX                    ;|
$9B:B6E4 E8          INX                    ;|
$9B:B6E5 B9 BF B7    LDA $B7BF,y[$9B:B7BF]  ;|
$9B:B6E8 95 D0       STA $D0,x  [$7E:00D2]  ;|
$9B:B6EA E8          INX                    ;|
$9B:B6EB E8          INX                    ;|
$9B:B6EC E2 20       SEP #$20               ;} Queue transfer of 400h bytes from $9B:0000 + [$B7BF + [Y]] to VRAM [$B7C9 + [Y]]
$9B:B6EE A9 9B       LDA #$9B               ;|
$9B:B6F0 95 D0       STA $D0,x  [$7E:00D4]  ;|
$9B:B6F2 C2 20       REP #$20               ;|
$9B:B6F4 E8          INX                    ;|
$9B:B6F5 B9 C9 B7    LDA $B7C9,y[$9B:B7C9]  ;|
$9B:B6F8 95 D0       STA $D0,x  [$7E:00D5]  ;|
$9B:B6FA E8          INX                    ;|
$9B:B6FB E8          INX                    ;|
$9B:B6FC 8E 30 03    STX $0330  [$7E:0330]  ;/
$9B:B6FF 28          PLP
$9B:B700 60          RTS
}


;;; $B701: Handle death sequence suit explosion white out ;;;
{
;; Returns:
;;     A: 1 if finished, 0 otherwise
$9B:B701 08          PHP
$9B:B702 8B          PHB
$9B:B703 4B          PHK                    ;\
$9B:B704 AB          PLB                    ;} DB = $9B
$9B:B705 C2 30       REP #$30
$9B:B707 20 10 B7    JSR $B710  [$9B:B710]  ; Handle death sequence white out
$9B:B70A 20 58 B7    JSR $B758  [$9B:B758]  ; Handle death sequence suit explosion
$9B:B70D AB          PLB
$9B:B70E 28          PLP
$9B:B70F 6B          RTL
}


;;; $B710: Handle death sequence white out ;;;
{
$9B:B710 08          PHP
$9B:B711 C2 30       REP #$30
$9B:B713 A9 00 7E    LDA #$7E00             ;\
$9B:B716 85 01       STA $01    [$7E:0001]  ;} $02 = $7E
$9B:B718 AD EC 0D    LDA $0DEC  [$7E:0DEC]  ;\
$9B:B71B D0 39       BNE $39    [$B756]     ;} If debug death animation enabled: return
$9B:B71D AD E4 0D    LDA $0DE4  [$7E:0DE4]  ;\
$9B:B720 F0 34       BEQ $34    [$B756]     ;} If [death animation index] = 0: return
$9B:B722 AD E6 0D    LDA $0DE6  [$7E:0DE6]  ;\
$9B:B725 0A          ASL A                  ;} X = [death animation counter] * 2
$9B:B726 AA          TAX                    ;/
$9B:B727 A9 00 C0    LDA #$C000             ;\
$9B:B72A 85 00       STA $00    [$7E:0000]  ;|
$9B:B72C A0 00 00    LDY #$0000             ;|
                                            ;|
$9B:B72F BD 35 B8    LDA $B835,x[$9B:B835]  ;|
$9B:B732 97 00       STA [$00],y[$7E:C000]  ;} BG1/2 palette 0..3 = [$B835 + [X]]
$9B:B734 C8          INY                    ;|
$9B:B735 C8          INY                    ;|
$9B:B736 C0 80 01    CPY #$0180             ;|
$9B:B739 30 F4       BMI $F4    [$B72F]     ;/
$9B:B73B A0 A0 01    LDY #$01A0             ;\
                                            ;|
$9B:B73E BD 35 B8    LDA $B835,x[$9B:B835]  ;|
$9B:B741 97 00       STA [$00],y[$7E:C1A0]  ;|
$9B:B743 C8          INY                    ;} BG1/2 palette 5..6 = [$B835 + [X]]
$9B:B744 C8          INY                    ;|
$9B:B745 C0 E0 01    CPY #$01E0             ;|
$9B:B748 30 F4       BMI $F4    [$B73E]     ;/
$9B:B74A AD E6 0D    LDA $0DE6  [$7E:0DE6]  ;\
$9B:B74D C9 14 00    CMP #$0014             ;|
$9B:B750 10 04       BPL $04    [$B756]     ;} Death animation counter = min(14h, [death animation counter] + 1)
$9B:B752 1A          INC A                  ;|
$9B:B753 8D E6 0D    STA $0DE6  [$7E:0DE6]  ;/

$9B:B756 28          PLP
$9B:B757 60          RTS
}


;;; $B758: Handle death sequence suit explosion ;;;
{
;; Returns:
;;     A: 1 if suit explosion has ended, 0 otherwise
$9B:B758 08          PHP
$9B:B759 C2 30       REP #$30
$9B:B75B AD E2 0D    LDA $0DE2  [$7E:0DE2]  ;\
$9B:B75E 3A          DEC A                  ;} Decrement death animation timer
$9B:B75F 8D E2 0D    STA $0DE2  [$7E:0DE2]  ;/
$9B:B762 F0 02       BEQ $02    [$B766]     ;\
$9B:B764 10 50       BPL $50    [$B7B6]     ;} If [death animation timer] > 0: go to BRANCH_NOT_FINISHED

$9B:B766 AD E4 0D    LDA $0DE4  [$7E:0DE4]  ;\
$9B:B769 1A          INC A                  ;} Increment death animation index
$9B:B76A 8D E4 0D    STA $0DE4  [$7E:0DE4]  ;/
$9B:B76D C9 09 00    CMP #$0009             ;\
$9B:B770 30 11       BMI $11    [$B783]     ;} If [death animation index] >= 9:
$9B:B772 A9 15 00    LDA #$0015             ;\
$9B:B775 8D E6 0D    STA $0DE6  [$7E:0DE6]  ;} Death animation counter = 15h
$9B:B778 20 10 B7    JSR $B710  [$9B:B710]  ; Handle death sequence white out
$9B:B77B 9C EC 0D    STZ $0DEC  [$7E:0DEC]  ; Debug death animation flag = 0
$9B:B77E A9 01 00    LDA #$0001             ;\
$9B:B781 80 3A       BRA $3A    [$B7BD]     ;} Return A = 1

$9B:B783 AD EC 0D    LDA $0DEC  [$7E:0DEC]  ;\
$9B:B786 F0 15       BEQ $15    [$B79D]     ;} If debug death animation enabled:
$9B:B788 AD E4 0D    LDA $0DE4  [$7E:0DE4]  ;\
$9B:B78B C9 02 00    CMP #$0002             ;} If [death animation index] >= 2:
$9B:B78E 30 0D       BMI $0D    [$B79D]     ;/
$9B:B790 0A          ASL A                  ;\
$9B:B791 AA          TAX                    ;|
$9B:B792 BD 23 B8    LDA $B823,x            ;} Death animation timer = [$B823 + [death animation index] * 2]
$9B:B795 29 FF 00    AND #$00FF             ;|
$9B:B798 8D E2 0D    STA $0DE2  [$7E:0DE2]  ;/
$9B:B79B 80 19       BRA $19    [$B7B6]     ; Go to BRANCH_NOT_FINISHED

$9B:B79D AD E4 0D    LDA $0DE4  [$7E:0DE4]  ;\
$9B:B7A0 0A          ASL A                  ;|
$9B:B7A1 AA          TAX                    ;|
$9B:B7A2 BD 23 B8    LDA $B823,x[$9B:B825]  ;} Death animation timer = [$B823 + [death animation index] * 2]
$9B:B7A5 29 FF 00    AND #$00FF             ;|
$9B:B7A8 8D E2 0D    STA $0DE2  [$7E:0DE2]  ;/
$9B:B7AB BD 24 B8    LDA $B824,x[$9B:B826]  ;\
$9B:B7AE 29 FF 00    AND #$00FF             ;|
$9B:B7B1 0A          ASL A                  ;} X = [$B823 + [death animation index] * 2 + 1] * 2
$9B:B7B2 AA          TAX                    ;/
$9B:B7B3 20 CE B5    JSR $B5CE  [$9B:B5CE]  ; Write death animation palette

; BRANCH_NOT_FINISHED
$9B:B7B6 22 BE ED 92 JSL $92EDBE[$92:EDBE]  ; Draw Samus' suit exploding
$9B:B7BA A9 00 00    LDA #$0000             ; Return A = 0

$9B:B7BD 28          PLP
$9B:B7BE 60          RTS
}


;;; $B7BF: Samus death sequence segment source pointers ;;;
{
$9B:B7BF             dw 8400, 8800, 8C00, 9000, 8000
}


;;; $B7C9: Samus death sequence segment destination pointers ;;;
{
$9B:B7C9             dw 6200, 6400, 6600, 6800, 6000
}


;;; $B7D3: Death sequence palette pointers - suit ;;;
{
$9B:B7D3             dw 9820, 9420, 9840, 9860, 9880, 98A0, 98C0, 98E0, 9900, A220 ; Power suit
$9B:B7E7             dw 9920, 9420, 9940, 9960, 9980, 99A0, 99C0, 99E0, 9A00, A220 ; Varia suit
$9B:B7FB             dw 9A20, 9420, 9A40, 9A60, 9A80, 9AA0, 9AC0, 9AE0, 9B00, A220 ; Gravity suit
}


;;; $B80F: Death sequence palette pointers - suitless Samus ;;;
{
$9B:B80F             dw A120, A120, A140, A160, A180, A1A0, A1C0, A1E0, A200, A220
}


;;; $B823: Death sequence suit explosion palette index table ;;;
{
; Used by $B758

;                        ____ Timer
;                       |   _ Palette table index (for $B7D3 and $B80F)
;                       |  |
$9B:B823             db 15,00,
                        06,02,
                        03,03,
                        04,04,
                        05,05,
                        05,06,
                        06,07,
                        06,08,
                        50,09
}


;;; $B835: Shades of white ;;;
{
$9B:B835             dw 0421, 0C63, 14A5, 1CE7, 2529, 2D6B, 35AD, 4210, 4A52, 4E73, 5294, 56B5, 5AD6, 5EF7, 6318, 6739,
                        6B5A, 6F7B, 739C, 77BD, 7BDE, 7FFF
}
}


;;; $B861..CBFA: Grapple beam ;;;
{
;;; $B861: Cancel grapple beam if in incompatible pose ;;;
{
$9B:B861 AD 1F 0A    LDA $0A1F  [$7E:0A1F]  ;\
$9B:B864 29 FF 00    AND #$00FF             ;|
$9B:B867 AA          TAX                    ;|
$9B:B868 BD B8 B8    LDA $B8B8,x[$9B:B8B8]  ;} If [$B8B8 + [Samus movement type]] = 0: go to BRANCH_GRAPPLE_ALLOWED
$9B:B86B 29 FF 00    AND #$00FF             ;|
$9B:B86E F0 0F       BEQ $0F    [$B87F]     ;/

; BRANCH_CANCEL_GRAPPLE
$9B:B870 AD 32 0D    LDA $0D32  [$7E:0D32]  ;\
$9B:B873 C9 F0 C4    CMP #$C4F0             ;} If [grapple beam function] != inactive:
$9B:B876 F0 06       BEQ $06    [$B87E]     ;/
$9B:B878 A9 56 C8    LDA #$C856             ;\
$9B:B87B 8D 32 0D    STA $0D32  [$7E:0D32]  ;} Grapple beam function = cancel

$9B:B87E 60          RTS                    ; Return

; BRANCH_GRAPPLE_ALLOWED
$9B:B87F AD 32 0D    LDA $0D32  [$7E:0D32]  ;\
$9B:B882 C9 F0 C4    CMP #$C4F0             ;} If [grapple beam function] = inactive: return
$9B:B885 F0 F7       BEQ $F7    [$B87E]     ;/
$9B:B887 C9 7E C7    CMP #$C77E             ;\
$9B:B88A 10 F2       BPL $F2    [$B87E]     ;} If [grapple beam function] is not fire or firing: return
$9B:B88C AD 1C 0A    LDA $0A1C  [$7E:0A1C]  ;\
$9B:B88F 0A          ASL A                  ;|
$9B:B890 0A          ASL A                  ;|
$9B:B891 0A          ASL A                  ;|
$9B:B892 AA          TAX                    ;} If (direction shots are fired) & F0h != 0: go to BRANCH_CANCEL_GRAPPLE
$9B:B893 BF 2C B6 91 LDA $91B62C,x[$91:B974];|
$9B:B897 29 FF 00    AND #$00FF             ;|
$9B:B89A 89 F0 00    BIT #$00F0             ;|
$9B:B89D D0 D1       BNE $D1    [$B870]     ;/
$9B:B89F CD 34 0D    CMP $0D34  [$7E:0D34]  ;\
$9B:B8A2 D0 01       BNE $01    [$B8A5]     ;} If (direction shots are fired) & F0h = [direction grapple is fired]:
$9B:B8A4 60          RTS                    ; Return

$9B:B8A5 AD F6 0C    LDA $0CF6  [$7E:0CF6]  ;\
$9B:B8A8 F0 C6       BEQ $C6    [$B870]     ;} If [grapple pose change auto-fire timer] = 0: go to BRANCH_CANCEL_GRAPPLE
$9B:B8AA A9 07 00    LDA #$0007             ;\
$9B:B8AD 22 49 90 80 JSL $809049[$80:9049]  ;} Queue sound 7, sound library 1, max queued sounds allowed = 6 (grapple end)
$9B:B8B1 A9 1E C5    LDA #$C51E             ;\
$9B:B8B4 8D 32 0D    STA $0D32  [$7E:0D32]  ;} Grapple function = fire / go to cancel
$9B:B8B7 60          RTS

; Indexed by Samus movement type, 1 = cancel grapple beam
$9B:B8B8             db 00, ;  0: Standing
                        00, ;  1: Running
                        00, ;  2: Normal jumping
                        01, ; *3: Spin jumping
                        01, ; *4: Morph ball - on ground
                        00, ;  5: Crouching
                        00, ;  6: Falling
                        01, ; *7: Unused
                        01, ; *8: Morph ball - falling
                        01, ; *9: Unused
                        01, ; *Ah: Knockback / crystal flash ending
                        00, ;  Bh: Unused
                        00, ;  Ch: Unused
                        01, ; *Dh: Unused
                        01, ; *Eh: Turning around - on ground
                        01, ; *Fh: Crouching/standing/morphing/unmorphing transition
                        00, ;  10h: Moonwalking
                        01, ; *11h: Spring ball - on ground
                        01, ; *12h: Spring ball - in air
                        01, ; *13h: Spring ball - falling
                        01, ; *14h: Wall jumping
                        00, ;  15h: Ran into a wall
                        00, ;  16h: Grappling
                        01, ; *17h: Turning around - jumping
                        01, ; *18h: Turning around - falling
                        01, ; *19h: Damage boost
                        00, ;  1Ah: Grabbed by Draygon
                        01  ; *1Bh: Shinespark / crystal flash / drained by metroid / damaged by MB's attacks
}


;;; $B8D4: RTS ;;;
{
; Looks like RTS'd out code
$9B:B8D4 60          RTS

; Load direction grapple is fired from pose definitions
$9B:B8D5 AD 1C 0A    LDA $0A1C  [$7E:0A1C]  ;\
$9B:B8D8 0A          ASL A                  ;|
$9B:B8D9 0A          ASL A                  ;|
$9B:B8DA 0A          ASL A                  ;|
$9B:B8DB AA          TAX                    ;} If [$91:B62C + [Samus pose] * 8] & F0h != 0: return
$9B:B8DC BF 2C B6 91 LDA $91B62C,x          ;|
$9B:B8E0 29 FF 00    AND #$00FF             ;|
$9B:B8E3 89 F0 00    BIT #$00F0             ;|
$9B:B8E6 D0 08       BNE $08    [$B8F0]     ;/
$9B:B8E8 CD 34 0D    CMP $0D34  [$7E:0D34]  ;\
$9B:B8EB F0 03       BEQ $03    [$B8F0]     ;} Direction grapple is fired = [$91:B62C + [Samus pose] * 8]
$9B:B8ED 8D 34 0D    STA $0D34  [$7E:0D34]  ;/

$9B:B8F0 60          RTS
}


;;; $B8F1: Check if grapple is connected to block ;;;
{
;; Returns:
;;     Carry: Set if grapple is connected, clear otherwise
$9B:B8F1 9C 22 0D    STZ $0D22  [$7E:0D22]  ; Grapple beam extension X velocity = 0
$9B:B8F4 9C 24 0D    STZ $0D24  [$7E:0D24]  ; Grapple beam extension Y velocity = 0
$9B:B8F7 22 1F A9 94 JSL $94A91F[$94:A91F]  ; Block grapple reaction
$9B:B8FB 90 08       BCC $08    [$B905]     ; If collision: <-- Missing overflow flag check?
$9B:B8FD A9 01 00    LDA #$0001             ;\
$9B:B900 8D 64 0A    STA $0A64  [$7E:0A64]  ;} Set grapple connected flag
$9B:B903 38          SEC                    ;\
$9B:B904 60          RTS                    ;} Return carry set

$9B:B905 18          CLC                    ;\
$9B:B906 60          RTS                    ;} Return carry clear
}


;;; $B907..7B: Process enemy / grapple beam collision result ;;;
{
;;; $B907: Process enemy / grapple beam collision result ;;;
{
;; Parameters:
;;     A: Grapple reaction index
;;     {
;;         0: Otherwise
;;         1: Enemy grapple AI = $8005 - Samus latches on
;;         2: Enemy grapple AI = $800A - kill enemy
;;         3: Enemy grapple AI = $800F - cancel grapple beam
;;         4: Enemy grapple AI = $8014 - Samus latches on - no invincibility
;;         5: Enemy grapple AI = $8019 - Samus latches on - paralyse enemy
;;         6: Enemy grapple AI = $801E - hurt Samus
;;     }
;;     $12: Collided enemy ID
;; Returns:
;;     A: If carry is set: non-zero to cancel grapple beam
;;     Carry: Set if enemy collision occurred
$9B:B907 0A          ASL A                  ;\
$9B:B908 AA          TAX                    ;} Execute [$B90C + [A] * 2]
$9B:B909 7C 0C B9    JMP ($B90C,x)[$9B:B91A];/

$9B:B90C             dw B91A, B91C, B921, B923, B928, B92D, B932
}


;;; $B91A: Process enemy / grapple beam collision result - grapple reaction index = 0 (default) - clear carry ;;;
{
$9B:B91A 18          CLC
$9B:B91B 60          RTS
}


;;; $B91C: Process enemy / grapple beam collision result - grapple reaction index = 1 (Samus latches on) - set carry, A = 0 ;;;
{
$9B:B91C A9 00 00    LDA #$0000
$9B:B91F 38          SEC
$9B:B920 60          RTS
}


;;; $B921: Process enemy / grapple beam collision result - grapple reaction index = 2 (kill enemy) - clear carry ;;;
{
$9B:B921 18          CLC
$9B:B922 60          RTS
}


;;; $B923: Process enemy / grapple beam collision result - grapple reaction index = 3 (cancel grapple beam) - set carry, A = 1 ;;;
{
$9B:B923 A9 01 00    LDA #$0001
$9B:B926 38          SEC
$9B:B927 60          RTS
}


;;; $B928: Process enemy / grapple beam collision result - grapple reaction index = 4 (Samus latches on - no invincibility) - set carry, A = 0 ;;;
{
$9B:B928 A9 00 00    LDA #$0000
$9B:B92B 38          SEC
$9B:B92C 60          RTS
}


;;; $B92D: Process enemy / grapple beam collision result - grapple reaction index = 5 (Samus latches on - paralyse enemy) - set carry, A = 0 ;;;
{
$9B:B92D A9 00 00    LDA #$0000
$9B:B930 38          SEC
$9B:B931 60          RTS
}


;;; $B932: Process enemy / grapple beam collision result - grapple reaction index = 6 (hurt Samus) - hurt Samus, set carry, A = 1 ;;;
{
$9B:B932 A6 12       LDX $12    [$7E:0012]  ;\
$9B:B934 BF 06 00 A0 LDA $A00006,x          ;} $12 = (enemy damage)
$9B:B938 85 12       STA $12    [$7E:0012]  ;/
$9B:B93A AD A2 09    LDA $09A2  [$7E:09A2]  ;\
$9B:B93D 89 20 00    BIT #$0020             ;} If gravity suit equipped: go to BRANCH_GRAVITY_SUIT
$9B:B940 D0 09       BNE $09    [$B94B]     ;/
$9B:B942 4A          LSR A                  ;\
$9B:B943 90 02       BCC $02    [$B947]     ;} If varia suit equipped:
$9B:B945 46 12       LSR $12    [$7E:0012]  ; $12 /= 2

$9B:B947 A5 12       LDA $12    [$7E:0012]
$9B:B949 80 06       BRA $06    [$B951]     ; Go to BRANCH_MERGE

; BRANCH_GRAVITY_SUIT
$9B:B94B 46 12       LSR $12    [$7E:0012]  ;\
$9B:B94D 46 12       LSR $12    [$7E:0012]  ;} $12 /= 4
$9B:B94F A5 12       LDA $12    [$7E:0012]

; BRANCH_MERGE
$9B:B951 22 51 DF 91 JSL $91DF51[$91:DF51]  ; Deal [$12] damage to Samus
$9B:B955 A9 60 00    LDA #$0060             ;\
$9B:B958 8D A8 18    STA $18A8  [$7E:18A8]  ;} Samus invincibility timer = 60h
$9B:B95B A9 05 00    LDA #$0005             ;\
$9B:B95E 8D AA 18    STA $18AA  [$7E:18AA]  ;} Samus knockback timer = 5
$9B:B961 AD 1E 0A    LDA $0A1E  [$7E:0A1E]  ;\
$9B:B964 29 FF 00    AND #$00FF             ;|
$9B:B967 C9 04 00    CMP #$0004             ;} If [Samus pose X direction] = right:
$9B:B96A F0 05       BEQ $05    [$B971]     ;/
$9B:B96C 9C 54 0A    STZ $0A54  [$7E:0A54]  ; Knockback X direction = left
$9B:B96F 80 06       BRA $06    [$B977]

$9B:B971 A9 01 00    LDA #$0001             ;\ Else ([Samus pose X direction] != right):
$9B:B974 8D 54 0A    STA $0A54  [$7E:0A54]  ;} Knockback X direction = right

$9B:B977 A9 01 00    LDA #$0001             ; A = 1
$9B:B97A 38          SEC                    ; Set carry
$9B:B97B 60          RTS
}
}


;;; $B97C..BAD4: Handle connecting grapple ;;;
{
;;; $B97C: Handle connecting grapple ;;;
{
$9B:B97C AD 1F 0A    LDA $0A1F  [$7E:0A1F]  ;\
$9B:B97F 29 FF 00    AND #$00FF             ;|
$9B:B982 C9 1A 00    CMP #$001A             ;} If [Samus movement type] = grabbed by Draygon:
$9B:B985 D0 0A       BNE $0A    [$B991]     ;/
$9B:B987 A9 7E C7    LDA #$C77E             ;\
$9B:B98A 8D 32 0D    STA $0D32  [$7E:0D32]  ;} Grapple beam function = $C77E (connected - locked in place)
$9B:B98D 9C 00 0D    STZ $0D00  [$7E:0D00]  ; Grapple beam length delta = 0
$9B:B990 60          RTS                    ; Return

$9B:B991 AD 34 0D    LDA $0D34  [$7E:0D34]  ;\
$9B:B994 0A          ASL A                  ;|
$9B:B995 0A          ASL A                  ;} X = [direction grapple is fired] * 4
$9B:B996 AA          TAX                    ;/
$9B:B997 AD 2E 0B    LDA $0B2E  [$7E:0B2E]  ;\
$9B:B99A D0 2E       BNE $2E    [$B9CA]     ;|
$9B:B99C AD 2C 0B    LDA $0B2C  [$7E:0B2C]  ;} If [Samus Y speed] != 0: go to BRANCH_MOVING_VERTICALLY
$9B:B99F D0 29       BNE $29    [$B9CA]     ;/
$9B:B9A1 AD 1F 0A    LDA $0A1F  [$7E:0A1F]  ;\
$9B:B9A4 29 FF 00    AND #$00FF             ;|
$9B:B9A7 C9 05 00    CMP #$0005             ;} If [Samus movement type] = crouching: go to BRANCH_CROUCHING
$9B:B9AA F0 0F       BEQ $0F    [$B9BB]     ;/
$9B:B9AC BD C6 C3    LDA $C3C6,x[$9B:C3CA]  ;\
$9B:B9AF 8D 32 0D    STA $0D32  [$7E:0D32]  ;} Grapple beam function = [$C3C6 + [X]]
$9B:B9B2 BD C8 C3    LDA $C3C8,x[$9B:C3CC]  ;\
$9B:B9B5 8D 82 0D    STA $0D82  [$7E:0D82]  ;} Go to [$C3C6 + [X] + 2]
$9B:B9B8 6C 82 0D    JMP ($0D82)[$9B:B9D9]  ;/

; BRANCH_CROUCHING
$9B:B9BB BD 16 C4    LDA $C416,x            ;\
$9B:B9BE 8D 32 0D    STA $0D32  [$7E:0D32]  ;} Grapple beam function = [$C416 + [X]]
$9B:B9C1 BD 18 C4    LDA $C418,x            ;\
$9B:B9C4 8D 82 0D    STA $0D82  [$7E:0D82]  ;} Go to [$C416 + [X] + 2]
$9B:B9C7 6C 82 0D    JMP ($0D82)            ;/

; BRANCH_MOVING_VERTICALLY
$9B:B9CA BD EE C3    LDA $C3EE,x[$9B:C3F2]  ;\
$9B:B9CD 8D 32 0D    STA $0D32  [$7E:0D32]  ;} Grapple beam function = [$C3EE + [X]]
$9B:B9D0 BD F0 C3    LDA $C3F0,x[$9B:C3F4]  ;\
$9B:B9D3 8D 82 0D    STA $0D82  [$7E:0D82]  ;} Go to [$C3EE + [X] + 2]
$9B:B9D6 6C 82 0D    JMP ($0D82)[$9B:B9D9]  ;/
}


;;; $B9D9: Handle connecting grapple - swinging clockwise ;;;
{
$9B:B9D9 A9 B2 00    LDA #$00B2             ;\
$9B:B9DC 8D 2A 0A    STA $0A2A  [$7E:0A2A]  ;} Special prospective pose = facing clockwise - grapple swinging
$9B:B9DF 4C 61 BA    JMP $BA61  [$9B:BA61]  ; Go to handle connecting grapple - swinging
}


;;; $B9E2: Handle connecting grapple - swinging anticlockwise ;;;
{
$9B:B9E2 A9 B3 00    LDA #$00B3             ;\
$9B:B9E5 8D 2A 0A    STA $0A2A  [$7E:0A2A]  ;} Special prospective pose = facing anticlockwise - grapple swinging
$9B:B9E8 80 77       BRA $77    [$BA61]     ; Go to handle connecting grapple - swinging
}


;;; $B9EA: Handle connecting grapple - standing - aiming right ;;;
{
$9B:B9EA A9 A8 00    LDA #$00A8             ;\
$9B:B9ED 8D 2A 0A    STA $0A2A  [$7E:0A2A]  ;} Special prospective pose = facing right - grappling
$9B:B9F0 4C 9B BA    JMP $BA9B  [$9B:BA9B]  ; Go to handle connecting grapple - stuck in place
}


;;; $B9F3: Handle connecting grapple - standing - aiming down-right ;;;
{
$9B:B9F3 A9 AA 00    LDA #$00AA             ;\
$9B:B9F6 8D 2A 0A    STA $0A2A  [$7E:0A2A]  ;} Special prospective pose = facing right - grappling - aiming down-right
$9B:B9F9 4C 9B BA    JMP $BA9B  [$9B:BA9B]  ; Go to handle connecting grapple - stuck in place
}


;;; $B9FC: Handle connecting grapple - standing - aiming down-left ;;;
{
$9B:B9FC A9 AB 00    LDA #$00AB             ;\
$9B:B9FF 8D 2A 0A    STA $0A2A  [$7E:0A2A]  ;} Special prospective pose = facing left - grappling - aiming down-right
$9B:BA02 4C 9B BA    JMP $BA9B  [$9B:BA9B]  ; Go to handle connecting grapple - stuck in place
}


;;; $BA05: Handle connecting grapple - standing - aiming left ;;;
{
$9B:BA05 A9 A9 00    LDA #$00A9             ;\
$9B:BA08 8D 2A 0A    STA $0A2A  [$7E:0A2A]  ;} Special prospective pose = facing left - grappling
$9B:BA0B 4C 9B BA    JMP $BA9B  [$9B:BA9B]  ; Go to handle connecting grapple - stuck in place
}


;;; $BA0E: Handle connecting grapple - crouching - aiming right ;;;
{
$9B:BA0E A9 B4 00    LDA #$00B4             ;\
$9B:BA11 8D 2A 0A    STA $0A2A  [$7E:0A2A]  ;} Special prospective pose = facing right - grappling - crouching
$9B:BA14 4C 9B BA    JMP $BA9B  [$9B:BA9B]  ; Go to handle connecting grapple - stuck in place
}


;;; $BA17: Handle connecting grapple - crouching - aiming down-right ;;;
{
$9B:BA17 A9 B6 00    LDA #$00B6             ;\
$9B:BA1A 8D 2A 0A    STA $0A2A  [$7E:0A2A]  ;} Special prospective pose = facing right - grappling - crouching - aiming down-right
$9B:BA1D 4C 9B BA    JMP $BA9B  [$9B:BA9B]  ; Go to handle connecting grapple - stuck in place
}


;;; $BA20: Handle connecting grapple - crouching - aiming down-left ;;;
{
$9B:BA20 A9 B7 00    LDA #$00B7             ;\
$9B:BA23 8D 2A 0A    STA $0A2A  [$7E:0A2A]  ;} Special prospective pose = facing left - grappling - crouching - aiming down-right
$9B:BA26 4C 9B BA    JMP $BA9B  [$9B:BA9B]  ; Go to handle connecting grapple - stuck in place
}


;;; $BA29: Handle connecting grapple - crouching - aiming left ;;;
{
$9B:BA29 A9 B5 00    LDA #$00B5             ;\
$9B:BA2C 8D 2A 0A    STA $0A2A  [$7E:0A2A]  ;} Special prospective pose = facing left - grappling - crouching
$9B:BA2F 80 6A       BRA $6A    [$BA9B]     ; Go to handle connecting grapple - stuck in place
}


;;; $BA31: Unused. Handle connecting grapple - in air - aiming right ;;;
{
$9B:BA31 A9 AC 00    LDA #$00AC             ;\
$9B:BA34 8D 2A 0A    STA $0A2A  [$7E:0A2A]  ;} Special prospective pose = facing right - grappling - in air
$9B:BA37 80 62       BRA $62    [$BA9B]     ; Go to handle connecting grapple - stuck in place
}


;;; $BA39: Unused. Handle connecting grapple - in air - aiming down-right ;;;
{
$9B:BA39 A9 B0 00    LDA #$00B0             ;\
$9B:BA3C 8D 2A 0A    STA $0A2A  [$7E:0A2A]  ;} Special prospective pose = facing right - grappling - in air - aiming down-right
$9B:BA3F 80 5A       BRA $5A    [$BA9B]     ; Go to handle connecting grapple - stuck in place
}


;;; $BA41: Unused. Handle connecting grapple - in air - aiming down, facing right ;;;
{
$9B:BA41 A9 AE 00    LDA #$00AE             ;\
$9B:BA44 8D 2A 0A    STA $0A2A  [$7E:0A2A]  ;} Special prospective pose = facing right - grappling - in air - aiming down
$9B:BA47 80 52       BRA $52    [$BA9B]     ; Go to handle connecting grapple - stuck in place
}


;;; $BA49: Unused. Handle connecting grapple - in air - aiming down, facing left ;;;
{
$9B:BA49 A9 AF 00    LDA #$00AF             ;\
$9B:BA4C 8D 2A 0A    STA $0A2A  [$7E:0A2A]  ;} Special prospective pose = facing left - grappling - in air - aiming down
$9B:BA4F 80 4A       BRA $4A    [$BA9B]     ; Go to handle connecting grapple - stuck in place
}


;;; $BA51: Unused. Handle connecting grapple - in air - aiming down-left ;;;
{
$9B:BA51 A9 B1 00    LDA #$00B1             ;\
$9B:BA54 8D 2A 0A    STA $0A2A  [$7E:0A2A]  ;} Special prospective pose = facing left - grappling - in air - aiming down-right
$9B:BA57 80 42       BRA $42    [$BA9B]     ; Go to handle connecting grapple - stuck in place
}


;;; $BA59: Unused. Handle connecting grapple - in air - aiming left ;;;
{
$9B:BA59 A9 AD 00    LDA #$00AD             ;\
$9B:BA5C 8D 2A 0A    STA $0A2A  [$7E:0A2A]  ;} Special prospective pose = facing left - grappling - in air (unused)
$9B:BA5F 80 3A       BRA $3A    [$BA9B]     ; Go to handle connecting grapple - stuck in place
}


;;; $BA61: Handle connecting grapple - swinging ;;;
{
$9B:BA61 A9 09 00    LDA #$0009             ;\
$9B:BA64 8D 30 0A    STA $0A30  [$7E:0A30]  ;} Special prospective pose change command = connecting grapple - swinging
$9B:BA67 AD F6 0A    LDA $0AF6  [$7E:0AF6]  ;\
$9B:BA6A 38          SEC                    ;|
$9B:BA6B ED 08 0D    SBC $0D08  [$7E:0D08]  ;|
$9B:BA6E 85 12       STA $12    [$7E:0012]  ;|
$9B:BA70 AD FA 0A    LDA $0AFA  [$7E:0AFA]  ;|
$9B:BA73 38          SEC                    ;|
$9B:BA74 ED 0C 0D    SBC $0D0C  [$7E:0D0C]  ;} Grapple beam end angle = angle from grapple beam end to Samus
$9B:BA77 85 14       STA $14    [$7E:0014]  ;|
$9B:BA79 22 AE C0 A0 JSL $A0C0AE[$A0:C0AE]  ;|
$9B:BA7D EB          XBA                    ;|
$9B:BA7E 8D FA 0C    STA $0CFA  [$7E:0CFA]  ;|
$9B:BA81 8D FC 0C    STA $0CFC  [$7E:0CFC]  ;/
$9B:BA84 9C 00 0D    STZ $0D00  [$7E:0D00]  ; Grapple beam length delta = 0
$9B:BA87 AD FE 0C    LDA $0CFE  [$7E:0CFE]  ;\
$9B:BA8A C9 40 00    CMP #$0040             ;} If [grapple beam length] >= 40h:
$9B:BA8D 30 07       BMI $07    [$BA96]     ;/
$9B:BA8F 38          SEC                    ;\
$9B:BA90 E9 18 00    SBC #$0018             ;} Grapple beam length -= 18h
$9B:BA93 8D FE 0C    STA $0CFE  [$7E:0CFE]  ;/

$9B:BA96 22 11 AC 94 JSL $94AC11[$94:AC11]  ; Update grapple beam start position during grapple swinging
$9B:BA9A 60          RTS
}


;;; $BA9B: Handle connecting grapple - stuck in place ;;;
{
$9B:BA9B A9 0A 00    LDA #$000A             ;\
$9B:BA9E 8D 30 0A    STA $0A30  [$7E:0A30]  ;} Special prospective pose change command = connecting grapple - stuck in place
$9B:BAA1 AD F6 0A    LDA $0AF6  [$7E:0AF6]  ;\
$9B:BAA4 38          SEC                    ;|
$9B:BAA5 ED 08 0D    SBC $0D08  [$7E:0D08]  ;|
$9B:BAA8 85 12       STA $12    [$7E:0012]  ;|
$9B:BAAA AD FA 0A    LDA $0AFA  [$7E:0AFA]  ;|
$9B:BAAD 38          SEC                    ;|
$9B:BAAE ED 0C 0D    SBC $0D0C  [$7E:0D0C]  ;} Grapple beam end angle = angle from grapple beam end to Samus
$9B:BAB1 85 14       STA $14    [$7E:0014]  ;|
$9B:BAB3 22 AE C0 A0 JSL $A0C0AE[$A0:C0AE]  ;|
$9B:BAB7 EB          XBA                    ;|
$9B:BAB8 8D FA 0C    STA $0CFA  [$7E:0CFA]  ;|
$9B:BABB 8D FC 0C    STA $0CFC  [$7E:0CFC]  ;/
$9B:BABE 9C 00 0D    STZ $0D00  [$7E:0D00]  ; Grapple beam length delta = 0
$9B:BAC1 AD FE 0C    LDA $0CFE  [$7E:0CFE]  ;\
$9B:BAC4 C9 40 00    CMP #$0040             ;} If [grapple beam length] >= 40h:
$9B:BAC7 30 07       BMI $07    [$BAD0]     ;/
$9B:BAC9 38          SEC                    ;\
$9B:BACA E9 18 00    SBC #$0018             ;} Grapple beam length -= 18h
$9B:BACD 8D FE 0C    STA $0CFE  [$7E:0CFE]  ;/

$9B:BAD0 22 11 AC 94 JSL $94AC11[$94:AC11]  ; Update grapple beam start position during grapple swinging
$9B:BAD4 60          RTS
}
}


;;; $BAD5: Handle special grapple beam angles ;;;
{
;; Returns:
;;     Carry: set if handled special grapple beam angle

; Angles:
;     8D.80h: Wallgrab facing right
;     96.80h: Wallgrab facing left
;     B3.80h: Locked in place - crouching - aiming down-right
;     D6.80h: Locked in place - crouching - aiming down-right
;     2A.80h: Locked in place - crouching - aiming down-left
;     4D.80h: Locked in place - crouching - aiming down-left
;     6A.80h: Wallgrab facing right
;     73.80h: Wallgrab facing left

$9B:BAD5 A2 46 00    LDX #$0046             ; X = 46h

; LOOP
$9B:BAD8 AD FA 0C    LDA $0CFA  [$7E:0CFA]  ;\
$9B:BADB DD 3E C4    CMP $C43E,x[$9B:C484]  ;} If [grapple beam end angle] != [$C43E + [X]]:
$9B:BADE F0 0A       BEQ $0A    [$BAEA]     ;/
$9B:BAE0 8A          TXA                    ;\
$9B:BAE1 38          SEC                    ;|
$9B:BAE2 E9 0A 00    SBC #$000A             ;} X -= Ah
$9B:BAE5 AA          TAX                    ;/
$9B:BAE6 10 F0       BPL $F0    [$BAD8]     ; If [X] >= 0: go to LOOP
$9B:BAE8 18          CLC                    ;\
$9B:BAE9 60          RTS                    ;} Return carry clear

$9B:BAEA BD 40 C4    LDA $C440,x            ;\
$9B:BAED 8D 2A 0A    STA $0A2A  [$7E:0A2A]  ;} Special prospective pose = [$C43E + [X] + 2]
$9B:BAF0 BD 42 C4    LDA $C442,x            ;\
$9B:BAF3 18          CLC                    ;|
$9B:BAF4 6D 08 0D    ADC $0D08  [$7E:0D08]  ;} Samus X position = [grapple beam end X position] + [$C43E + [X] + 4]
$9B:BAF7 8D F6 0A    STA $0AF6  [$7E:0AF6]  ;/
$9B:BAFA BD 44 C4    LDA $C444,x            ;\
$9B:BAFD 18          CLC                    ;|
$9B:BAFE 6D 0C 0D    ADC $0D0C  [$7E:0D0C]  ;} Samus Y position = [grapple beam end Y position] + [$C43E + [X] + 6]
$9B:BB01 8D FA 0A    STA $0AFA  [$7E:0AFA]  ;/
$9B:BB04 BD 46 C4    LDA $C446,x            ;\
$9B:BB07 8D 32 0D    STA $0D32  [$7E:0D32]  ;} Grapple beam function = [$C43E + [X] + 8]
$9B:BB0A 9C 30 0A    STZ $0A30  [$7E:0A30]  ; Special prospective pose change command = none
$9B:BB0D 9C F8 0C    STZ $0CF8  [$7E:0CF8]  ; Slow grapple scrolling flag = 0
$9B:BB10 AD F6 0A    LDA $0AF6  [$7E:0AF6]  ;\
$9B:BB13 38          SEC                    ;|
$9B:BB14 ED 10 0B    SBC $0B10  [$7E:0B10]  ;|
$9B:BB17 30 11       BMI $11    [$BB2A]     ;|
$9B:BB19 C9 0D 00    CMP #$000D             ;|
$9B:BB1C 30 1B       BMI $1B    [$BB39]     ;|
$9B:BB1E AD F6 0A    LDA $0AF6  [$7E:0AF6]  ;|
$9B:BB21 38          SEC                    ;|
$9B:BB22 E9 0C 00    SBC #$000C             ;|
$9B:BB25 8D 10 0B    STA $0B10  [$7E:0B10]  ;} Samus previous X position = clamp([Samus previous X position], [Samus X position] - Ch, [Samus X position] + Ch)
$9B:BB28 80 0F       BRA $0F    [$BB39]     ;|
                                            ;|
$9B:BB2A C9 F4 FF    CMP #$FFF4             ;|
$9B:BB2D 10 0A       BPL $0A    [$BB39]     ;|
$9B:BB2F AD F6 0A    LDA $0AF6  [$7E:0AF6]  ;|
$9B:BB32 18          CLC                    ;|
$9B:BB33 69 0C 00    ADC #$000C             ;|
$9B:BB36 8D 10 0B    STA $0B10  [$7E:0B10]  ;/
                                            
$9B:BB39 AD FA 0A    LDA $0AFA  [$7E:0AFA]  ;\
$9B:BB3C 38          SEC                    ;|
$9B:BB3D ED 14 0B    SBC $0B14  [$7E:0B14]  ;|
$9B:BB40 30 11       BMI $11    [$BB53]     ;|
$9B:BB42 C9 0D 00    CMP #$000D             ;|
$9B:BB45 30 1B       BMI $1B    [$BB62]     ;|
$9B:BB47 AD FA 0A    LDA $0AFA  [$7E:0AFA]  ;|
$9B:BB4A 38          SEC                    ;|
$9B:BB4B E9 0C 00    SBC #$000C             ;|
$9B:BB4E 8D 14 0B    STA $0B14  [$7E:0B14]  ;} Samus previous Y position = clamp([Samus previous Y position], [Samus Y position] - Ch, [Samus Y position] + Ch)
$9B:BB51 80 0F       BRA $0F    [$BB62]     ;|
                                            ;|
$9B:BB53 C9 F4 FF    CMP #$FFF4             ;|
$9B:BB56 10 0A       BPL $0A    [$BB62]     ;|
$9B:BB58 AD FA 0A    LDA $0AFA  [$7E:0AFA]  ;|
$9B:BB5B 18          CLC                    ;|
$9B:BB5C 69 0C 00    ADC #$000C             ;|
$9B:BB5F 8D 14 0B    STA $0B14  [$7E:0B14]  ;/

$9B:BB62 38          SEC                    ;\
$9B:BB63 60          RTS                    ;} Return carry set
}


;;; $BB64: Handle grapple d-pad input ;;;
{
$9B:BB64 A5 8F       LDA $8F    [$7E:008F]  ;\
$9B:BB66 89 00 08    BIT #$0800             ;} If newly pressing up: go to BRANCH_DECREASE_LENGTH
$9B:BB69 D0 1F       BNE $1F    [$BB8A]     ;/
$9B:BB6B 89 00 04    BIT #$0400             ;\
$9B:BB6E D0 0A       BNE $0A    [$BB7A]     ;} If newly pressing down: go to BRANCH_INCREASE_LENGTH

$9B:BB70 80 27       BRA $27    [$BB99]     ; Go to BRANCH_ADJUST_LENGTH_END

; BRANCH_FULLY_LENGTHENED
$9B:BB72 A9 40 00    LDA #$0040             ;\
$9B:BB75 8D FE 0C    STA $0CFE  [$7E:0CFE]  ;} Grapple beam length = 40h
$9B:BB78 80 1F       BRA $1F    [$BB99]     ; Go to BRANCH_ADJUST_LENGTH_END

; BRANCH_INCREASE_LENGTH
$9B:BB7A AD FE 0C    LDA $0CFE  [$7E:0CFE]  ;\
$9B:BB7D C9 40 00    CMP #$0040             ;} If [grapple beam length] >= 40h: go to BRANCH_FULLY_LENGTHENED
$9B:BB80 10 F0       BPL $F0    [$BB72]     ;/
$9B:BB82 A9 02 00    LDA #$0002             ;\
$9B:BB85 8D 00 0D    STA $0D00  [$7E:0D00]  ;} Grapple beam length delta = 2
$9B:BB88 80 0F       BRA $0F    [$BB99]     ; Go to BRANCH_ADJUST_LENGTH_END

; BRANCH_DECREASE_LENGTH
$9B:BB8A AD FE 0C    LDA $0CFE  [$7E:0CFE]  ;\
$9B:BB8D F0 E1       BEQ $E1    [$BB70]     ;} If [grapple beam length] != 0:
$9B:BB8F A9 02 00    LDA #$0002             ;\
$9B:BB92 49 FF FF    EOR #$FFFF             ;|
$9B:BB95 1A          INC A                  ;} Grapple beam length delta = -2
$9B:BB96 8D 00 0D    STA $0D00  [$7E:0D00]  ;/

; BRANCH_ADJUST_LENGTH_END
$9B:BB99 AD FA 0C    LDA $0CFA  [$7E:0CFA]  ;\
$9B:BB9C 29 00 FF    AND #$FF00             ;|
$9B:BB9F C9 00 40    CMP #$4000             ;} If not -40h <= [grapple beam angle] / 100h < 40h: (Samus is below grapple point)
$9B:BBA2 30 11       BMI $11    [$BBB5]     ;/
$9B:BBA4 C9 00 C0    CMP #$C000             ;\
$9B:BBA7 10 0C       BPL $0C    [$BBB5]     ;} If not -40h <= [grapple beam angle] / 100h < 40h: (>_<;)
$9B:BBA9 A5 8B       LDA $8B    [$7E:008B]  ;\
$9B:BBAB 89 00 02    BIT #$0200             ;} If pressing left: go to BRANCH_LEFT
$9B:BBAE D0 40       BNE $40    [$BBF0]     ;/
$9B:BBB0 89 00 01    BIT #$0100             ;\
$9B:BBB3 D0 04       BNE $04    [$BBB9]     ;} If pressing right: go to BRANCH_RIGHT

$9B:BBB5 9C 2A 0D    STZ $0D2A  [$7E:0D2A]  ; Grapple swing angular acceleration due to button input = 0
$9B:BBB8 60          RTS                    ; Return

; BRANCH_RIGHT
$9B:BBB9 AD FA 0C    LDA $0CFA  [$7E:0CFA]  ;\
$9B:BBBC 29 00 FF    AND #$FF00             ;|
$9B:BBBF C9 00 80    CMP #$8000             ;} If [grapple beam angle] / 100h = 80h:
$9B:BBC2 D0 0B       BNE $0B    [$BBCF]     ;/
$9B:BBC4 AD 26 0D    LDA $0D26  [$7E:0D26]  ;\
$9B:BBC7 D0 06       BNE $06    [$BBCF]     ;} If [grapple swing angular velocity] = 0:
$9B:BBC9 A9 00 FF    LDA #$FF00             ;\
$9B:BBCC 8D 26 0D    STA $0D26  [$7E:0D26]  ;} Grapple swing angular velocity = -100h

$9B:BBCF AD F4 0C    LDA $0CF4  [$7E:0CF4]  ;\
$9B:BBD2 F0 11       BEQ $11    [$BBE5]     ;|
$9B:BBD4 89 01 00    BIT #$0001             ;} If grapple beam liquid physics:
$9B:BBD7 F0 0C       BEQ $0C    [$BBE5]     ;/
$9B:BBD9 AD 1A C1    LDA $C11A  [$9B:C11A]  ;\
$9B:BBDC 4A          LSR A                  ;|
$9B:BBDD 49 FF FF    EOR #$FFFF             ;} Grapple swing angular acceleration due to button input = -6
$9B:BBE0 1A          INC A                  ;|
$9B:BBE1 8D 2A 0D    STA $0D2A  [$7E:0D2A]  ;/
$9B:BBE4 60          RTS                    ; Return

$9B:BBE5 AD 1A C1    LDA $C11A  [$9B:C11A]  ;\
$9B:BBE8 49 FF FF    EOR #$FFFF             ;|
$9B:BBEB 1A          INC A                  ;} Grapple swing angular acceleration due to button input = -Ch
$9B:BBEC 8D 2A 0D    STA $0D2A  [$7E:0D2A]  ;/
$9B:BBEF 60          RTS                    ; Return

; BRANCH_LEFT
$9B:BBF0 AD FA 0C    LDA $0CFA  [$7E:0CFA]  ;\
$9B:BBF3 29 00 FF    AND #$FF00             ;|
$9B:BBF6 C9 00 80    CMP #$8000             ;} If [grapple beam angle] / 100h = 80h:
$9B:BBF9 D0 0B       BNE $0B    [$BC06]     ;/
$9B:BBFB AD 26 0D    LDA $0D26  [$7E:0D26]  ;\
$9B:BBFE D0 06       BNE $06    [$BC06]     ;} If [grapple swing angular velocity] = 0:
$9B:BC00 A9 00 01    LDA #$0100             ;\
$9B:BC03 8D 26 0D    STA $0D26  [$7E:0D26]  ;} Grapple swing angular velocity = 100h

$9B:BC06 AD F4 0C    LDA $0CF4  [$7E:0CF4]  ;\
$9B:BC09 F0 0D       BEQ $0D    [$BC18]     ;|
$9B:BC0B 89 01 00    BIT #$0001             ;} If grapple beam liquid physics enabled:
$9B:BC0E F0 08       BEQ $08    [$BC18]     ;/
$9B:BC10 AD 1A C1    LDA $C11A  [$9B:C11A]  ;\
$9B:BC13 4A          LSR A                  ;} Grapple swing angular acceleration due to button input = 6
$9B:BC14 8D 2A 0D    STA $0D2A  [$7E:0D2A]  ;/
$9B:BC17 60          RTS                    ; Return

$9B:BC18 AD 1A C1    LDA $C11A  [$9B:C11A]  ;\
$9B:BC1B 8D 2A 0D    STA $0D2A  [$7E:0D2A]  ;} Grapple swing angular acceleration due to button input = Ch
$9B:BC1E 60          RTS
}


;;; $BC1F: Determine grapple swing angular acceleration due to angle of swing ;;;
{
$9B:BC1F AD FA 0C    LDA $0CFA  [$7E:0CFA]  ;\
$9B:BC22 29 00 C0    AND #$C000             ;|
$9B:BC25 C9 00 C0    CMP #$C000             ;} If [grapple beam end angle] / 4000h = 3: go to BRANCH_UP_LEFT
$9B:BC28 F0 2F       BEQ $2F    [$BC59]     ;/
$9B:BC2A 89 00 80    BIT #$8000             ;\
$9B:BC2D D0 4C       BNE $4C    [$BC7B]     ;} If [grapple beam end angle] / 4000h = 2: go to BRANCH_DOWN_LEFT
$9B:BC2F 89 00 40    BIT #$4000             ;\
$9B:BC32 D0 28       BNE $28    [$BC5C]     ;} If [grapple beam end angle] / 4000h = 1: go to BRANCH_DOWN_RIGHT

; Up right
$9B:BC34 AD 1C C1    LDA $C11C  [$9B:C11C]  ;\
$9B:BC37 4A          LSR A                  ;|
$9B:BC38 4A          LSR A                  ;} Grapple swing angular deceleration = 1
$9B:BC39 8D 2C 0D    STA $0D2C  [$7E:0D2C]  ;/
$9B:BC3C AD F4 0C    LDA $0CF4  [$7E:0CF4]  ;\
$9B:BC3F F0 0F       BEQ $0F    [$BC50]     ;|
$9B:BC41 89 01 00    BIT #$0001             ;} If grapple beam liquid physics enabled:
$9B:BC44 F0 0A       BEQ $0A    [$BC50]     ;/
$9B:BC46 AD 18 C1    LDA $C118  [$9B:C118]  ;\
$9B:BC49 4A          LSR A                  ;|
$9B:BC4A 4A          LSR A                  ;} Grapple swing angular acceleration due to angle of swing = 3
$9B:BC4B 4A          LSR A                  ;|
$9B:BC4C 8D 28 0D    STA $0D28  [$7E:0D28]  ;/
$9B:BC4F 60          RTS                    ; Return

$9B:BC50 AD 18 C1    LDA $C118  [$9B:C118]  ;\
$9B:BC53 4A          LSR A                  ;|
$9B:BC54 4A          LSR A                  ;} Grapple swing angular acceleration due to angle of swing = 6
$9B:BC55 8D 28 0D    STA $0D28  [$7E:0D28]  ;/
$9B:BC58 60          RTS                    ; Return

$9B:BC59 4C CE BC    JMP $BCCE  [$9B:BCCE]

; BRANCH_DOWN_RIGHT
$9B:BC5C AD 1C C1    LDA $C11C  [$9B:C11C]  ;\
$9B:BC5F 8D 2C 0D    STA $0D2C  [$7E:0D2C]  ;} Grapple swing angular deceleration = 5
$9B:BC62 AD F4 0C    LDA $0CF4  [$7E:0CF4]  ;\
$9B:BC65 F0 0D       BEQ $0D    [$BC74]     ;|
$9B:BC67 89 01 00    BIT #$0001             ;} If grapple beam liquid physics enabled:
$9B:BC6A F0 08       BEQ $08    [$BC74]     ;/
$9B:BC6C AD 18 C1    LDA $C118  [$9B:C118]  ;\
$9B:BC6F 4A          LSR A                  ;} Grapple swing angular acceleration due to angle of swing = Ch
$9B:BC70 8D 28 0D    STA $0D28  [$7E:0D28]  ;/
$9B:BC73 60          RTS                    ; Return

$9B:BC74 AD 18 C1    LDA $C118  [$9B:C118]  ;\
$9B:BC77 8D 28 0D    STA $0D28  [$7E:0D28]  ;} Grapple swing angular acceleration due to angle of swing = 18h
$9B:BC7A 60          RTS                    ; Return

; BRANCH_DOWN_LEFT
$9B:BC7B AD FA 0C    LDA $0CFA  [$7E:0CFA]  ;\
$9B:BC7E 29 00 FF    AND #$FF00             ;|
$9B:BC81 C9 00 80    CMP #$8000             ;} If [grapple beam end angle] / 100h = 80h: go to BRANCH_STRAIGHT_DOWN
$9B:BC84 F0 2B       BEQ $2B    [$BCB1]     ;/
$9B:BC86 AD 1C C1    LDA $C11C  [$9B:C11C]  ;\
$9B:BC89 49 FF FF    EOR #$FFFF             ;|
$9B:BC8C 1A          INC A                  ;} Grapple swing angular deceleration = -5
$9B:BC8D 8D 2C 0D    STA $0D2C  [$7E:0D2C]  ;/
$9B:BC90 AD F4 0C    LDA $0CF4  [$7E:0CF4]  ;\
$9B:BC93 F0 11       BEQ $11    [$BCA6]     ;|
$9B:BC95 89 01 00    BIT #$0001             ;} If grapple beam liquid physics enabled:
$9B:BC98 F0 0C       BEQ $0C    [$BCA6]     ;/
$9B:BC9A AD 18 C1    LDA $C118  [$9B:C118]  ;\
$9B:BC9D 4A          LSR A                  ;|
$9B:BC9E 49 FF FF    EOR #$FFFF             ;} Grapple swing angular acceleration due to angle of swing = -Ch
$9B:BCA1 1A          INC A                  ;|
$9B:BCA2 8D 28 0D    STA $0D28  [$7E:0D28]  ;/
$9B:BCA5 60          RTS                    ; Return

$9B:BCA6 AD 18 C1    LDA $C118  [$9B:C118]  ;\
$9B:BCA9 49 FF FF    EOR #$FFFF             ;|
$9B:BCAC 1A          INC A                  ;} Grapple swing angular acceleration due to angle of swing = -18h
$9B:BCAD 8D 28 0D    STA $0D28  [$7E:0D28]  ;/
$9B:BCB0 60          RTS                    ; Return

; BRANCH_STRAIGHT_DOWN
$9B:BCB1 9C 28 0D    STZ $0D28  [$7E:0D28]  ; Grapple swing angular acceleration due to angle of swing = 0
$9B:BCB4 9C 2C 0D    STZ $0D2C  [$7E:0D2C]  ; Grapple swing angular deceleration = 0
$9B:BCB7 AD 26 0D    LDA $0D26  [$7E:0D26]  ;\
$9B:BCBA 10 04       BPL $04    [$BCC0]     ;|
$9B:BCBC 3A          DEC A                  ;|
$9B:BCBD 49 FF FF    EOR #$FFFF             ;|
                                            ;} If |[grapple swing angular velocity]| / 100h >= 1:
$9B:BCC0 EB          XBA                    ;|
$9B:BCC1 29 FF 00    AND #$00FF             ;|
$9B:BCC4 C9 01 00    CMP #$0001             ;|
$9B:BCC7 30 01       BMI $01    [$BCCA]     ;/
$9B:BCC9 60          RTS                    ; Return

$9B:BCCA 9C 26 0D    STZ $0D26  [$7E:0D26]  ; Grapple swing angular velocity = 0
$9B:BCCD 60          RTS                    ; Return

; BRANCH_UP_LEFT
$9B:BCCE AD 1C C1    LDA $C11C  [$9B:C11C]  ;\
$9B:BCD1 4A          LSR A                  ;|
$9B:BCD2 4A          LSR A                  ;|
$9B:BCD3 49 FF FF    EOR #$FFFF             ;} Grapple swing angular deceleration = -1
$9B:BCD6 1A          INC A                  ;|
$9B:BCD7 8D 2C 0D    STA $0D2C  [$7E:0D2C]  ;/
$9B:BCDA AD F4 0C    LDA $0CF4  [$7E:0CF4]  ;\
$9B:BCDD F0 13       BEQ $13    [$BCF2]     ;|
$9B:BCDF 89 01 00    BIT #$0001             ;} If grapple beam liquid physics enabled:
$9B:BCE2 F0 0E       BEQ $0E    [$BCF2]     ;/
$9B:BCE4 AD 18 C1    LDA $C118  [$9B:C118]  ;\
$9B:BCE7 4A          LSR A                  ;|
$9B:BCE8 4A          LSR A                  ;|
$9B:BCE9 4A          LSR A                  ;} Grapple swing angular acceleration due to angle of swing = -3
$9B:BCEA 49 FF FF    EOR #$FFFF             ;|
$9B:BCED 1A          INC A                  ;|
$9B:BCEE 8D 28 0D    STA $0D28  [$7E:0D28]  ;/
$9B:BCF1 60          RTS                    ; Return

$9B:BCF2 AD 18 C1    LDA $C118  [$9B:C118]  ;\
$9B:BCF5 4A          LSR A                  ;|
$9B:BCF6 4A          LSR A                  ;|
$9B:BCF7 49 FF FF    EOR #$FFFF             ;} Grapple swing angular acceleration due to angle of swing = -6
$9B:BCFA 1A          INC A                  ;|
$9B:BCFB 8D 28 0D    STA $0D28  [$7E:0D28]  ;/
$9B:BCFE 60          RTS
}


;;; $BCFF: Update grapple swing angular velocity ;;;
{
$9B:BCFF AD 26 0D    LDA $0D26  [$7E:0D26]  ;\
$9B:BD02 18          CLC                    ;|
$9B:BD03 6D 28 0D    ADC $0D28  [$7E:0D28]  ;|
$9B:BD06 18          CLC                    ;} Grapple swing angular velocity += [grapple swing angular acceleration due to angle of swing] + [grapple swing angular acceleration due to button input]
$9B:BD07 6D 2A 0D    ADC $0D2A  [$7E:0D2A]  ;|
$9B:BD0A 8D 26 0D    STA $0D26  [$7E:0D26]  ;/
$9B:BD0D AD FA 0C    LDA $0CFA  [$7E:0CFA]  ;\
$9B:BD10 4D 26 0D    EOR $0D26  [$7E:0D26]  ;} If sgn([grapple beam end angle]) != sgn([grapple swing angular velocity]) (Samus is rising):
$9B:BD13 10 0A       BPL $0A    [$BD1F]     ;/
$9B:BD15 AD 26 0D    LDA $0D26  [$7E:0D26]  ;\
$9B:BD18 18          CLC                    ;|
$9B:BD19 6D 2C 0D    ADC $0D2C  [$7E:0D2C]  ;} Grapple swing angular velocity += [grapple swing angular deceleration]
$9B:BD1C 8D 26 0D    STA $0D26  [$7E:0D26]  ;/

$9B:BD1F AD 26 0D    LDA $0D26  [$7E:0D26]  ;\
$9B:BD22 10 14       BPL $14    [$BD38]     ;|
$9B:BD24 49 FF FF    EOR #$FFFF             ;|
$9B:BD27 1A          INC A                  ;|
$9B:BD28 CD 1E C1    CMP $C11E  [$9B:C11E]  ;|
$9B:BD2B 90 16       BCC $16    [$BD43]     ;|
$9B:BD2D AD 1E C1    LDA $C11E  [$9B:C11E]  ;|
$9B:BD30 49 FF FF    EOR #$FFFF             ;|
$9B:BD33 1A          INC A                  ;} Grapple swing angular velocity = clamp([grapple swing angular velocity], -480h, 480h)
$9B:BD34 8D 26 0D    STA $0D26  [$7E:0D26]  ;|
$9B:BD37 60          RTS                    ;|
                                            ;|
$9B:BD38 CD 1E C1    CMP $C11E  [$9B:C11E]  ;|
$9B:BD3B 90 06       BCC $06    [$BD43]     ;|
$9B:BD3D AD 1E C1    LDA $C11E  [$9B:C11E]  ;|
$9B:BD40 8D 26 0D    STA $0D26  [$7E:0D26]  ;/

$9B:BD43 60          RTS
}


;;; $BD44: Handle grapple kick ;;;
{
$9B:BD44 AD 30 0D    LDA $0D30  [$7E:0D30]  ;\
$9B:BD47 F0 0F       BEQ $0F    [$BD58]     ;} If [grapple kick cooldown timer] = 0: return
$9B:BD49 A5 8F       LDA $8F    [$7E:008F]  ;\
$9B:BD4B 2C B4 09    BIT $09B4  [$7E:09B4]  ;} If not newly pressing jump: return
$9B:BD4E F0 08       BEQ $08    [$BD58]     ;/
$9B:BD50 AD 26 0D    LDA $0D26  [$7E:0D26]  ;\
$9B:BD53 D0 04       BNE $04    [$BD59]     ;} If [grapple swing angular velocity] = 0:
$9B:BD55 9C 2E 0D    STZ $0D2E  [$7E:0D2E]  ; Extra grapple swing angular velocity = 0
$9B:BD58 60          RTS                    ; Return

$9B:BD59 30 19       BMI $19    [$BD74]     ; If [grapple swing angular velocity] < 0: go to BRANCH_ANTICLOCKWISE
$9B:BD5B AD F4 0C    LDA $0CF4  [$7E:0CF4]  ;\
$9B:BD5E F0 0D       BEQ $0D    [$BD6D]     ;|
$9B:BD60 89 01 00    BIT #$0001             ;} If grapple beam liquid physics enabled:
$9B:BD63 F0 08       BEQ $08    [$BD6D]     ;/
$9B:BD65 AD 20 C1    LDA $C120  [$9B:C120]  ;\
$9B:BD68 4A          LSR A                  ;} Extra grapple swing angular velocity = 180h
$9B:BD69 8D 2E 0D    STA $0D2E  [$7E:0D2E]  ;/
$9B:BD6C 60          RTS                    ; Return

$9B:BD6D AD 20 C1    LDA $C120  [$9B:C120]  ;\
$9B:BD70 8D 2E 0D    STA $0D2E  [$7E:0D2E]  ;} Extra grapple swing angular velocity = 300h
$9B:BD73 60          RTS                    ; Return

; BRANCH_ANTICLOCKWISE
$9B:BD74 AD F4 0C    LDA $0CF4  [$7E:0CF4]  ;\
$9B:BD77 F0 11       BEQ $11    [$BD8A]     ;|
$9B:BD79 89 01 00    BIT #$0001             ;} If grapple beam liquid physics enabled:
$9B:BD7C F0 0C       BEQ $0C    [$BD8A]     ;/
$9B:BD7E AD 20 C1    LDA $C120  [$9B:C120]  ;\
$9B:BD81 4A          LSR A                  ;|
$9B:BD82 49 FF FF    EOR #$FFFF             ;} Extra grapple swing angular velocity = -180h
$9B:BD85 1A          INC A                  ;|
$9B:BD86 8D 2E 0D    STA $0D2E  [$7E:0D2E]  ;/
$9B:BD89 60          RTS                    ; Return

$9B:BD8A AD 20 C1    LDA $C120  [$9B:C120]  ;\
$9B:BD8D 49 FF FF    EOR #$FFFF             ;|
$9B:BD90 1A          INC A                  ;} Extra grapple swing angular velocity = -300h
$9B:BD91 8D 2E 0D    STA $0D2E  [$7E:0D2E]  ;/
$9B:BD94 60          RTS
}


;;; $BD95: Set Samus animation frame and position during grapple swinging ;;;
{
$9B:BD95 08          PHP
$9B:BD96 8B          PHB
$9B:BD97 4B          PHK                    ;\
$9B:BD98 AB          PLB                    ;} DB = $9B
$9B:BD99 C2 30       REP #$30
$9B:BD9B AD 26 0D    LDA $0D26  [$7E:0D26]  ;\
$9B:BD9E 10 04       BPL $04    [$BDA4]     ;|
$9B:BDA0 49 FF FF    EOR #$FFFF             ;|
$9B:BDA3 1A          INC A                  ;} If |[grapple swing angular velocity]| >= 40h:
                                            ;|
$9B:BDA4 C9 40 00    CMP #$0040             ;|
$9B:BDA7 30 08       BMI $08    [$BDB1]     ;/
$9B:BDA9 A9 01 00    LDA #$0001             ;\
$9B:BDAC 8D F8 0C    STA $0CF8  [$7E:0CF8]  ;} Slow grapple scrolling flag = 1
$9B:BDAF 80 31       BRA $31    [$BDE2]     ; Go to BRANCH_SET_SWINGING_ANIMATION_FRAME

$9B:BDB1 9C F8 0C    STZ $0CF8  [$7E:0CF8]  ; Slow grapple scrolling flag = 0
$9B:BDB4 AD FA 0C    LDA $0CFA  [$7E:0CFA]  ;\
$9B:BDB7 29 00 FF    AND #$FF00             ;|
$9B:BDBA C9 00 80    CMP #$8000             ;} If [grapple beam end angle] / 100h != 80h (down): go to BRANCH_SET_SWINGING_ANIMATION_FRAME
$9B:BDBD D0 23       BNE $23    [$BDE2]     ;/
$9B:BDBF AD 96 0A    LDA $0A96  [$7E:0A96]  ;\
$9B:BDC2 C9 40 00    CMP #$0040             ;} If [Samus animation frame] < 40h (not hanging straight down):
$9B:BDC5 10 0C       BPL $0C    [$BDD3]     ;/
$9B:BDC7 A9 08 00    LDA #$0008             ;\
$9B:BDCA 8D 94 0A    STA $0A94  [$7E:0A94]  ;} Samus animation frame timer = 8
$9B:BDCD A9 40 00    LDA #$0040             ;\
$9B:BDD0 8D 96 0A    STA $0A96  [$7E:0A96]  ;} Samus animation frame = 40h (hanging straight down)

$9B:BDD3 AD FD 0C    LDA $0CFD  [$7E:0CFD]  ;\
$9B:BDD6 29 FF 00    AND #$00FF             ;|
$9B:BDD9 AA          TAX                    ;} A = [$C1C2 + [grapple beam end angle] / 100h]
$9B:BDDA BD C2 C1    LDA $C1C2,x[$9B:C242]  ;|
$9B:BDDD 29 FF 00    AND #$00FF             ;/
$9B:BDE0 80 16       BRA $16    [$BDF8]     ; Go to BRANCH_MERGE

; BRANCH_SET_SWINGING_ANIMATION_FRAME
$9B:BDE2 A9 0F 00    LDA #$000F             ;\
$9B:BDE5 8D 94 0A    STA $0A94  [$7E:0A94]  ;} Samus animation frame timer = Fh
$9B:BDE8 AD FD 0C    LDA $0CFD  [$7E:0CFD]  ;\
$9B:BDEB 29 FF 00    AND #$00FF             ;|
$9B:BDEE AA          TAX                    ;} A = [$C1C2 + [grapple beam end angle] / 100h]
$9B:BDEF BD C2 C1    LDA $C1C2,x[$9B:C257]  ;|
$9B:BDF2 29 FF 00    AND #$00FF             ;/
$9B:BDF5 8D 96 0A    STA $0A96  [$7E:0A96]  ; Samus animation frame = [A]

; BRANCH_MERGE
$9B:BDF8 0A          ASL A                  ;\
$9B:BDF9 AA          TAX                    ;} X = [A] * 2
$9B:BDFA AD 2E 0D    LDA $0D2E  [$7E:0D2E]  ;\
$9B:BDFD 10 04       BPL $04    [$BE03]     ;|
$9B:BDFF 49 FF FF    EOR #$FFFF             ;|
$9B:BE02 1A          INC A                  ;|
                                            ;} If |[extra grapple swing angular velocity]| / 100h != 1: go to BRANCH_NOT_GRAPPLING_KICKING
$9B:BE03 29 00 FF    AND #$FF00             ;|
$9B:BE06 C9 00 01    CMP #$0100             ;|
$9B:BE09 D0 12       BNE $12    [$BE1D]     ;/
$9B:BE0B AD 96 0A    LDA $0A96  [$7E:0A96]  ;\
$9B:BE0E C9 40 00    CMP #$0040             ;} If [Samus animation frame] >= 40h (hanging straight down):
$9B:BE11 30 03       BMI $03    [$BE16]     ;/
$9B:BE13 A9 10 00    LDA #$0010             ; Samus animation frame = 10h

$9B:BE16 18          CLC                    ;\
$9B:BE17 69 20 00    ADC #$0020             ;} Samus animation frame += 20h (kicking)
$9B:BE1A 8D 96 0A    STA $0A96  [$7E:0A96]  ;/

; BRANCH_NOT_GRAPPLING_KICKING
$9B:BE1D AD 1E 0A    LDA $0A1E  [$7E:0A1E]  ;\
$9B:BE20 29 FF 00    AND #$00FF             ;|
$9B:BE23 C9 04 00    CMP #$0004             ;} If [Samus pose X direction] != left:
$9B:BE26 F0 38       BEQ $38    [$BE60]     ;/
$9B:BE28 BD 01 C3    LDA $C301,x[$9B:C327]  ;\
$9B:BE2B 29 00 FF    AND #$FF00             ;|
$9B:BE2E EB          XBA                    ;|
$9B:BE2F 10 03       BPL $03    [$BE34]     ;|
$9B:BE31 09 00 FF    ORA #$FF00             ;} Samus X position = [grapple beam start X position] + ±[$C302 + [X]]
                                            ;|
$9B:BE34 18          CLC                    ;|
$9B:BE35 6D 16 0D    ADC $0D16  [$7E:0D16]  ;|
$9B:BE38 8D F6 0A    STA $0AF6  [$7E:0AF6]  ;/
$9B:BE3B BD 02 C3    LDA $C302,x[$9B:C328]  ;\
$9B:BE3E 29 00 FF    AND #$FF00             ;|
$9B:BE41 EB          XBA                    ;|
$9B:BE42 10 03       BPL $03    [$BE47]     ;|
$9B:BE44 09 00 FF    ORA #$FF00             ;} Samus Y position = [grapple beam start Y position] + ±[$C302 + [X] + 1]
                                            ;|
$9B:BE47 18          CLC                    ;|
$9B:BE48 6D 18 0D    ADC $0D18  [$7E:0D18]  ;|
$9B:BE4B 8D FA 0A    STA $0AFA  [$7E:0AFA]  ;/
$9B:BE4E AD 16 0D    LDA $0D16  [$7E:0D16]  ;\
$9B:BE51 8D 1A 0D    STA $0D1A  [$7E:0D1A]  ;} Grapple beam flare X position = [grapple beam start X position]
$9B:BE54 AD 18 0D    LDA $0D18  [$7E:0D18]  ;\
$9B:BE57 8D 1C 0D    STA $0D1C  [$7E:0D1C]  ;} Grapple beam flare Y position = [grapple beam start Y position]
$9B:BE5A 20 98 BE    JSR $BE98  [$9B:BE98]  ; Clamp scrolling speed
$9B:BE5D AB          PLB
$9B:BE5E 28          PLP
$9B:BE5F 6B          RTL                    ; Return

$9B:BE60 BD C1 C2    LDA $C2C1,x[$9B:C2DD]  ;\
$9B:BE63 29 00 FF    AND #$FF00             ;|
$9B:BE66 EB          XBA                    ;|
$9B:BE67 10 03       BPL $03    [$BE6C]     ;|
$9B:BE69 09 00 FF    ORA #$FF00             ;} Samus X position = ±[$C2C2 + [X]] + [grapple beam start X position]
                                            ;|
$9B:BE6C 18          CLC                    ;|
$9B:BE6D 6D 16 0D    ADC $0D16  [$7E:0D16]  ;|
$9B:BE70 8D F6 0A    STA $0AF6  [$7E:0AF6]  ;/
$9B:BE73 BD C2 C2    LDA $C2C2,x[$9B:C2DE]  ;\
$9B:BE76 29 00 FF    AND #$FF00             ;|
$9B:BE79 EB          XBA                    ;|
$9B:BE7A 10 03       BPL $03    [$BE7F]     ;|
$9B:BE7C 09 00 FF    ORA #$FF00             ;} Samus Y position = ±[$C2C2 + [X] + 1] + [grapple beam start Y position]
                                            ;|
$9B:BE7F 18          CLC                    ;|
$9B:BE80 6D 18 0D    ADC $0D18  [$7E:0D18]  ;|
$9B:BE83 8D FA 0A    STA $0AFA  [$7E:0AFA]  ;/
$9B:BE86 AD 16 0D    LDA $0D16  [$7E:0D16]  ;\
$9B:BE89 8D 1A 0D    STA $0D1A  [$7E:0D1A]  ;} Grapple beam flare X position = [grapple beam start X position]
$9B:BE8C AD 18 0D    LDA $0D18  [$7E:0D18]  ;\
$9B:BE8F 8D 1C 0D    STA $0D1C  [$7E:0D1C]  ;} Grapple beam flare Y position = [grapple beam start Y position]
$9B:BE92 20 98 BE    JSR $BE98  [$9B:BE98]  ; Clamp scrolling speed
$9B:BE95 AB          PLB
$9B:BE96 28          PLP
$9B:BE97 6B          RTL
}


;;; $BE98: Clamp scrolling speed ;;;
{
$9B:BE98 AD F6 0A    LDA $0AF6  [$7E:0AF6]  ;\
$9B:BE9B 38          SEC                    ;|
$9B:BE9C ED 10 0B    SBC $0B10  [$7E:0B10]  ;|
$9B:BE9F 30 11       BMI $11    [$BEB2]     ;|
$9B:BEA1 C9 0D 00    CMP #$000D             ;|
$9B:BEA4 30 1B       BMI $1B    [$BEC1]     ;|
$9B:BEA6 AD F6 0A    LDA $0AF6  [$7E:0AF6]  ;|
$9B:BEA9 38          SEC                    ;|
$9B:BEAA E9 0C 00    SBC #$000C             ;|
$9B:BEAD 8D 10 0B    STA $0B10  [$7E:0B10]  ;} Samus previous X position = clamp([Samus previous X position], [Samus X position] - Ch, [Samus X position] + Ch)
$9B:BEB0 80 0F       BRA $0F    [$BEC1]     ;|
                                            ;|
$9B:BEB2 C9 F4 FF    CMP #$FFF4             ;|
$9B:BEB5 10 0A       BPL $0A    [$BEC1]     ;|
$9B:BEB7 AD F6 0A    LDA $0AF6  [$7E:0AF6]  ;|
$9B:BEBA 18          CLC                    ;|
$9B:BEBB 69 0C 00    ADC #$000C             ;|
$9B:BEBE 8D 10 0B    STA $0B10  [$7E:0B10]  ;/

$9B:BEC1 AD FA 0A    LDA $0AFA  [$7E:0AFA]  ;\
$9B:BEC4 38          SEC                    ;|
$9B:BEC5 ED 14 0B    SBC $0B14  [$7E:0B14]  ;|
$9B:BEC8 30 11       BMI $11    [$BEDB]     ;|
$9B:BECA C9 0D 00    CMP #$000D             ;|
$9B:BECD 30 1B       BMI $1B    [$BEEA]     ;|
$9B:BECF AD FA 0A    LDA $0AFA  [$7E:0AFA]  ;|
$9B:BED2 38          SEC                    ;|
$9B:BED3 E9 0C 00    SBC #$000C             ;|
$9B:BED6 8D 14 0B    STA $0B14  [$7E:0B14]  ;} Samus previous Y position = clamp([Samus previous Y position], [Samus Y position] - Ch, [Samus Y position] + Ch)
$9B:BED9 80 0F       BRA $0F    [$BEEA]     ;|
                                            ;|
$9B:BEDB C9 F4 FF    CMP #$FFF4             ;|
$9B:BEDE 10 0A       BPL $0A    [$BEEA]     ;|
$9B:BEE0 AD FA 0A    LDA $0AFA  [$7E:0AFA]  ;|
$9B:BEE3 18          CLC                    ;|
$9B:BEE4 69 0C 00    ADC #$000C             ;|
$9B:BEE7 8D 14 0B    STA $0B14  [$7E:0B14]  ;/

$9B:BEEA 60          RTS
}


;;; $BEEB: Set Samus animation frame and position for connecting grapple stuck in place ;;;
{
$9B:BEEB 08          PHP
$9B:BEEC 8B          PHB
$9B:BEED 4B          PHK                    ;\
$9B:BEEE AB          PLB                    ;} DB = $9B
$9B:BEEF C2 30       REP #$30
$9B:BEF1 AD 34 0D    LDA $0D34  [$7E:0D34]  ;\
$9B:BEF4 0A          ASL A                  ;} X = [direction grapple is fired] * 2
$9B:BEF5 AA          TAX                    ;/
$9B:BEF6 AD 16 0D    LDA $0D16  [$7E:0D16]  ;\
$9B:BEF9 38          SEC                    ;|
$9B:BEFA FD 22 C1    SBC $C122,x            ;} Samus X position = [grapple beam start X position] - [$C122 + [X]]
$9B:BEFD 8D F6 0A    STA $0AF6  [$7E:0AF6]  ;/
$9B:BF00 18          CLC                    ;\
$9B:BF01 7D 4A C1    ADC $C14A,x            ;} Grapple beam flare X position = [Samus X position] + [$C14A + [X]]
$9B:BF04 8D 1A 0D    STA $0D1A  [$7E:0D1A]  ;/
$9B:BF07 AD 18 0D    LDA $0D18  [$7E:0D18]  ;\
$9B:BF0A 38          SEC                    ;|
$9B:BF0B FD 36 C1    SBC $C136,x            ;} Samus Y position = [grapple beam start Y position] - [$C136 + [X]]
$9B:BF0E 8D FA 0A    STA $0AFA  [$7E:0AFA]  ;/
$9B:BF11 18          CLC                    ;\
$9B:BF12 7D 5E C1    ADC $C15E,x            ;} Grapple beam flare Y position = [Samus Y position] + [$C15E + [X]]
$9B:BF15 8D 1C 0D    STA $0D1C  [$7E:0D1C]  ;/
$9B:BF18 AB          PLB
$9B:BF19 28          PLP
$9B:BF1A 6B          RTL
}


;;; $BF1B: Update grapple beam start position during grapple fire ;;;
{
$9B:BF1B 08          PHP
$9B:BF1C 8B          PHB
$9B:BF1D 4B          PHK                    ;\
$9B:BF1E AB          PLB                    ;} DB = $9B
$9B:BF1F C2 30       REP #$30
$9B:BF21 AD 1C 0A    LDA $0A1C  [$7E:0A1C]  ;\
$9B:BF24 0A          ASL A                  ;|
$9B:BF25 0A          ASL A                  ;|
$9B:BF26 0A          ASL A                  ;|
$9B:BF27 AA          TAX                    ;} $16 = [$91:B62D + [Samus pose] * 8] (Y offset of Samus GFX and projectile origin)
$9B:BF28 BF 2D B6 91 LDA $91B62D,x[$91:B975];|
$9B:BF2C 29 FF 00    AND #$00FF             ;|
$9B:BF2F 85 16       STA $16    [$7E:0016]  ;/
$9B:BF31 AD 34 0D    LDA $0D34  [$7E:0D34]  ;\
$9B:BF34 0A          ASL A                  ;} X = [direction grapple is fired] * 2
$9B:BF35 AA          TAX                    ;/
$9B:BF36 AD 1C 0A    LDA $0A1C  [$7E:0A1C]  ;\
$9B:BF39 C9 49 00    CMP #$0049             ;|
$9B:BF3C F0 10       BEQ $10    [$BF4E]     ;} If [Samus pose] != moonwalk:
$9B:BF3E C9 4A 00    CMP #$004A             ;|
$9B:BF41 F0 0B       BEQ $0B    [$BF4E]     ;/
$9B:BF43 AD 1F 0A    LDA $0A1F  [$7E:0A1F]  ;\
$9B:BF46 29 FF 00    AND #$00FF             ;|
$9B:BF49 C9 01 00    CMP #$0001             ;} If [Samus movement type] = running: go to BRANCH_RUNNING
$9B:BF4C F0 2B       BEQ $2B    [$BF79]     ;/

$9B:BF4E AD F6 0A    LDA $0AF6  [$7E:0AF6]  ;\
$9B:BF51 48          PHA                    ;|
$9B:BF52 18          CLC                    ;} Grapple beam start X position = [Samus X position] + [$C122 + [X]]
$9B:BF53 7D 22 C1    ADC $C122,x[$9B:C124]  ;|
$9B:BF56 8D 16 0D    STA $0D16  [$7E:0D16]  ;/
$9B:BF59 68          PLA                    ;\
$9B:BF5A 18          CLC                    ;|
$9B:BF5B 7D 4A C1    ADC $C14A,x[$9B:C14C]  ;} Grapple beam flare X position = [Samus X position] + [$C14A + [X]]
$9B:BF5E 8D 1A 0D    STA $0D1A  [$7E:0D1A]  ;/
$9B:BF61 AD FA 0A    LDA $0AFA  [$7E:0AFA]  ;\
$9B:BF64 38          SEC                    ;|
$9B:BF65 E5 16       SBC $16    [$7E:0016]  ;|
$9B:BF67 48          PHA                    ;} Grapple beam start Y position = [Samus Y position] - [$16] + [$C136 + [X]]
$9B:BF68 18          CLC                    ;|
$9B:BF69 7D 36 C1    ADC $C136,x[$9B:C138]  ;|
$9B:BF6C 8D 18 0D    STA $0D18  [$7E:0D18]  ;/
$9B:BF6F 68          PLA                    ;\
$9B:BF70 18          CLC                    ;|
$9B:BF71 7D 5E C1    ADC $C15E,x[$9B:C160]  ;} Grapple beam flare Y position = [Samus Y position] - [$16] + [$C15E + [X]]
$9B:BF74 8D 1C 0D    STA $0D1C  [$7E:0D1C]  ;/
$9B:BF77 80 29       BRA $29    [$BFA2]     ; Return

; BRANCH_RUNNING
$9B:BF79 AD F6 0A    LDA $0AF6  [$7E:0AF6]  ;\
$9B:BF7C 48          PHA                    ;|
$9B:BF7D 18          CLC                    ;} Grapple beam start X position = [Samus X position] + [$C172 + [X]]
$9B:BF7E 7D 72 C1    ADC $C172,x[$9B:C182]  ;|
$9B:BF81 8D 16 0D    STA $0D16  [$7E:0D16]  ;/
$9B:BF84 68          PLA                    ;\
$9B:BF85 18          CLC                    ;|
$9B:BF86 7D 9A C1    ADC $C19A,x[$9B:C1AA]  ;} Grapple beam flare X position = [Samus X position] + [$C19A + [X]]
$9B:BF89 8D 1A 0D    STA $0D1A  [$7E:0D1A]  ;/
$9B:BF8C AD FA 0A    LDA $0AFA  [$7E:0AFA]  ;\
$9B:BF8F 38          SEC                    ;|
$9B:BF90 E5 16       SBC $16    [$7E:0016]  ;|
$9B:BF92 48          PHA                    ;} Grapple beam flare Y position = [Samus Y position] - [$16] + [$C186 + [X]]
$9B:BF93 18          CLC                    ;|
$9B:BF94 7D 86 C1    ADC $C186,x[$9B:C196]  ;|
$9B:BF97 8D 18 0D    STA $0D18  [$7E:0D18]  ;/
$9B:BF9A 68          PLA                    ;\
$9B:BF9B 18          CLC                    ;|
$9B:BF9C 7D AE C1    ADC $C1AE,x[$9B:C1BE]  ;} Grapple beam start Y position = [Samus Y position] - [$16] + [$C1AE + [X]]
$9B:BF9F 8D 1C 0D    STA $0D1C  [$7E:0D1C]  ;/

$9B:BFA2 AB          PLB
$9B:BFA3 28          PLP
$9B:BFA4 6B          RTL
}


;;; $BFA5: Update grapple beam tiles and increment flare counter ;;;
{
$9B:BFA5 08          PHP
$9B:BFA6 8B          PHB
$9B:BFA7 4B          PHK                    ;\
$9B:BFA8 AB          PLB                    ;} DB = $9B
$9B:BFA9 C2 30       REP #$30
$9B:BFAB 20 BD BF    JSR $BFBD  [$9B:BFBD]  ; Update grapple beam tiles
$9B:BFAE AD D0 0C    LDA $0CD0  [$7E:0CD0]  ;\
$9B:BFB1 C9 78 00    CMP #$0078             ;|
$9B:BFB4 10 04       BPL $04    [$BFBA]     ;} Flare counter = min(78h, [flare counter] + 1)
$9B:BFB6 1A          INC A                  ;|
$9B:BFB7 8D D0 0C    STA $0CD0  [$7E:0CD0]  ;/

$9B:BFBA AB          PLB
$9B:BFBB 28          PLP
$9B:BFBC 6B          RTL
}


;;; $BFBD: Update grapple beam tiles ;;;
{
$9B:BFBD AD 3E 0D    LDA $0D3E  [$7E:0D3E]  ;\
$9B:BFC0 3A          DEC A                  ;} Decrement grapple beam start animation timer
$9B:BFC1 8D 3E 0D    STA $0D3E  [$7E:0D3E]  ;/
$9B:BFC4 10 1B       BPL $1B    [$BFE1]     ; If [grapple beam start animation timer] < 0:
$9B:BFC6 A9 05 00    LDA #$0005             ;\
$9B:BFC9 8D 3E 0D    STA $0D3E  [$7E:0D3E]  ;} Grapple beam start animation timer = 5
$9B:BFCC AD 40 0D    LDA $0D40  [$7E:0D40]  ;\
$9B:BFCF 18          CLC                    ;|
$9B:BFD0 69 00 02    ADC #$0200             ;} Grapple beam start animation tile pointer += 200h
$9B:BFD3 8D 40 0D    STA $0D40  [$7E:0D40]  ;/
$9B:BFD6 CD 44 C3    CMP $C344  [$9B:C344]  ;\
$9B:BFD9 30 06       BMI $06    [$BFE1]     ;} If [grapple beam start animation tile pointer] >= $8A00:
$9B:BFDB AD 42 C3    LDA $C342  [$9B:C342]  ;\
$9B:BFDE 8D 40 0D    STA $0D40  [$7E:0D40]  ;} Grapple beam start animation tile pointer = $8200

$9B:BFE1 AE 30 03    LDX $0330  [$7E:0330]  ;\
$9B:BFE4 A9 20 00    LDA #$0020             ;|
$9B:BFE7 95 D0       STA $D0,x  [$7E:00D7]  ;|
$9B:BFE9 E8          INX                    ;|
$9B:BFEA E8          INX                    ;|
$9B:BFEB AD 40 0D    LDA $0D40  [$7E:0D40]  ;|
$9B:BFEE 95 D0       STA $D0,x  [$7E:00D9]  ;|
$9B:BFF0 E8          INX                    ;|
$9B:BFF1 E8          INX                    ;|
$9B:BFF2 E2 20       SEP #$20               ;} Queue transfer of 20h bytes from $9A:0000 + [grapple beam start animation tile pointer] to VRAM $6200
$9B:BFF4 A9 9A       LDA #$9A               ;|
$9B:BFF6 95 D0       STA $D0,x  [$7E:00DB]  ;|
$9B:BFF8 C2 20       REP #$20               ;|
$9B:BFFA E8          INX                    ;|
$9B:BFFB A9 00 62    LDA #$6200             ;|
$9B:BFFE 95 D0       STA $D0,x  [$7E:00DC]  ;|
$9B:C000 E8          INX                    ;|
$9B:C001 E8          INX                    ;|
$9B:C002 8E 30 03    STX $0330  [$7E:0330]  ;/
$9B:C005 AD FA 0C    LDA $0CFA  [$7E:0CFA]  ;\
$9B:C008 29 00 FF    AND #$FF00             ;|
$9B:C00B EB          XBA                    ;|
$9B:C00C 4A          LSR A                  ;} Y = [grapple beam end angle] / 100h / 4 * 2
$9B:C00D 29 FE 00    AND #$00FE             ;|
$9B:C010 A8          TAY                    ;/
$9B:C011 AE 30 03    LDX $0330  [$7E:0330]  ;\
$9B:C014 A9 80 00    LDA #$0080             ;|
$9B:C017 95 D0       STA $D0,x  [$7E:00DE]  ;|
$9B:C019 E8          INX                    ;|
$9B:C01A E8          INX                    ;|
$9B:C01B B9 46 C3    LDA $C346,y[$9B:C396]  ;|
$9B:C01E 95 D0       STA $D0,x  [$7E:00E0]  ;|
$9B:C020 E8          INX                    ;|
$9B:C021 E8          INX                    ;|
$9B:C022 E2 20       SEP #$20               ;} Queue transfer of 80h bytes from $9A:0000 + [$C346 + [Y]] to VRAM $6210
$9B:C024 A9 9A       LDA #$9A               ;|
$9B:C026 95 D0       STA $D0,x  [$7E:00E2]  ;|
$9B:C028 C2 20       REP #$20               ;|
$9B:C02A E8          INX                    ;|
$9B:C02B A9 10 62    LDA #$6210             ;|
$9B:C02E 95 D0       STA $D0,x  [$7E:00E3]  ;|
$9B:C030 E8          INX                    ;|
$9B:C031 E8          INX                    ;|
$9B:C032 8E 30 03    STX $0330  [$7E:0330]  ;/
$9B:C035 60          RTS
}


;;; $C036: Handle grapple beam flare ;;;
{
$9B:C036 08          PHP
$9B:C037 8B          PHB
$9B:C038 4B          PHK                    ;\
$9B:C039 AB          PLB                    ;} DB = $9B
$9B:C03A C2 30       REP #$30
$9B:C03C AD D0 0C    LDA $0CD0  [$7E:0CD0]  ;\
$9B:C03F D0 03       BNE $03    [$C044]     ;} If [flare counter] = 0:
$9B:C041 AB          PLB                    ;\
$9B:C042 28          PLP                    ;} Return
$9B:C043 6B          RTL                    ;/

$9B:C044 C9 01 00    CMP #$0001             ;\
$9B:C047 D0 0C       BNE $0C    [$C055]     ;} If [flare counter] = 1:
$9B:C049 A9 10 00    LDA #$0010             ;\
$9B:C04C 8D D6 0C    STA $0CD6  [$7E:0CD6]  ;} Flare animation frame = 10h
$9B:C04F A9 03 00    LDA #$0003             ;\
$9B:C052 8D DC 0C    STA $0CDC  [$7E:0CDC]  ;} Flare animation timer = 3

$9B:C055 AD DC 0C    LDA $0CDC  [$7E:0CDC]  ;\
$9B:C058 3A          DEC A                  ;} Decrement flare animation timer
$9B:C059 8D DC 0C    STA $0CDC  [$7E:0CDC]  ;/
$9B:C05C 10 34       BPL $34    [$C092]     ; If [flare animation timer] >= 0: go to BRANCH_POSITIVE
$9B:C05E AD D6 0C    LDA $0CD6  [$7E:0CD6]  ;\
$9B:C061 1A          INC A                  ;} Increment flare animation frame
$9B:C062 8D D6 0C    STA $0CD6  [$7E:0CD6]  ;/
$9B:C065 AA          TAX                    ;\
$9B:C066 BF 87 C4 90 LDA $90C487,x[$90:C498];|
$9B:C06A 29 FF 00    AND #$00FF             ;|
$9B:C06D C9 FE 00    CMP #$00FE             ;} If [$90:C487 + [flare animation frame]] = FEh:
$9B:C070 F0 02       BEQ $02    [$C074]     ;|
$9B:C072 80 14       BRA $14    [$C088]     ;/

$9B:C074 E8          INX                    ;\
$9B:C075 BF 87 C4 90 LDA $90C487,x[$90:C4A6];|
$9B:C079 29 FF 00    AND #$00FF             ;|
$9B:C07C 85 12       STA $12    [$7E:0012]  ;|
$9B:C07E AD D6 0C    LDA $0CD6  [$7E:0CD6]  ;} Flare animation frame -= [$90:C487 + [flare animation frame] + 1]
$9B:C081 38          SEC                    ;|
$9B:C082 E5 12       SBC $12    [$7E:0012]  ;|
$9B:C084 8D D6 0C    STA $0CD6  [$7E:0CD6]  ;|
$9B:C087 AA          TAX                    ;/

$9B:C088 BF 87 C4 90 LDA $90C487,x[$90:C498];\
$9B:C08C 29 FF 00    AND #$00FF             ;} Flare animation timer = [$90:C487 + [flare animation frame]]
$9B:C08F 8D DC 0C    STA $0CDC  [$7E:0CDC]  ;/

; BRANCH_POSITIVE
$9B:C092 AD 1E 0A    LDA $0A1E  [$7E:0A1E]  ;\
$9B:C095 29 FF 00    AND #$00FF             ;|
$9B:C098 C9 04 00    CMP #$0004             ;} If Samus is facing right:
$9B:C09B F0 0C       BEQ $0C    [$C0A9]     ;/
$9B:C09D AF 25 A2 93 LDA $93A225[$93:A225]  ;\
$9B:C0A1 18          CLC                    ;|
$9B:C0A2 6D D6 0C    ADC $0CD6  [$7E:0CD6]  ;|
$9B:C0A5 85 16       STA $16    [$7E:0016]  ;|
$9B:C0A7 80 0A       BRA $0A    [$C0B3]     ;|
                                            ;} $16 = [flare animation frame]
$9B:C0A9 AF 2B A2 93 LDA $93A22B[$93:A22B]  ;|
$9B:C0AD 18          CLC                    ;|
$9B:C0AE 6D D6 0C    ADC $0CD6  [$7E:0CD6]  ;|
$9B:C0B1 85 16       STA $16    [$7E:0016]  ;/

$9B:C0B3 AD 1A 0D    LDA $0D1A  [$7E:0D1A]  ;\
$9B:C0B6 38          SEC                    ;|
$9B:C0B7 ED 11 09    SBC $0911  [$7E:0911]  ;} Spritemap X position = [grapple beam flare X position] - [layer 1 X position]
$9B:C0BA 85 14       STA $14    [$7E:0014]  ;/
$9B:C0BC AD 1C 0D    LDA $0D1C  [$7E:0D1C]  ;\
$9B:C0BF 38          SEC                    ;|
$9B:C0C0 ED 15 09    SBC $0915  [$7E:0915]  ;} Spritemap Y position = [grapple beam flare Y position] - [layer 1 Y position]
$9B:C0C3 85 12       STA $12    [$7E:0012]  ;/
$9B:C0C5 29 00 FF    AND #$FF00             ;\
$9B:C0C8 D0 08       BNE $08    [$C0D2]     ;} If 0 <= [spritemap Y position] < 100h:
$9B:C0CA A5 16       LDA $16    [$7E:0016]  ; Spritemap table index = [$16]
$9B:C0CC 22 37 8A 81 JSL $818A37[$81:8A37]  ; Add spritemap from $93:A1A1 table to OAM
$9B:C0D0 80 06       BRA $06    [$C0D8]

$9B:C0D2 A5 16       LDA $16    [$7E:0016]  ;\ Else (not 0 <= [spritemap Y position] < 100h):
$9B:C0D4 22 B7 8A 81 JSL $818AB7[$81:8AB7]  ;} RTL

$9B:C0D8 AB          PLB
$9B:C0D9 28          PLP
$9B:C0DA 6B          RTL
}


;;; $C0DB: Grapple beam fire velocity table ;;;
{
; Indexed by [direction grapple is fired] * 2

;                        ______________________________________________ 0: Up, facing right
;                       |     _________________________________________ 1: Up-right
;                       |    |     ____________________________________ 2: Right
;                       |    |    |     _______________________________ 3: Down-right
;                       |    |    |    |     __________________________ 4: Down, facing right
;                       |    |    |    |    |     _____________________ 5: Down, facing left
;                       |    |    |    |    |    |     ________________ 6: Down-left
;                       |    |    |    |    |    |    |     ___________ 7: Left
;                       |    |    |    |    |    |    |    |     ______ 8: Up-left
;                       |    |    |    |    |    |    |    |    |     _ 9: Up, facing left
;                       |    |    |    |    |    |    |    |    |    |
$9B:C0DB             dw 0000,087C,0BF4,087C,0000,0000,F784,F40C,F784,0000 ; Grapple beam extension X velocity * 100h (must be multiple of 4)
$9B:C0EF             dw F40C,F784,0000,087C,0BF4,0BF4,087C,0000,F784,F40C ; Grapple beam extension Y velocity * 100h (must be multiple of 4)
}


;;; $C103: Unused ;;;
{
$9B:C103             db 80
}


;;; $C104: Grapple beam fire angles ;;;
{
; Indexed by [direction grapple is fired] * 2

;                        ______________________________________________ 0: Up, facing right
;                       |     _________________________________________ 1: Up-right
;                       |    |     ____________________________________ 2: Right
;                       |    |    |     _______________________________ 3: Down-right
;                       |    |    |    |     __________________________ 4: Down, facing right
;                       |    |    |    |    |     _____________________ 5: Down, facing left
;                       |    |    |    |    |    |     ________________ 6: Down-left
;                       |    |    |    |    |    |    |     ___________ 7: Left
;                       |    |    |    |    |    |    |    |     ______ 8: Up-left
;                       |    |    |    |    |    |    |    |    |     _ 9: Up, facing left
;                       |    |    |    |    |    |    |    |    |    |
$9B:C104             dw 8000,A000,C000,E000,0000,0000,2000,4000,6000,8000 ; Initial grapple beam end angle. Unit pi/8000h radians
}


;;; $C118: Grapple swing constants ;;;
{
$9B:C118             dw 0018 ; Grapple swing Samus base acceleration due to angle of swing
$9B:C11A             dw 000C ; Grapple swing Samus base acceleration due to button input
$9B:C11C             dw 0005 ; Grapple swing Samus base deceleration
$9B:C11E             dw 0480 ; Absolute grapple swing angular velocity
$9B:C120             dw 0300 ; Extra grapple swing angular velocity (for grapple kick)
}


;;; $C122: Grapple beam fire offsets ;;;
{
; Indexed by [direction grapple is fired] * 2

;                        ______________________________________________ 0: Up, facing right
;                       |     _________________________________________ 1: Up-right
;                       |    |     ____________________________________ 2: Right
;                       |    |    |     _______________________________ 3: Down-right
;                       |    |    |    |     __________________________ 4: Down, facing right
;                       |    |    |    |    |     _____________________ 5: Down, facing left
;                       |    |    |    |    |    |     ________________ 6: Down-left
;                       |    |    |    |    |    |    |     ___________ 7: Left
;                       |    |    |    |    |    |    |    |     ______ 8: Up-left
;                       |    |    |    |    |    |    |    |    |     _ 9: Up, facing left
;                       |    |    |    |    |    |    |    |    |    |
$9B:C122             dw 0002,000A,0002,000A,0003,FFFC,FFF6,FFFE,FFF6,FFFE ; Initial grapple beam origin X offset - not running
$9B:C136             dw FFF0,FFF4,0002,0000,0006,0006,0000,0002,FFF4,FFF0 ; Initial grapple beam origin Y offset - not running
$9B:C14A             dw 0002,0012,000F,0011,0003,FFFC,FFEF,FFF1,FFEE,FFFE ; Initial grapple beam flare X offset - not running
$9B:C15E             dw FFE4,FFED,0001,0006,0011,0011,0006,0001,FFEC,FFE4 ; Initial grapple beam flare Y offset - not running

$9B:C172             dw 0002,000A,0002,000A,0003,FFFC,FFF6,FFFE,FFF6,FFFE ; Initial grapple beam origin X offset - running
$9B:C186             dw FFF0,FFF4,FFFE,0000,0006,0006,0000,FFFE,FFF4,FFF0 ; Initial grapple beam origin Y offset - running
$9B:C19A             dw 0002,0013,0014,0012,0003,FFFC,FFEE,FFEC,FFED,FFFE ; Initial grapple beam flare X offset - running
$9B:C1AE             dw FFE0,FFEA,FFFD,0006,0019,0019,0006,FFFD,FFEC,FFE0 ; Initial grapple beam flare X offset - running
}


;;; $C1C2: Grapple swing Samus X/Y offsets ;;;
{
; Indices into $C2C2/C302 tables. Indexed by [grapple beam end angle] / 100h
$9B:C1C2             db 00, 00, 00, 00, 01, 01, 01, 01, 01, 01, 01, 01, 02, 02, 02, 02,
                        02, 02, 02, 02, 03, 03, 03, 03, 03, 03, 03, 03, 04, 04, 04, 04,
                        04, 04, 04, 04, 05, 05, 05, 05, 05, 05, 05, 05, 06, 06, 06, 06,
                        06, 06, 06, 06, 07, 07, 07, 07, 07, 07, 07, 07, 08, 08, 08, 08,
                        08, 08, 08, 08, 09, 09, 09, 09, 09, 09, 09, 09, 0A, 0A, 0A, 0A,
                        0A, 0A, 0A, 0A, 0B, 0B, 0B, 0B, 0B, 0B, 0B, 0B, 0C, 0C, 0C, 0C,
                        0C, 0C, 0C, 0C, 0D, 0D, 0D, 0D, 0D, 0D, 0D, 0D, 0E, 0E, 0E, 0E,
                        0E, 0E, 0E, 0E, 0F, 0F, 0F, 0F, 0F, 0F, 0F, 0F, 10, 10, 10, 10,
                        10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12,
                        12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14,
                        14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 15, 15, 16, 16, 16, 16,
                        16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18,
                        18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 1A, 1A, 1A, 1A,
                        1A, 1A, 1A, 1A, 1B, 1B, 1B, 1B, 1B, 1B, 1B, 1B, 1C, 1C, 1C, 1C,
                        1C, 1C, 1C, 1C, 1D, 1D, 1D, 1D, 1D, 1D, 1D, 1D, 1E, 1E, 1E, 1E,
                        1E, 1E, 1E, 1E, 1F, 1F, 1F, 1F, 1F, 1F, 1F, 1F, 00, 00, 00, 00

; X/Y offsets of Samus from grapple beam start position

; Swinging left
$9B:C2C2             db 00,F1, 07,F2, 0C,F5, 12,F6, 16,FA, 1A,02, 1D,05, 1F,0A, 1F,11, 1E,16, 1B,1B, 1A,1F, 15,26, 10,29, 10,2C, 08,2E,
                        00,2F, F9,2E, F4,2B, EE,2A, EA,26, E6,1E, E3,1B, E1,16, E1,0F, E2,0A, E5,05, E6,01, EB,FA, F0,F7, F0,F4, F8,F2

; Swinging right
$9B:C302             db 00,F2, 09,F3, 10,F6, 12,F8, 15,FB, 1A,02, 1C,06, 1E,0A, 1E,10, 1E,17, 1B,1C, 1A,21, 15,25, 10,29, 0B,2B, 05,2D,
                        00,2E, F7,2D, F0,2A, EE,28, EB,25, E6,1E, E4,1A, E2,16, E1,0F, E2,09, E5,04, E6,FF, EB,FB, F0,F7, F5,F5, FB,F3
}


;;; $C342: Grapple beam start tiles begin/end pointers ;;;
{
; Bank $9A
$9B:C342             dw 8200
$9B:C344             dw 8A00
}


;;; $C346: Grapple beam tiles pointers ;;;
{
; Bank $9A
$9B:C346             dw 9220, 9220, 9220, 8A20, 8A20, 8A20, 8A20, 8A20, 8A20, 8A20, 8A20, 8220, 8220, 8220, 8220, 8220,
                        8220, 8220, 8220, 8220, 8220, 8A20, 8A20, 8A20, 8A20, 8A20, 8A20, 8A20, 8A20, 9220, 9220, 9220,
                        9220, 9220, 9220, 8A20, 8A20, 8A20, 8A20, 8A20, 8A20, 8A20, 8A20, 8220, 8220, 8220, 8220, 8220,
                        8220, 8220, 8220, 8220, 8220, 8A20, 8A20, 8A20, 8A20, 8A20, 8A20, 8A20, 8A20, 9220, 9220, 9220
}


;;; $C3C6: Connecting to grapple block pointer table ;;;
{
; Indexed by [direction grapple is fired] * 4.
; Next grapple beam functions:
;     $C77E: Connected - locked in place
;     $C79D: Connected - swinging

;                        ________ Next grapple beam function
;                       |     ___ Function to execute
;                       |    |
; Default
$9B:C3C6             dw C79D,B9D9, ; 0: Up, facing right
                        C79D,B9D9, ; 1: Up-right
                        C77E,B9EA, ; 2: Right
                        C77E,B9F3, ; 3: Down-right
                        C77E,B9FC, ; 4: Down, facing right
                        C77E,B9FC, ; 5: Down, facing left
                        C77E,B9FC, ; 6: Down-left
                        C77E,BA05, ; 7: Left
                        C79D,B9E2, ; 8: Up-left
                        C79D,B9E2  ; 9: Up, facing left

; Moving vertically
$9B:C3EE             dw C79D,B9D9, ; 0: Up, facing right
                        C79D,B9D9, ; 1: Up-right
                        C79D,B9D9, ; 2: Right
                        C79D,B9D9, ; 3: Down-right
                        C79D,B9D9, ; 4: Down, facing right
                        C79D,B9E2, ; 5: Down, facing left
                        C79D,B9E2, ; 6: Down-left
                        C79D,B9E2, ; 7: Left
                        C79D,B9E2, ; 8: Up-left
                        C79D,B9E2  ; 9: Up, facing left

; Crouching
$9B:C416             dw C79D,B9D9, ; 0: Up, facing right
                        C79D,B9D9, ; 1: Up-right
                        C77E,BA0E, ; 2: Right
                        C77E,BA17, ; 3: Down-right
                        C77E,B9FC, ; 4: Down, facing right
                        C77E,B9FC, ; 5: Down, facing left
                        C77E,BA20, ; 6: Down-left
                        C77E,BA29, ; 7: Left
                        C79D,B9E2, ; 8: Up-left
                        C79D,B9E2  ; 9: Up, facing left
}


;;; $C43E: Grapple beam special angles ;;;
{
; Samus poses:
;     B6h: Facing right - grappling - crouching - aiming down-right
;     B7h: Facing left  - grappling - crouching - aiming down-left
;     B8h: Facing left  - grapple wall jump pose
;     B9h: Facing right - grapple wall jump pose

; Grapple functions
;     C77E: Connected - locked in place
;     C814: Wallgrab

;                        _______________________ Angle. Unit pi/8000h radians
;                       |     __________________ Samus pose
;                       |    |     _____________ X offset
;                       |    |    |     ________ Y offset
;                       |    |    |    |     ___ Grapple function
;                       |    |    |    |    |
$9B:C43E             dw D680,00B6,FFE2,FFE8,C77E,
                        2A80,00B7,001E,FFE8,C77E,
                        B380,00B6,FFE4,FFF8,C77E,
                        4D80,00B7,001C,FFF8,C77E,
                        6A80,00B9,0018,0010,C814,
                        9680,00B8,FFE8,0010,C814,
                        7380,00B8,FFF8,0010,C814,
                        8D80,00B9,0008,0010,C814
}


;;; $C48E: Unused ;;;
{
$9B:C48E             db 20, 3A
}


;;; $C490: Grapple beam handler ;;;
{
$9B:C490 08          PHP
$9B:C491 8B          PHB
$9B:C492 4B          PHK                    ;\
$9B:C493 AB          PLB                    ;} DB = $9B
$9B:C494 C2 30       REP #$30
$9B:C496 AD F6 0C    LDA $0CF6  [$7E:0CF6]  ;\
$9B:C499 F0 04       BEQ $04    [$C49F]     ;|
$9B:C49B 3A          DEC A                  ;} Grapple pose change auto-fire timer = max(0, [grapple pose change auto-fire timer] - 1)
$9B:C49C 8D F6 0C    STA $0CF6  [$7E:0CF6]  ;/

$9B:C49F AD 64 0A    LDA $0A64  [$7E:0A64]  ;\
$9B:C4A2 29 FE FF    AND #$FFFE             ;} Set grapple as not connected
$9B:C4A5 8D 64 0A    STA $0A64  [$7E:0A64]  ;/
$9B:C4A8 20 61 B8    JSR $B861  [$9B:B861]  ; Cancel grapple beam if in incompatible pose
$9B:C4AB F4 B0 C4    PEA $C4B0              ;\
$9B:C4AE 6C 32 0D    JMP ($0D32)[$9B:C4F0]  ;} Execute [grapple beam function]

$9B:C4B1 AD 32 0D    LDA $0D32  [$7E:0D32]  ;\
$9B:C4B4 C9 F0 C4    CMP #$C4F0             ;|
$9B:C4B7 F0 2B       BEQ $2B    [$C4E4]     ;} If [grapple beam function] != inactive:
$9B:C4B9 C9 56 C8    CMP #$C856             ;|
$9B:C4BC 10 26       BPL $26    [$C4E4]     ;/
$9B:C4BE AD 74 0A    LDA $0A74  [$7E:0A74]  ;\
$9B:C4C1 89 04 00    BIT #$0004             ;} If [Samus suit palette index] != gravity suit:
$9B:C4C4 D0 1E       BNE $1E    [$C4E4]     ;/
$9B:C4C6 AD 6E 19    LDA $196E  [$7E:196E]  ;\
$9B:C4C9 F0 19       BEQ $19    [$C4E4]     ;} If [FX type] != none:
$9B:C4CB 22 58 EC 90 JSL $90EC58[$90:EC58]  ; $12 = Samus bottom boundary
$9B:C4CF AD 5E 19    LDA $195E  [$7E:195E]  ;\
$9B:C4D2 30 10       BMI $10    [$C4E4]     ;} If [FX Y position] >= 0:
$9B:C4D4 C5 12       CMP $12    [$7E:0012]  ;\
$9B:C4D6 10 0C       BPL $0C    [$C4E4]     ;} If [FX Y position] < [Samus bottom boundary]:
$9B:C4D8 AD F4 0C    LDA $0CF4  [$7E:0CF4]  ;\
$9B:C4DB 09 01 00    ORA #$0001             ;} Set grapple beam liquid physics
$9B:C4DE 8D F4 0C    STA $0CF4  [$7E:0CF4]  ;/
$9B:C4E1 AB          PLB
$9B:C4E2 28          PLP
$9B:C4E3 6B          RTL                    ; Return

$9B:C4E4 AD F4 0C    LDA $0CF4  [$7E:0CF4]  ;\
$9B:C4E7 29 FE FF    AND #$FFFE             ;} Clear grapple beam liquid physics
$9B:C4EA 8D F4 0C    STA $0CF4  [$7E:0CF4]  ;/
$9B:C4ED AB          PLB
$9B:C4EE 28          PLP
$9B:C4EF 6B          RTL
}


;;; $C4F0..CBFA: Grapple beam functions ;;;
{
;;; $C4F0: Grapple beam function - inactive ;;;
{
$9B:C4F0 A5 8F       LDA $8F    [$7E:008F]  ;\
$9B:C4F2 2C B2 09    BIT $09B2  [$7E:09B2]  ;} If newly pressed shoot: go to grapple beam function - fire / go to cancel
$9B:C4F5 D0 27       BNE $27    [$C51E]     ;/
$9B:C4F7 AD 00 0E    LDA $0E00  [$7E:0E00]  ;\
$9B:C4FA 2C B2 09    BIT $09B2  [$7E:09B2]  ;} If previously newly pressed shoot: go to grapple beam function - fire / go to cancel
$9B:C4FD D0 1F       BNE $1F    [$C51E]     ;/
$9B:C4FF AD D0 0C    LDA $0CD0  [$7E:0CD0]  ;\
$9B:C502 F0 19       BEQ $19    [$C51D]     ;} If [flare counter] != 0:
$9B:C504 9C D0 0C    STZ $0CD0  [$7E:0CD0]  ; Flare counter = 0
$9B:C507 9C D6 0C    STZ $0CD6  [$7E:0CD6]  ;\
$9B:C50A 9C D8 0C    STZ $0CD8  [$7E:0CD8]  ;} Charge beam animation frames = 0
$9B:C50D 9C DA 0C    STZ $0CDA  [$7E:0CDA]  ;/
$9B:C510 9C DC 0C    STZ $0CDC  [$7E:0CDC]  ;\
$9B:C513 9C DE 0C    STZ $0CDE  [$7E:0CDE]  ;} Charge beam animation delays = 0
$9B:C516 9C E0 0C    STZ $0CE0  [$7E:0CE0]  ;/
$9B:C519 22 BA DE 91 JSL $91DEBA[$91:DEBA]  ; Load Samus suit palette

$9B:C51D 60          RTS
}


;;; $C51E: Grapple beam function - fire / go to cancel ;;;
{
; Act as if fire was just pressed. This is often used to *cancel* the beam during no-fire conditions
$9B:C51E AD 1C 0A    LDA $0A1C  [$7E:0A1C]  ;\
$9B:C521 C9 F0 00    CMP #$00F0             ;|
$9B:C524 F0 25       BEQ $25    [$C54B]     ;} If [Samus pose] = grabbed by Draygon - moving: go to BRANCH_DRAYGON
$9B:C526 C9 BE 00    CMP #$00BE             ;|
$9B:C529 F0 20       BEQ $20    [$C54B]     ;/
$9B:C52B 0A          ASL A                  ;\
$9B:C52C 0A          ASL A                  ;|
$9B:C52D 0A          ASL A                  ;|
$9B:C52E AA          TAX                    ;} $16 = (Y offset of Samus projectile origin)
$9B:C52F BF 2D B6 91 LDA $91B62D,x[$91:B975];|
$9B:C533 29 FF 00    AND #$00FF             ;|
$9B:C536 85 16       STA $16    [$7E:0016]  ;/
$9B:C538 BF 2C B6 91 LDA $91B62C,x[$91:B974];\
$9B:C53C 29 FF 00    AND #$00FF             ;} A = (direction shots are fired)
$9B:C53F 89 F0 00    BIT #$00F0             ;\
$9B:C542 F0 0C       BEQ $0C    [$C550]     ;} If (direction shots are fired) & F0h = 0: go to BRANCH_FIRE

$9B:C544 A9 56 C8    LDA #$C856             ;\
$9B:C547 8D 32 0D    STA $0D32  [$7E:0D32]  ;} Grapple beam function = cancel
$9B:C54A 60          RTS                    ; Return

; BRANCH_DRAYGON
$9B:C54B 20 B2 C6    JSR $C6B2  [$9B:C6B2]  ; A = direction grapple is fired when held by Draygon
$9B:C54E 90 F4       BCC $F4    [$C544]     ; Branch cannot be taken

; BRANCH_FIRE
$9B:C550 8D 34 0D    STA $0D34  [$7E:0D34]  ; Direction grapple is fired = [A]
$9B:C553 0A          ASL A                  ;\
$9B:C554 AA          TAX                    ;} X = [direction grapple is fired] * 2
$9B:C555 BD DB C0    LDA $C0DB,x[$9B:C0DD]  ;\
$9B:C558 8D 22 0D    STA $0D22  [$7E:0D22]  ;} Grapple beam extension X velocity = [$C0DB + [X]] / 100h
$9B:C55B BD EF C0    LDA $C0EF,x[$9B:C0F1]  ;\
$9B:C55E 8D 24 0D    STA $0D24  [$7E:0D24]  ;} Grapple beam extension Y velocity = [$C0EF + [X]] / 100h
$9B:C561 BD 04 C1    LDA $C104,x[$9B:C106]  ;\
$9B:C564 8D FA 0C    STA $0CFA  [$7E:0CFA]  ;} Grapple beam end angle = [$C104 + [X]]
$9B:C567 8D FC 0C    STA $0CFC  [$7E:0CFC]  ;/
$9B:C56A A9 0A 00    LDA #$000A             ;\
$9B:C56D 8D F6 0C    STA $0CF6  [$7E:0CF6]  ;} Grapple pose change auto-fire timer = Ah
$9B:C570 AD 1C 0A    LDA $0A1C  [$7E:0A1C]  ;\
$9B:C573 C9 49 00    CMP #$0049             ;|
$9B:C576 F0 10       BEQ $10    [$C588]     ;} If [Samus pose] != moonwalk:
$9B:C578 C9 4A 00    CMP #$004A             ;|
$9B:C57B F0 0B       BEQ $0B    [$C588]     ;/
$9B:C57D AD 1F 0A    LDA $0A1F  [$7E:0A1F]  ;\
$9B:C580 29 FF 00    AND #$00FF             ;|
$9B:C583 C9 01 00    CMP #$0001             ;} If [Samus movement type] = running: go to BRANCH_RUNNING
$9B:C586 F0 40       BEQ $40    [$C5C8]     ;/

; Samus is moonwalking or not running
$9B:C588 BD 22 C1    LDA $C122,x[$9B:C124]  ;\
$9B:C58B 8D 02 0D    STA $0D02  [$7E:0D02]  ;} Grapple beam origin X offset = [$C122 + [X]]
$9B:C58E BD 36 C1    LDA $C136,x[$9B:C138]  ;\
$9B:C591 38          SEC                    ;|
$9B:C592 E5 16       SBC $16    [$7E:0016]  ;} Grapple beam origin Y offset = [$C136 + [X]] - (Y offset of Samus projectile origin)
$9B:C594 8D 04 0D    STA $0D04  [$7E:0D04]  ;/
$9B:C597 AD F6 0A    LDA $0AF6  [$7E:0AF6]  ;\
$9B:C59A 48          PHA                    ;|
$9B:C59B 18          CLC                    ;} Grapple beam end X position = [Samus X position] + [grapple beam origin X offset]
$9B:C59C 7D 22 C1    ADC $C122,x[$9B:C124]  ;|
$9B:C59F 8D 08 0D    STA $0D08  [$7E:0D08]  ;/
$9B:C5A2 8D 16 0D    STA $0D16  [$7E:0D16]  ; Grapple beam start X position = [grapple beam end X position]
$9B:C5A5 68          PLA                    ;\
$9B:C5A6 18          CLC                    ;|
$9B:C5A7 7D 4A C1    ADC $C14A,x[$9B:C14C]  ;} Grapple beam flare X position = [Samus X position] + [$C14A + [X]]
$9B:C5AA 8D 1A 0D    STA $0D1A  [$7E:0D1A]  ;/
$9B:C5AD AD FA 0A    LDA $0AFA  [$7E:0AFA]  ;\
$9B:C5B0 38          SEC                    ;|
$9B:C5B1 E5 16       SBC $16    [$7E:0016]  ;|
$9B:C5B3 48          PHA                    ;} Grapple beam end Y position = [Samus Y position] + [grapple beam origin Y offset]
$9B:C5B4 18          CLC                    ;|
$9B:C5B5 7D 36 C1    ADC $C136,x[$9B:C138]  ;|
$9B:C5B8 8D 0C 0D    STA $0D0C  [$7E:0D0C]  ;/
$9B:C5BB 8D 18 0D    STA $0D18  [$7E:0D18]  ; Grapple beam start Y position = [grapple beam end Y position]
$9B:C5BE 68          PLA                    ;\
$9B:C5BF 18          CLC                    ;|
$9B:C5C0 7D 5E C1    ADC $C15E,x[$9B:C160]  ;} Grapple beam flare Y position = [Samus Y position] - (Y offset of Samus projectile origin) + [$C15E + [X]]
$9B:C5C3 8D 1C 0D    STA $0D1C  [$7E:0D1C]  ;/
$9B:C5C6 80 3E       BRA $3E    [$C606]     ; Go to BRANCH_MERGE

; BRANCH_RUNNING
$9B:C5C8 BD 72 C1    LDA $C172,x[$9B:C182]  ;\
$9B:C5CB 8D 02 0D    STA $0D02  [$7E:0D02]  ;} Grapple beam origin X offset = [$C172 + [X]]
$9B:C5CE BD 86 C1    LDA $C186,x[$9B:C196]  ;\
$9B:C5D1 38          SEC                    ;|
$9B:C5D2 E5 16       SBC $16    [$7E:0016]  ;} Grapple beam origin Y offset = [$C186 + [X]] - (Y offset of Samus projectile origin)
$9B:C5D4 8D 04 0D    STA $0D04  [$7E:0D04]  ;/
$9B:C5D7 AD F6 0A    LDA $0AF6  [$7E:0AF6]  ;\
$9B:C5DA 48          PHA                    ;|
$9B:C5DB 18          CLC                    ;} Grapple beam end X position = [Samus X position] + [grapple beam origin X offset]
$9B:C5DC 7D 72 C1    ADC $C172,x[$9B:C182]  ;|
$9B:C5DF 8D 08 0D    STA $0D08  [$7E:0D08]  ;/
$9B:C5E2 8D 16 0D    STA $0D16  [$7E:0D16]  ; Grapple beam start X position = [grapple beam end X position]
$9B:C5E5 68          PLA                    ;\
$9B:C5E6 18          CLC                    ;|
$9B:C5E7 7D 9A C1    ADC $C19A,x[$9B:C1AA]  ;} Grapple beam flare X position = [Samus X position] + [$C19A + [X]]
$9B:C5EA 8D 1A 0D    STA $0D1A  [$7E:0D1A]  ;/
$9B:C5ED AD FA 0A    LDA $0AFA  [$7E:0AFA]  ;\
$9B:C5F0 38          SEC                    ;|
$9B:C5F1 E5 16       SBC $16    [$7E:0016]  ;|
$9B:C5F3 48          PHA                    ;} Grapple beam end Y position = [Samus Y position] + [grapple beam origin Y offset]
$9B:C5F4 18          CLC                    ;|
$9B:C5F5 7D 86 C1    ADC $C186,x[$9B:C196]  ;|
$9B:C5F8 8D 0C 0D    STA $0D0C  [$7E:0D0C]  ;/
$9B:C5FB 8D 18 0D    STA $0D18  [$7E:0D18]  ; Grapple beam start Y position = [grapple beam end Y position]
$9B:C5FE 68          PLA                    ;\
$9B:C5FF 18          CLC                    ;|
$9B:C600 7D AE C1    ADC $C1AE,x[$9B:C1BE]  ;} Grapple beam flare Y position = [Samus Y position] - (Y offset of Samus projectile origin) + [$C1AE + [X]]
$9B:C603 8D 1C 0D    STA $0D1C  [$7E:0D1C]  ;/

; BRANCH_MERGE
$9B:C606 9C 06 0D    STZ $0D06  [$7E:0D06]  ; Grapple beam end X subposition = 0
$9B:C609 9C 0A 0D    STZ $0D0A  [$7E:0D0A]  ; Grapple beam end Y subposition = 0
$9B:C60C 9C 0E 0D    STZ $0D0E  [$7E:0D0E]  ; Grapple beam end X suboffset = 0
$9B:C60F 9C 10 0D    STZ $0D10  [$7E:0D10]  ; Grapple beam end X offset = 0
$9B:C612 9C 12 0D    STZ $0D12  [$7E:0D12]  ; Grapple beam end Y suboffset = 0
$9B:C615 9C 14 0D    STZ $0D14  [$7E:0D14]  ; Grapple beam end Y offset = 0
$9B:C618 9C F4 0C    STZ $0CF4  [$7E:0CF4]  ; Grapple beam flags = 0
$9B:C61B A9 0C 00    LDA #$000C             ;\
$9B:C61E 8D 00 0D    STA $0D00  [$7E:0D00]  ;} Grapple beam length delta = Ch
$9B:C621 9C FE 0C    STZ $0CFE  [$7E:0CFE]  ; Grapple beam length = 0
$9B:C624 9C 26 0D    STZ $0D26  [$7E:0D26]  ; Grapple swing angular velocity = 0
$9B:C627 9C 28 0D    STZ $0D28  [$7E:0D28]  ; Grapple swing angular acceleration due to angle of swing = 0
$9B:C62A 9C 2A 0D    STZ $0D2A  [$7E:0D2A]  ; Grapple swing angular acceleration due to button input = 0
$9B:C62D 9C 2C 0D    STZ $0D2C  [$7E:0D2C]  ; Grapple swing angular deceleration = 0
$9B:C630 9C 2E 0D    STZ $0D2E  [$7E:0D2E]  ; Extra grapple swing angular velocity = 0
$9B:C633 9C 30 0D    STZ $0D30  [$7E:0D30]  ; Grapple kick cooldown timer = 0
$9B:C636 9C 1E 0D    STZ $0D1E  [$7E:0D1E]  ; $0D1E = 0 (unused)
$9B:C639 9C 20 0D    STZ $0D20  [$7E:0D20]  ; $0D20 = 0 (unused)
$9B:C63C A9 02 00    LDA #$0002             ;\
$9B:C63F 8D 3A 0D    STA $0D3A  [$7E:0D3A]  ;} $0D3A = 2 (unused)
$9B:C642 9C 3C 0D    STZ $0D3C  [$7E:0D3C]  ; $0D3C = 0 (unused)
$9B:C645 A9 05 00    LDA #$0005             ;\
$9B:C648 8D 3E 0D    STA $0D3E  [$7E:0D3E]  ;} Grapple beam start animation timer = 5
$9B:C64B AD 42 C3    LDA $C342  [$9B:C342]  ;\
$9B:C64E 8D 40 0D    STA $0D40  [$7E:0D40]  ;} Grapple beam start animation tile pointer = $8200
$9B:C651 9C 82 0D    STZ $0D82  [$7E:0D82]  ;\
$9B:C654 9C 84 0D    STZ $0D84  [$7E:0D84]  ;|
$9B:C657 9C 86 0D    STZ $0D86  [$7E:0D86]  ;|
$9B:C65A 9C 88 0D    STZ $0D88  [$7E:0D88]  ;|
$9B:C65D 9C 8A 0D    STZ $0D8A  [$7E:0D8A]  ;} $0D82..91 = 0 (grapple beam collision temporaries)
$9B:C660 9C 8C 0D    STZ $0D8C  [$7E:0D8C]  ;|
$9B:C663 9C 8E 0D    STZ $0D8E  [$7E:0D8E]  ;|
$9B:C666 9C 90 0D    STZ $0D90  [$7E:0D90]  ;/
$9B:C669 9C 38 0D    STZ $0D38  [$7E:0D38]  ; Failed grapple swing movement counter = 0
$9B:C66C 9C 36 0D    STZ $0D36  [$7E:0D36]  ; Disable special grapple beam angle handling
$9B:C66F 9C F8 0C    STZ $0CF8  [$7E:0CF8]  ; Slow grapple scrolling flag = 0
$9B:C672 22 87 AF 94 JSL $94AF87[$94:AF87]  ; Initialise grapple segment animations
$9B:C676 A9 86 EB    LDA #$EB86             ;\
$9B:C679 8D 5C 0A    STA $0A5C  [$7E:0A5C]  ;} Samus drawing handler = firing grapple beam
$9B:C67C 9C 9E 0A    STZ $0A9E  [$7E:0A9E]  ; Grapple walljump timer = 0
$9B:C67F A9 02 00    LDA #$0002             ;\
$9B:C682 22 F0 AC 90 JSL $90ACF0[$90:ACF0]  ;} Load ice beam palette
$9B:C686 A9 91 7F    LDA #$7F91             ;\
$9B:C689 8F BE C1 7E STA $7EC1BE[$7E:C1BE]  ;} Sprite palette 5 colour Fh = 7F91h
$9B:C68D A9 03 C7    LDA #$C703             ;\
$9B:C690 8D 32 0D    STA $0D32  [$7E:0D32]  ;} Grapple beam function = firing
$9B:C693 A9 05 00    LDA #$0005             ;\
$9B:C696 22 3F 90 80 JSL $80903F[$80:903F]  ;} Queue sound 5, sound library 1, max queued sounds allowed = 1 (grapple start)
$9B:C69A A9 01 00    LDA #$0001             ;\
$9B:C69D 8D D0 0C    STA $0CD0  [$7E:0CD0]  ;} Beam charge counter = 1
$9B:C6A0 9C C0 0D    STZ $0DC0  [$7E:0DC0]  ; Resume charging beam sound effect flag = 0
$9B:C6A3 AD 58 0A    LDA $0A58  [$7E:0A58]  ;\
$9B:C6A6 C9 6E 94    CMP #$946E             ;} If [Samus movement handler] = $946E (released from grapple swing):
$9B:C6A9 D0 06       BNE $06    [$C6B1]     ;/
$9B:C6AB A9 37 A3    LDA #$A337             ;\
$9B:C6AE 8D 58 0A    STA $0A58  [$7E:0A58]  ;} Samus movement handler = $A337 (normal)

$9B:C6B1 60          RTS
}


;;; $C6B2: A = direction grapple is fired when held by Draygon ;;;
{
;; Parameters:
;;     A: Samus pose
;; Returns:
;;     Carry: Set
;;     A: Direction grapple is fired
;;     $16: 6. Y offset of Samus projectile origin

; Gets directions for Samus aiming when held by Draygon
$9B:C6B2 C9 BE 00    CMP #$00BE             ;\
$9B:C6B5 F0 25       BEQ $25    [$C6DC]     ;} If [Samus pose] = facing left - grabbed by Draygon - moving: go to BRANCH_FACING_LEFT
$9B:C6B7 A9 06 00    LDA #$0006             ;\
$9B:C6BA 85 16       STA $16    [$7E:0016]  ;} $16 = 6
$9B:C6BC A5 8B       LDA $8B    [$7E:008B]  ;\
$9B:C6BE 89 00 01    BIT #$0100             ;} If pressing right: go to BRANCH_RIGHT
$9B:C6C1 F0 0A       BEQ $0A    [$C6CD]     ;/
$9B:C6C3 89 00 04    BIT #$0400             ;\
$9B:C6C6 D0 0F       BNE $0F    [$C6D7]     ;} If pressing down: go to BRANCH_DOWN_RIGHT
$9B:C6C8 89 00 08    BIT #$0800             ;\
$9B:C6CB D0 05       BNE $05    [$C6D2]     ;} If pressing up: go to BRANCH_UP_RIGHT

; BRANCH_RIGHT
$9B:C6CD A9 02 00    LDA #$0002             ; A = 2
$9B:C6D0 38          SEC                    ;\
$9B:C6D1 60          RTS                    ;} Return carry set

; BRANCH_UP_RIGHT
$9B:C6D2 A9 01 00    LDA #$0001             ; A = 1
$9B:C6D5 38          SEC                    ;\
$9B:C6D6 60          RTS                    ;} Return carry set

; BRANCH_DOWN_RIGHT
$9B:C6D7 A9 03 00    LDA #$0003             ; A = 3
$9B:C6DA 38          SEC                    ;\
$9B:C6DB 60          RTS                    ;} Return carry set

; BRANCH_FACING_LEFT
$9B:C6DC A9 06 00    LDA #$0006             ;\
$9B:C6DF 85 16       STA $16    [$7E:0016]  ;} $16 = 6
$9B:C6E1 A5 8B       LDA $8B    [$7E:008B]  ;\
$9B:C6E3 89 00 02    BIT #$0200             ;} If pressing left: go to BRANCH_LEFT
$9B:C6E6 F0 0A       BEQ $0A    [$C6F2]     ;/
$9B:C6E8 89 00 04    BIT #$0400             ;\
$9B:C6EB D0 0F       BNE $0F    [$C6FC]     ;} If pressing down: go to BRANCH_DOWN_LEFT
$9B:C6ED 89 00 08    BIT #$0800             ;\
$9B:C6F0 D0 05       BNE $05    [$C6F7]     ;} If pressing up: go to BRANCH_UP_LEFT

; BRANCH_LEFT
$9B:C6F2 A9 07 00    LDA #$0007             ; A = 7
$9B:C6F5 38          SEC                    ;\
$9B:C6F6 60          RTS                    ;} Return carry set

; BRANCH_UP_LEFT
$9B:C6F7 A9 08 00    LDA #$0008             ; A = 8
$9B:C6FA 38          SEC                    ;\
$9B:C6FB 60          RTS                    ;} Return carry set

; BRANCH_DOWN_LEFT
$9B:C6FC A9 06 00    LDA #$0006             ; A = 6
$9B:C6FF 38          SEC                    ;\
$9B:C700 60          RTS                    ;} Return carry set

; Nothing points here
$9B:C701 18          CLC
$9B:C702 60          RTS
}


;;; $C703: Grapple beam function - firing ;;;
{
$9B:C703 A5 8B       LDA $8B    [$7E:008B]  ;\
$9B:C705 2C B2 09    BIT $09B2  [$7E:09B2]  ;} If pressing shoot: go to BRANCH_FIRING
$9B:C708 D0 07       BNE $07    [$C711]     ;/

; BRANCH_CANCEL
$9B:C70A A9 56 C8    LDA #$C856             ;\
$9B:C70D 8D 32 0D    STA $0D32  [$7E:0D32]  ;} Grapple beam function = cancel
$9B:C710 60          RTS                    ; Return

; BRANCH_FIRING
$9B:C711 20 D4 B8    JSR $B8D4  [$9B:B8D4]  ; RTS
$9B:C714 AD FE 0C    LDA $0CFE  [$7E:0CFE]  ;\
$9B:C717 18          CLC                    ;|
$9B:C718 6D 00 0D    ADC $0D00  [$7E:0D00]  ;} Grapple beam length += [grapple beam length delta]
$9B:C71B 8D FE 0C    STA $0CFE  [$7E:0CFE]  ;/
$9B:C71E C9 80 00    CMP #$0080             ;\
$9B:C721 30 02       BMI $02    [$C725]     ;} If [grapple beam length] >= 80h:
$9B:C723 80 E5       BRA $E5    [$C70A]     ; Go to BRANCH_CANCEL

$9B:C725 22 9A 9E A0 JSL $A09E9A[$A0:9E9A]  ; Enemy / grapple beam collision detection
$9B:C729 20 07 B9    JSR $B907  [$9B:B907]  ; Process enemy / grapple beam collision result
$9B:C72C 90 05       BCC $05    [$C733]     ; If carry set:
$9B:C72E A8          TAY                    ;\
$9B:C72F D0 F2       BNE $F2    [$C723]     ;} If [A] != 0: go to BRANCH_CANCEL
$9B:C731 80 08       BRA $08    [$C73B]

$9B:C733 22 5B A8 94 JSL $94A85B[$94:A85B]  ; Grapple beam block collision handling
$9B:C737 90 1F       BCC $1F    [$C758]     ; If no collision: return
$9B:C739 50 E8       BVC $E8    [$C723]     ; If grapple beam cancelled: go to BRANCH_CANCEL

$9B:C73B A9 06 00    LDA #$0006             ;\
$9B:C73E 22 49 90 80 JSL $809049[$80:9049]  ;} Queue sound 6, sound library 1, max queued sounds allowed = 6 (grappling)
$9B:C742 20 7C B9    JSR $B97C  [$9B:B97C]  ; Handle connecting grapple
$9B:C745 A9 08 00    LDA #$0008             ;\
$9B:C748 49 FF FF    EOR #$FFFF             ;|
$9B:C74B 1A          INC A                  ;} Grapple beam length delta = -8
$9B:C74C 8D 00 0D    STA $0D00  [$7E:0D00]  ;/
$9B:C74F AD 64 0A    LDA $0A64  [$7E:0A64]  ;\
$9B:C752 09 01 00    ORA #$0001             ;} Set grapple as connected
$9B:C755 8D 64 0A    STA $0A64  [$7E:0A64]  ;/

$9B:C758 60          RTS
}


;;; $C759: Unused. Grapple beam function - unfiring ;;;
{
$9B:C759 A5 8B       LDA $8B    [$7E:008B]  ;\
$9B:C75B 2C B2 09    BIT $09B2  [$7E:09B2]  ;} If pressing shoot: go to BRANCH_FIRING
$9B:C75E D0 07       BNE $07    [$C767]     ;/

; BRANCH_CANCEL
$9B:C760 A9 56 C8    LDA #$C856             ;\
$9B:C763 8D 32 0D    STA $0D32  [$7E:0D32]  ;} Grapple beam function = cancel
$9B:C766 60          RTS                    ; Return

; BRANCH_FIRING
$9B:C767 20 D4 B8    JSR $B8D4  [$9B:B8D4]  ; RTS
$9B:C76A AD FE 0C    LDA $0CFE  [$7E:0CFE]  ;\
$9B:C76D 38          SEC                    ;|
$9B:C76E ED 00 0D    SBC $0D00  [$7E:0D00]  ;} Grapple beam length -= [grapple beam length delta]
$9B:C771 8D FE 0C    STA $0CFE  [$7E:0CFE]  ;/
$9B:C774 C9 0D 00    CMP #$000D             ;\
$9B:C777 30 E7       BMI $E7    [$C760]     ;} If [grapple beam length] < Dh: go to BRANCH_CANCEL
$9B:C779 22 5B A8 94 JSL $94A85B[$94:A85B]  ; Grapple beam block collision handling
$9B:C77D 60          RTS
}


;;; $C77E: Grapple beam function - connected - locked in place ;;;
{
$9B:C77E A5 8B       LDA $8B    [$7E:008B]  ;\
$9B:C780 2C B2 09    BIT $09B2  [$7E:09B2]  ;} If pressing shoot: go to BRANCH_FIRING
$9B:C783 D0 07       BNE $07    [$C78C]     ;/

; BRANCH_CANCEL
$9B:C785 A9 56 C8    LDA #$C856             ;\
$9B:C788 8D 32 0D    STA $0D32  [$7E:0D32]  ;} Grapple beam function = cancel
$9B:C78B 60          RTS                    ; Return

; BRANCH_FIRING
$9B:C78C 22 9A 9E A0 JSL $A09E9A[$A0:9E9A]  ; Enemy / grapple beam collision detection
$9B:C790 A8          TAY                    ;\
$9B:C791 D0 05       BNE $05    [$C798]     ;} If grapple reaction index = 0:
$9B:C793 20 F1 B8    JSR $B8F1  [$9B:B8F1]  ;\
$9B:C796 90 ED       BCC $ED    [$C785]     ;} If grapple is not connected to a block: go to BRANCH_CANCEL

$9B:C798 22 0B AF 94 JSL $94AF0B[$94:AF0B]  ; Clear carry
$9B:C79C 60          RTS
}


;;; $C79D: Grapple beam function - connected - swinging ;;;
{
$9B:C79D A5 8B       LDA $8B    [$7E:008B]  ;\
$9B:C79F 2C B2 09    BIT $09B2  [$7E:09B2]  ;} If pressing shoot: go to BRANCH_FIRING
$9B:C7A2 D0 24       BNE $24    [$C7C8]     ;/

; BRANCH_CANCEL
$9B:C7A4 AD 26 0D    LDA $0D26  [$7E:0D26]  ;\
$9B:C7A7 D0 0F       BNE $0F    [$C7B8]     ;} If [grapple swing angular velocity] = 0:
$9B:C7A9 AD FA 0C    LDA $0CFA  [$7E:0CFA]  ;\
$9B:C7AC C9 00 80    CMP #$8000             ;} If [grapple beam end angle] / 100h = 80h (straight down):
$9B:C7AF D0 07       BNE $07    [$C7B8]     ;/
$9B:C7B1 A9 C5 C8    LDA #$C8C5             ;\
$9B:C7B4 8D 32 0D    STA $0D32  [$7E:0D32]  ;} Grapple beam function = $C8C5 (dropped)
$9B:C7B7 60          RTS                    ; Return

$9B:C7B8 20 65 CA    JSR $CA65  [$9B:CA65]  ; Propel Samus from grapple swing
$9B:C7BB A9 8B CB    LDA #$CB8B             ;\
$9B:C7BE 8D 32 0D    STA $0D32  [$7E:0D32]  ;} Grapple beam function = released from swing
$9B:C7C1 A9 6E 94    LDA #$946E             ;\
$9B:C7C4 8D 58 0A    STA $0A58  [$7E:0A58]  ;} Samus movement handler = $946E (released from grapple swing)
$9B:C7C7 60          RTS                    ; Return

; BRANCH_FIRING
$9B:C7C8 20 64 BB    JSR $BB64  [$9B:BB64]  ; Handle grapple d-pad input
$9B:C7CB AD 00 0D    LDA $0D00  [$7E:0D00]  ;\
$9B:C7CE F0 04       BEQ $04    [$C7D4]     ;} If [grapple beam length delta] != 0:
$9B:C7D0 22 31 AC 94 JSL $94AC31[$94:AC31]  ; Handle grapple beam length change

$9B:C7D4 20 1F BC    JSR $BC1F  [$9B:BC1F]  ; Determine grapple swing angular acceleration due to angle of swing
$9B:C7D7 20 FF BC    JSR $BCFF  [$9B:BCFF]  ; Update grapple swing angular velocity
$9B:C7DA 20 44 BD    JSR $BD44  [$9B:BD44]  ; Handle grapple kick
$9B:C7DD 22 FE AC 94 JSL $94ACFE[$94:ACFE]  ; Handle grapple beam swinging movement
$9B:C7E1 AD 36 0D    LDA $0D36  [$7E:0D36]  ;\
$9B:C7E4 10 0A       BPL $0A    [$C7F0]     ;} If special grapple beam angle handling enabled:
$9B:C7E6 20 D5 BA    JSR $BAD5  [$9B:BAD5]  ; Handle special grapple beam angles
$9B:C7E9 90 05       BCC $05    [$C7F0]     ; If handled special grapple beam angle:
$9B:C7EB 22 0B AF 94 JSL $94AF0B[$94:AF0B]  ; Clear carry
$9B:C7EF 60          RTS                    ; Return

$9B:C7F0 22 9A 9E A0 JSL $A09E9A[$A0:9E9A]  ; Enemy / grapple beam collision detection
$9B:C7F4 A8          TAY                    ;\
$9B:C7F5 F0 0B       BEQ $0B    [$C802]     ;} If [A] != 0:
$9B:C7F7 AD F4 0C    LDA $0CF4  [$7E:0CF4]  ;\
$9B:C7FA 09 00 80    ORA #$8000             ;} Set grappling enemy flag
$9B:C7FD 8D F4 0C    STA $0CF4  [$7E:0CF4]  ;/
$9B:C800 80 05       BRA $05    [$C807]
                                            ; Else ([A] = 0):
$9B:C802 20 F1 B8    JSR $B8F1  [$9B:B8F1]  ;\
$9B:C805 90 9D       BCC $9D    [$C7A4]     ;} If grapple is not connected to a block: go to BRANCH_CANCEL

$9B:C807 22 11 AC 94 JSL $94AC11[$94:AC11]  ; Update grapple beam start position during grapple swinging
$9B:C80B 22 0B AF 94 JSL $94AF0B[$94:AF0B]  ; Clear carry
$9B:C80F 22 95 BD 9B JSL $9BBD95[$9B:BD95]  ; Set Samus animation frame and position during grapple swinging
$9B:C813 60          RTS
}


;;; $C814: Grapple beam function - wallgrab ;;;
{
$9B:C814 A5 8B       LDA $8B    [$7E:008B]  ;\
$9B:C816 2C B2 09    BIT $09B2  [$7E:09B2]  ;} If pressing shoot: go to BRANCH_FIRING
$9B:C819 D0 0D       BNE $0D    [$C828]     ;/

; BRANCH_CANCEL
$9B:C81B A9 1E 00    LDA #$001E             ;\
$9B:C81E 8D 9E 0A    STA $0A9E  [$7E:0A9E]  ;} Grapple walljump timer = 30
$9B:C821 A9 32 C8    LDA #$C832             ;\
$9B:C824 8D 32 0D    STA $0D32  [$7E:0D32]  ;} Grapple beam function = wallgrab release
$9B:C827 60          RTS                    ; Return

; BRANCH_FIRING
$9B:C828 20 F1 B8    JSR $B8F1  [$9B:B8F1]  ;\
$9B:C82B 90 EE       BCC $EE    [$C81B]     ;} If grapple is not connected to a block: go to BRANCH_CANCEL
$9B:C82D 22 0B AF 94 JSL $94AF0B[$94:AF0B]  ; Clear carry
$9B:C831 60          RTS
}


;;; $C832: Grapple beam function - wallgrab release ;;;
{
$9B:C832 AD 9E 0A    LDA $0A9E  [$7E:0A9E]  ;\
$9B:C835 3A          DEC A                  ;} Decrement grapple walljump timer
$9B:C836 8D 9E 0A    STA $0A9E  [$7E:0A9E]  ;/
$9B:C839 10 07       BPL $07    [$C842]     ; If [grapple walljump timer] < 0:
$9B:C83B A9 C5 C8    LDA #$C8C5             ;\
$9B:C83E 8D 32 0D    STA $0D32  [$7E:0D32]  ;} Grapple beam function = $C8C5 (dropped)
$9B:C841 60          RTS                    ; Return

$9B:C842 A9 10 00    LDA #$0010             ;\
$9B:C845 85 12       STA $12    [$7E:0012]  ;} $12.$14 = 10h.0
$9B:C847 64 14       STZ $14    [$7E:0014]  ;/
$9B:C849 22 AC 9C 90 JSL $909CAC[$90:9CAC]  ; Grapple wall jump check
$9B:C84D 90 06       BCC $06    [$C855]     ; If wall jump triggered:
$9B:C84F A9 CE C9    LDA #$C9CE             ;\
$9B:C852 8D 32 0D    STA $0D32  [$7E:0D32]  ;} Grapple beam function = wall jumping

$9B:C855 60          RTS
}


;;; $C856: Grapple beam function - hit nothing / cancel ;;;
{
$9B:C856 A9 07 00    LDA #$0007             ;\
$9B:C859 22 21 90 80 JSL $809021[$80:9021]  ;} Queue sound 7, sound library 1, max queued sounds allowed = 15 (grapple end)
$9B:C85D AD 1F 0A    LDA $0A1F  [$7E:0A1F]  ;\
$9B:C860 29 FF 00    AND #$00FF             ;|
$9B:C863 C9 16 00    CMP #$0016             ;} If [Samus movement type] = grappling:
$9B:C866 D0 06       BNE $06    [$C86E]     ;/
$9B:C868 22 D9 82 91 JSL $9182D9[$91:82D9]  ; Handle transition table lookup failure
$9B:C86C 80 07       BRA $07    [$C875]

$9B:C86E A9 1C 00    LDA #$001C             ;\ Else ([Samus movement type] != grappling):
$9B:C871 22 84 F0 90 JSL $90F084[$90:F084]  ;} Run Samus command - play spin jump sound if spin jumping

$9B:C875 9C 1E 0D    STZ $0D1E  [$7E:0D1E]  ; $0D1E = 0 (unused)
$9B:C878 9C 20 0D    STZ $0D20  [$7E:0D20]  ; $0D20 = 0 (unused)
$9B:C87B 9C 34 0D    STZ $0D34  [$7E:0D34]  ; Direction grapple is fired = 0
$9B:C87E 9C 36 0D    STZ $0D36  [$7E:0D36]  ; Disable special grapple beam angle handling
$9B:C881 9C 9E 0A    STZ $0A9E  [$7E:0A9E]  ; Grapple walljump timer = 0
$9B:C884 9C F8 0C    STZ $0CF8  [$7E:0CF8]  ; Slow grapple scrolling flag = 0
$9B:C887 9C F6 0C    STZ $0CF6  [$7E:0CF6]  ; Grapple pose change auto-fire timer = 0
$9B:C88A 9C F4 0C    STZ $0CF4  [$7E:0CF4]  ; Grapple beam flags = 0
$9B:C88D 9C D0 0C    STZ $0CD0  [$7E:0CD0]  ; Flare counter = 0
$9B:C890 9C D6 0C    STZ $0CD6  [$7E:0CD6]  ;\
$9B:C893 9C D8 0C    STZ $0CD8  [$7E:0CD8]  ;} Charge beam animation frames = 0
$9B:C896 9C DA 0C    STZ $0CDA  [$7E:0CDA]  ;/
$9B:C899 9C DC 0C    STZ $0CDC  [$7E:0CDC]  ;\
$9B:C89C 9C DE 0C    STZ $0CDE  [$7E:0CDE]  ;} Charge beam animation delays = 0
$9B:C89F 9C E0 0C    STZ $0CE0  [$7E:0CE0]  ;/
$9B:C8A2 AD A6 09    LDA $09A6  [$7E:09A6]  ;\
$9B:C8A5 22 F0 AC 90 JSL $90ACF0[$90:ACF0]  ;} Load current beam palette
$9B:C8A9 A9 F0 C4    LDA #$C4F0             ;\
$9B:C8AC 8D 32 0D    STA $0D32  [$7E:0D32]  ;} Grapple beam function = inactive
$9B:C8AF A9 52 EB    LDA #$EB52             ;\
$9B:C8B2 8D 5C 0A    STA $0A5C  [$7E:0A5C]  ;} Samus drawing handler = default
$9B:C8B5 22 22 EF 90 JSL $90EF22[$90:EF22]  ; Post grapple collision handling
$9B:C8B9 AD 04 0A    LDA $0A04  [$7E:0A04]  ;\
$9B:C8BC F0 06       BEQ $06    [$C8C4]     ;} If [auto-cancel HUD item index] != 0:
$9B:C8BE 9C D2 09    STZ $09D2  [$7E:09D2]  ; HUD item index = 0
$9B:C8C1 9C 04 0A    STZ $0A04  [$7E:0A04]  ; Auto-cancel HUD item index = 0

$9B:C8C4 60          RTS
}


;;; $C8C5: Grapple beam function - dropped ;;;
{
; Dropped down from swinging with no momentum or missed grapple walljump

$9B:C8C5 A9 07 00    LDA #$0007             ;\
$9B:C8C8 22 21 90 80 JSL $809021[$80:9021]  ;} Queue sound 7, sound library 1, max queued sounds allowed = 15 (grapple end)
$9B:C8CC AD 1C 0A    LDA $0A1C  [$7E:0A1C]  ;\
$9B:C8CF C9 B2 00    CMP #$00B2             ;} If [Samus pose] = facing clockwise - grapple swinging: go to BRANCH_CLOCKWISE
$9B:C8D2 F0 12       BEQ $12    [$C8E6]     ;/
$9B:C8D4 C9 B3 00    CMP #$00B3             ;\
$9B:C8D7 F0 15       BEQ $15    [$C8EE]     ;} If [Samus pose] = facing anticlockwise - grapple swinging: go to BRANCH_ANTICLOCKWISE
$9B:C8D9 80 1B       BRA $1B    [$C8F6]     ; Go to BRANCH_NOT_SWINGING

; BRANCH_CANCEL
$9B:C8DB AD 1E 0A    LDA $0A1E  [$7E:0A1E]  ;\
$9B:C8DE 29 FF 00    AND #$00FF             ;|
$9B:C8E1 C9 04 00    CMP #$0004             ;} If [Samus pose X direction] = left: go to BRANCH_ANTICLOCKWISE
$9B:C8E4 F0 08       BEQ $08    [$C8EE]     ;/

; BRANCH_CLOCKWISE
$9B:C8E6 A9 01 00    LDA #$0001             ;\
$9B:C8E9 8D 2C 0A    STA $0A2C  [$7E:0A2C]  ;} Super special prospective pose = facing right - normal
$9B:C8EC 80 67       BRA $67    [$C955]     ; Go to BRANCH_MERGE

; BRANCH_ANTICLOCKWISE
$9B:C8EE A9 02 00    LDA #$0002             ;\
$9B:C8F1 8D 2C 0A    STA $0A2C  [$7E:0A2C]  ;} Super special prospective pose = facing left - normal
$9B:C8F4 80 5F       BRA $5F    [$C955]     ; Go to BRANCH_MERGE

; BRANCH_NOT_SWINGING
$9B:C8F6 AD 00 0B    LDA $0B00  [$7E:0B00]  ;\
$9B:C8F9 C9 11 00    CMP #$0011             ;} If [Samus Y radius] >= 11h:
$9B:C8FC 30 1F       BMI $1F    [$C91D]     ;/
$9B:C8FE AD 1C 0A    LDA $0A1C  [$7E:0A1C]  ;\
$9B:C901 0A          ASL A                  ;|
$9B:C902 0A          ASL A                  ;|
$9B:C903 0A          ASL A                  ;|
$9B:C904 AA          TAX                    ;} X = (direction shots are fired)
$9B:C905 BF 2C B6 91 LDA $91B62C,x[$91:B64C];|
$9B:C909 29 FF 00    AND #$00FF             ;|
$9B:C90C AA          TAX                    ;/
$9B:C90D 89 F0 00    BIT #$00F0             ;\
$9B:C910 D0 C9       BNE $C9    [$C8DB]     ;} If (direction shots are fired) & F0h != 0: go to BRANCH_CANCEL
$9B:C912 BD BA C9    LDA $C9BA,x[$9B:C9C3]  ;\
$9B:C915 29 FF 00    AND #$00FF             ;} Super special prospective pose = [$C9BA + [X]]
$9B:C918 8D 2C 0A    STA $0A2C  [$7E:0A2C]  ;/
$9B:C91B 80 38       BRA $38    [$C955]     ; Go to BRANCH_MERGE

$9B:C91D AD 1C 0A    LDA $0A1C  [$7E:0A1C]  ;\
$9B:C920 0A          ASL A                  ;|
$9B:C921 0A          ASL A                  ;|
$9B:C922 0A          ASL A                  ;|
$9B:C923 AA          TAX                    ;} X = (direction shots are fired)
$9B:C924 BF 2C B6 91 LDA $91B62C,x          ;|
$9B:C928 29 FF 00    AND #$00FF             ;|
$9B:C92B AA          TAX                    ;/
$9B:C92C 89 F0 00    BIT #$00F0             ;\
$9B:C92F D0 0B       BNE $0B    [$C93C]     ;} If (direction shots are fired) & F0h = 0:
$9B:C931 BD C4 C9    LDA $C9C4,x            ;\
$9B:C934 29 FF 00    AND #$00FF             ;} Super special prospective pose = [$C9C4 + [X]]
$9B:C937 8D 2C 0A    STA $0A2C  [$7E:0A2C]  ;/
$9B:C93A 80 19       BRA $19    [$C955]     ; Go to BRANCH_MERGE

$9B:C93C AD 1E 0A    LDA $0A1E  [$7E:0A1E]  ;\
$9B:C93F 29 FF 00    AND #$00FF             ;|
$9B:C942 C9 04 00    CMP #$0004             ;} If [Samus pose X direction] = right:
$9B:C945 F0 08       BEQ $08    [$C94F]     ;/
$9B:C947 A9 27 00    LDA #$0027             ;\
$9B:C94A 8D 2C 0A    STA $0A2C  [$7E:0A2C]  ;} Super special prospective pose = facing right - crouching
$9B:C94D 80 06       BRA $06    [$C955]     ; Go to BRANCH_MERGE

$9B:C94F A9 28 00    LDA #$0028             ;\
$9B:C952 8D 2C 0A    STA $0A2C  [$7E:0A2C]  ;} Super special prospective pose = facing left - crouching

; BRANCH_MERGE
$9B:C955 9C 32 0A    STZ $0A32  [$7E:0A32]  ; Super special prospective pose change command = none
$9B:C958 A9 01 00    LDA #$0001             ;\
$9B:C95B 8D C6 0D    STA $0DC6  [$7E:0DC6]  ;} Samus solid vertical collision result = landed, Samus downwards movement solid collision result = grounded
$9B:C95E 9C 46 0B    STZ $0B46  [$7E:0B46]  ;\
$9B:C961 9C 48 0B    STZ $0B48  [$7E:0B48]  ;} Samus X base speed = 0.0
$9B:C964 9C 2C 0B    STZ $0B2C  [$7E:0B2C]  ;\
$9B:C967 9C 2E 0B    STZ $0B2E  [$7E:0B2E]  ;} Samus Y speed = 0.0
$9B:C96A 9C 1E 0D    STZ $0D1E  [$7E:0D1E]  ; $0D1E = 0 (unused)
$9B:C96D 9C 20 0D    STZ $0D20  [$7E:0D20]  ; $0D20 = 0 (unused)
$9B:C970 9C 34 0D    STZ $0D34  [$7E:0D34]  ; Direction grapple is fired = 0
$9B:C973 9C 36 0D    STZ $0D36  [$7E:0D36]  ; Disable special grapple beam angle handling
$9B:C976 9C 9E 0A    STZ $0A9E  [$7E:0A9E]  ; Grapple walljump timer = 0
$9B:C979 9C F8 0C    STZ $0CF8  [$7E:0CF8]  ; Slow grapple scrolling flag = 0
$9B:C97C 9C F6 0C    STZ $0CF6  [$7E:0CF6]  ; Grapple pose change auto-fire timer = 0
$9B:C97F 9C F4 0C    STZ $0CF4  [$7E:0CF4]  ; Grapple beam flags = 0
$9B:C982 9C D0 0C    STZ $0CD0  [$7E:0CD0]  ; Flare counter = 0
$9B:C985 9C D6 0C    STZ $0CD6  [$7E:0CD6]  ;\
$9B:C988 9C D8 0C    STZ $0CD8  [$7E:0CD8]  ;} Charge beam animation frames = 0
$9B:C98B 9C DA 0C    STZ $0CDA  [$7E:0CDA]  ;/
$9B:C98E 9C DC 0C    STZ $0CDC  [$7E:0CDC]  ;\
$9B:C991 9C DE 0C    STZ $0CDE  [$7E:0CDE]  ;} Charge beam animation delays = 0
$9B:C994 9C E0 0C    STZ $0CE0  [$7E:0CE0]  ;/
$9B:C997 AD A6 09    LDA $09A6  [$7E:09A6]  ;\
$9B:C99A 22 F0 AC 90 JSL $90ACF0[$90:ACF0]  ;} Load current beam palette
$9B:C99E A9 F0 C4    LDA #$C4F0             ;\
$9B:C9A1 8D 32 0D    STA $0D32  [$7E:0D32]  ;} Grapple beam function = inactive
$9B:C9A4 A9 52 EB    LDA #$EB52             ;\
$9B:C9A7 8D 5C 0A    STA $0A5C  [$7E:0A5C]  ;} Samus drawing handler = default
$9B:C9AA 22 22 EF 90 JSL $90EF22[$90:EF22]  ; Post grapple collision handling
$9B:C9AE AD 04 0A    LDA $0A04  [$7E:0A04]  ;\
$9B:C9B1 F0 06       BEQ $06    [$C9B9]     ;} If [auto-cancel HUD item index] != 0:
$9B:C9B3 9C D2 09    STZ $09D2  [$7E:09D2]  ; HUD item index = 0
$9B:C9B6 9C 04 0A    STZ $0A04  [$7E:0A04]  ; Auto-cancel HUD item index = 0

$9B:C9B9 60          RTS

; Poses
$9B:C9BA             db 03, 05, 01, 07, 01, 02, 08, 02, 06, 04 ; Standing
$9B:C9C4             db 85, 71, 27, 73, 27, 28, 74, 28, 72, 86 ; Crouching
}


;;; $C9CE: Grapple beam function - wall jumping ;;;
{
$9B:C9CE A9 07 00    LDA #$0007             ;\
$9B:C9D1 22 21 90 80 JSL $809021[$80:9021]  ;} Queue sound 7, sound library 1, max queued sounds allowed = 15 (grapple end)
$9B:C9D5 AD 1E 0A    LDA $0A1E  [$7E:0A1E]  ;\
$9B:C9D8 29 FF 00    AND #$00FF             ;|
$9B:C9DB C9 08 00    CMP #$0008             ;} If [Samus pose X direction] = left:
$9B:C9DE F0 08       BEQ $08    [$C9E8]     ;/
$9B:C9E0 A9 83 00    LDA #$0083             ;\
$9B:C9E3 8D 2C 0A    STA $0A2C  [$7E:0A2C]  ;} Super special prospective pose = facing right - wall jump
$9B:C9E6 80 06       BRA $06    [$C9EE]

$9B:C9E8 A9 84 00    LDA #$0084             ;\ Else ([Samus pose X direction] = right):
$9B:C9EB 8D 2C 0A    STA $0A2C  [$7E:0A2C]  ;} Super special prospective pose = facing left - wall jump

$9B:C9EE A9 06 00    LDA #$0006             ;\
$9B:C9F1 8D 32 0A    STA $0A32  [$7E:0A32]  ;} Super special prospective pose change command = start grapple wall-jump
$9B:C9F4 9C 4A 0B    STZ $0B4A  [$7E:0B4A]  ; Samus X acceleration mode = accelerating
$9B:C9F7 9C CE 0D    STZ $0DCE  [$7E:0DCE]  ; Samus X speed killed flag = 0
$9B:C9FA 9C 22 0B    STZ $0B22  [$7E:0B22]  ; Clear Samus is falling flag
$9B:C9FD 9C 1A 0B    STZ $0B1A  [$7E:0B1A]  ; $0B1A = 0 (unused)
$9B:CA00 9C 2A 0B    STZ $0B2A  [$7E:0B2A]  ; $0B2A = 0 (unused)
$9B:CA03 9C 2C 0B    STZ $0B2C  [$7E:0B2C]  ;\
$9B:CA06 9C 2E 0B    STZ $0B2E  [$7E:0B2E]  ;} Samus Y speed = 0.0
$9B:CA09 9C 36 0B    STZ $0B36  [$7E:0B36]  ; Samus Y direction = none
$9B:CA0C 9C 38 0B    STZ $0B38  [$7E:0B38]  ; $0B38 = 0 (unused)
$9B:CA0F 9C 46 0B    STZ $0B46  [$7E:0B46]  ;\
$9B:CA12 9C 48 0B    STZ $0B48  [$7E:0B48]  ;} Samus X base speed = 0.0
$9B:CA15 9C 1E 0D    STZ $0D1E  [$7E:0D1E]  ; $0D1E = 0 (unused)
$9B:CA18 9C 20 0D    STZ $0D20  [$7E:0D20]  ; $0D20 = 0 (unused)
$9B:CA1B 9C 34 0D    STZ $0D34  [$7E:0D34]  ; Direction grapple is fired = 0
$9B:CA1E 9C 36 0D    STZ $0D36  [$7E:0D36]  ; Disable special grapple beam angle handling
$9B:CA21 9C 9E 0A    STZ $0A9E  [$7E:0A9E]  ; Grapple walljump timer = 0
$9B:CA24 9C F8 0C    STZ $0CF8  [$7E:0CF8]  ; Slow grapple scrolling flag = 0
$9B:CA27 9C F6 0C    STZ $0CF6  [$7E:0CF6]  ; Grapple pose change auto-fire timer = 0
$9B:CA2A 9C F4 0C    STZ $0CF4  [$7E:0CF4]  ; Grapple beam flags = 0
$9B:CA2D 9C D0 0C    STZ $0CD0  [$7E:0CD0]  ; Flare counter = 0
$9B:CA30 9C D6 0C    STZ $0CD6  [$7E:0CD6]  ;\
$9B:CA33 9C D8 0C    STZ $0CD8  [$7E:0CD8]  ;} Charge beam animation frames = 0
$9B:CA36 9C DA 0C    STZ $0CDA  [$7E:0CDA]  ;/
$9B:CA39 9C DC 0C    STZ $0CDC  [$7E:0CDC]  ;\
$9B:CA3C 9C DE 0C    STZ $0CDE  [$7E:0CDE]  ;} Charge beam animation delays = 0
$9B:CA3F 9C E0 0C    STZ $0CE0  [$7E:0CE0]  ;/
$9B:CA42 AD A6 09    LDA $09A6  [$7E:09A6]  ;\
$9B:CA45 22 F0 AC 90 JSL $90ACF0[$90:ACF0]  ;} Load current beam palette
$9B:CA49 A9 F0 C4    LDA #$C4F0             ;\
$9B:CA4C 8D 32 0D    STA $0D32  [$7E:0D32]  ;} Grapple beam function = inactive
$9B:CA4F A9 52 EB    LDA #$EB52             ;\
$9B:CA52 8D 5C 0A    STA $0A5C  [$7E:0A5C]  ;} Samus drawing handler = default
$9B:CA55 22 22 EF 90 JSL $90EF22[$90:EF22]  ; Post grapple collision handling
$9B:CA59 AD 04 0A    LDA $0A04  [$7E:0A04]  ;\
$9B:CA5C F0 06       BEQ $06    [$CA64]     ;} If [auto-cancel HUD item index] != 0:
$9B:CA5E 9C D2 09    STZ $09D2  [$7E:09D2]  ; HUD item index = 0
$9B:CA61 9C 04 0A    STZ $0A04  [$7E:0A04]  ; Auto-cancel HUD item index = 0

$9B:CA64 60          RTS
}


;;; $CA65: Propel Samus from grapple swing ;;;
{
; Note the extra angular velocity due to grapple kick isn't included in this calculation, which feels like an oversight to me
$9B:CA65 AD 26 0D    LDA $0D26  [$7E:0D26]  ;\
$9B:CA68 30 03       BMI $03    [$CA6D]     ;} If [grapple swing angular velocity] >= 0:
$9B:CA6A 4C FE CA    JMP $CAFE  [$9B:CAFE]  ; Go to BRANCH_POSITIVE

$9B:CA6D 49 FF FF    EOR #$FFFF             ;\
$9B:CA70 1A          INC A                  ;|
$9B:CA71 0A          ASL A                  ;} Y = -[grapple swing angular velocity] * 2
$9B:CA72 A8          TAY                    ;/
$9B:CA73 AD FA 0C    LDA $0CFA  [$7E:0CFA]  ;\
$9B:CA76 EB          XBA                    ;|
$9B:CA77 29 FF 00    AND #$00FF             ;|
$9B:CA7A 0A          ASL A                  ;} If sin([grapple beam end angle] * pi / 8000h) >= 0:
$9B:CA7B AA          TAX                    ;|
$9B:CA7C BF 43 B4 A0 LDA $A0B443,x[$A0:B503];|
$9B:CA80 30 1A       BMI $1A    [$CA9C]     ;/
$9B:CA82 5A          PHY                    ;\
$9B:CA83 22 D6 82 80 JSL $8082D6[$80:82D6]  ;|
$9B:CA87 7A          PLY                    ;|
$9B:CA88 AD F1 05    LDA $05F1  [$7E:05F1]  ;} Samus Y speed = [Y] * sin([grapple beam end angle] * pi / 8000h) / 10000h
$9B:CA8B 8D 2C 0B    STA $0B2C  [$7E:0B2C]  ;|
$9B:CA8E AD F3 05    LDA $05F3  [$7E:05F3]  ;|
$9B:CA91 8D 2E 0B    STA $0B2E  [$7E:0B2E]  ;/
$9B:CA94 A9 01 00    LDA #$0001             ;\
$9B:CA97 8D 36 0B    STA $0B36  [$7E:0B36]  ;} Samus Y direction = up
$9B:CA9A 80 1C       BRA $1C    [$CAB8]

$9B:CA9C 49 FF FF    EOR #$FFFF             ;\ Else (sin([grapple beam end angle]) < 0):
$9B:CA9F 1A          INC A                  ;|
$9B:CAA0 5A          PHY                    ;|
$9B:CAA1 22 D6 82 80 JSL $8082D6[$80:82D6]  ;|
$9B:CAA5 7A          PLY                    ;} Samus Y speed = [Y] * -sin([grapple beam end angle] * pi / 8000h) / 10000h
$9B:CAA6 AD F1 05    LDA $05F1  [$7E:05F1]  ;|
$9B:CAA9 8D 2C 0B    STA $0B2C  [$7E:0B2C]  ;|
$9B:CAAC AD F3 05    LDA $05F3  [$7E:05F3]  ;|
$9B:CAAF 8D 2E 0B    STA $0B2E  [$7E:0B2E]  ;/
$9B:CAB2 A9 02 00    LDA #$0002             ;\
$9B:CAB5 8D 36 0B    STA $0B36  [$7E:0B36]  ;} Samus Y direction = down

$9B:CAB8 A9 02 00    LDA #$0002             ;\
$9B:CABB 8D 4A 0B    STA $0B4A  [$7E:0B4A]  ;} Samus X acceleration mode = decelerating
$9B:CABE 98          TYA                    ;\
$9B:CABF 4A          LSR A                  ;|
$9B:CAC0 EB          XBA                    ;|
$9B:CAC1 29 FF 00    AND #$00FF             ;|
$9B:CAC4 85 12       STA $12    [$7E:0012]  ;|
$9B:CAC6 0A          ASL A                  ;|
$9B:CAC7 18          CLC                    ;|
$9B:CAC8 65 12       ADC $12    [$7E:0012]  ;|
$9B:CACA 85 12       STA $12    [$7E:0012]  ;|
$9B:CACC A9 40 00    LDA #$0040             ;|
$9B:CACF 38          SEC                    ;|
$9B:CAD0 E5 12       SBC $12    [$7E:0012]  ;|
$9B:CAD2 85 12       STA $12    [$7E:0012]  ;|
$9B:CAD4 AD FA 0C    LDA $0CFA  [$7E:0CFA]  ;|
$9B:CAD7 EB          XBA                    ;|
$9B:CAD8 29 FF 00    AND #$00FF             ;} Samus X base speed = [Y] * |sin([grapple beam angle] * pi / 8000h - (40h - [Y] / 200h * 3))| <-- I must have made a mistake, todo
$9B:CADB 38          SEC                    ;|
$9B:CADC E5 12       SBC $12    [$7E:0012]  ;|
$9B:CADE 29 FF 00    AND #$00FF             ;|
$9B:CAE1 0A          ASL A                  ;|
$9B:CAE2 AA          TAX                    ;|
$9B:CAE3 BF 43 B4 A0 LDA $A0B443,x[$A0:B495];|
$9B:CAE7 10 04       BPL $04    [$CAED]     ;|
$9B:CAE9 49 FF FF    EOR #$FFFF             ;|
$9B:CAEC 1A          INC A                  ;|
                                            ;|
$9B:CAED 22 D6 82 80 JSL $8082D6[$80:82D6]  ;|
$9B:CAF1 AD F1 05    LDA $05F1  [$7E:05F1]  ;|
$9B:CAF4 8D 48 0B    STA $0B48  [$7E:0B48]  ;|
$9B:CAF7 AD F3 05    LDA $05F3  [$7E:05F3]  ;|
$9B:CAFA 8D 46 0B    STA $0B46  [$7E:0B46]  ;/
$9B:CAFD 60          RTS                    ; Return

; BRANCH_POSITIVE
$9B:CAFE 0A          ASL A                  ;\
$9B:CAFF A8          TAY                    ;} Y = [grapple swing angular velocity] * 2
$9B:CB00 AD FA 0C    LDA $0CFA  [$7E:0CFA]  ;\
$9B:CB03 EB          XBA                    ;|
$9B:CB04 29 FF 00    AND #$00FF             ;|
$9B:CB07 0A          ASL A                  ;} If sin([grapple beam end angle] * pi / 8000h) < 0:
$9B:CB08 AA          TAX                    ;|
$9B:CB09 BF 43 B4 A0 LDA $A0B443,x[$A0:B56F];|
$9B:CB0D 10 1E       BPL $1E    [$CB2D]     ;/
$9B:CB0F 49 FF FF    EOR #$FFFF             ;\
$9B:CB12 1A          INC A                  ;|
$9B:CB13 5A          PHY                    ;|
$9B:CB14 22 D6 82 80 JSL $8082D6[$80:82D6]  ;|
$9B:CB18 7A          PLY                    ;} Samus Y speed = [Y] * -sin([grapple beam end angle] * pi / 8000h) / 10000h
$9B:CB19 AD F1 05    LDA $05F1  [$7E:05F1]  ;|
$9B:CB1C 8D 2C 0B    STA $0B2C  [$7E:0B2C]  ;|
$9B:CB1F AD F3 05    LDA $05F3  [$7E:05F3]  ;|
$9B:CB22 8D 2E 0B    STA $0B2E  [$7E:0B2E]  ;/
$9B:CB25 A9 01 00    LDA #$0001             ;\
$9B:CB28 8D 36 0B    STA $0B36  [$7E:0B36]  ;} Samus Y direction = up
$9B:CB2B 80 18       BRA $18    [$CB45]

$9B:CB2D 5A          PHY                    ;\ Else (sin([grapple beam end angle] * pi / 8000h) >= 0):
$9B:CB2E 22 D6 82 80 JSL $8082D6[$80:82D6]  ;|
$9B:CB32 7A          PLY                    ;|
$9B:CB33 AD F1 05    LDA $05F1  [$7E:05F1]  ;} Samus Y speed = [Y] * sin([grapple beam end angle] * pi / 8000h) / 10000h
$9B:CB36 8D 2C 0B    STA $0B2C  [$7E:0B2C]  ;|
$9B:CB39 AD F3 05    LDA $05F3  [$7E:05F3]  ;|
$9B:CB3C 8D 2E 0B    STA $0B2E  [$7E:0B2E]  ;/
$9B:CB3F A9 02 00    LDA #$0002             ;\
$9B:CB42 8D 36 0B    STA $0B36  [$7E:0B36]  ;} Samus Y direction = down

$9B:CB45 A9 02 00    LDA #$0002             ;\
$9B:CB48 8D 4A 0B    STA $0B4A  [$7E:0B4A]  ;} Samus X acceleration mode = decelerating
$9B:CB4B 98          TYA                    ;\
$9B:CB4C 4A          LSR A                  ;|
$9B:CB4D EB          XBA                    ;|
$9B:CB4E 29 FF 00    AND #$00FF             ;|
$9B:CB51 85 12       STA $12    [$7E:0012]  ;|
$9B:CB53 0A          ASL A                  ;|
$9B:CB54 18          CLC                    ;|
$9B:CB55 65 12       ADC $12    [$7E:0012]  ;|
$9B:CB57 85 12       STA $12    [$7E:0012]  ;|
$9B:CB59 A9 40 00    LDA #$0040             ;|
$9B:CB5C 38          SEC                    ;|
$9B:CB5D E5 12       SBC $12    [$7E:0012]  ;|
$9B:CB5F 85 12       STA $12    [$7E:0012]  ;|
$9B:CB61 AD FA 0C    LDA $0CFA  [$7E:0CFA]  ;|
$9B:CB64 EB          XBA                    ;|
$9B:CB65 29 FF 00    AND #$00FF             ;} Samus X base speed = [Y] * |sin([grapple beam angle] * pi / 8000h - (40h - [Y] / 200h * 3))|
$9B:CB68 38          SEC                    ;|
$9B:CB69 E5 12       SBC $12    [$7E:0012]  ;|
$9B:CB6B 29 FF 00    AND #$00FF             ;|
$9B:CB6E 0A          ASL A                  ;|
$9B:CB6F AA          TAX                    ;|
$9B:CB70 BF 43 B4 A0 LDA $A0B443,x[$A0:B4F5];|
$9B:CB74 10 04       BPL $04    [$CB7A]     ;|
$9B:CB76 49 FF FF    EOR #$FFFF             ;|
$9B:CB79 1A          INC A                  ;|
                                            ;|
$9B:CB7A 22 D6 82 80 JSL $8082D6[$80:82D6]  ;|
$9B:CB7E AD F1 05    LDA $05F1  [$7E:05F1]  ;|
$9B:CB81 8D 48 0B    STA $0B48  [$7E:0B48]  ;|
$9B:CB84 AD F3 05    LDA $05F3  [$7E:05F3]  ;|
$9B:CB87 8D 46 0B    STA $0B46  [$7E:0B46]  ;/
$9B:CB8A 60          RTS
}


;;; $CB8B: Grapple beam function - released from swing ;;;
{
$9B:CB8B A9 07 00    LDA #$0007             ;\
$9B:CB8E 22 21 90 80 JSL $809021[$80:9021]  ;} Queue sound 7, sound library 1, max queued sounds allowed = 15 (grapple end)
$9B:CB92 AD 26 0D    LDA $0D26  [$7E:0D26]  ;\
$9B:CB95 10 08       BPL $08    [$CB9F]     ;} If [grapple swing angular velocity] < 0:
$9B:CB97 A9 51 00    LDA #$0051             ;\
$9B:CB9A 8D 2C 0A    STA $0A2C  [$7E:0A2C]  ;} Super special prospective pose = facing right - normal jump - not aiming - moving forward
$9B:CB9D 80 06       BRA $06    [$CBA5]

$9B:CB9F A9 52 00    LDA #$0052             ;\ Else ([grapple swing angular velocity] >= 0):
$9B:CBA2 8D 2C 0A    STA $0A2C  [$7E:0A2C]  ;} Super special prospective pose = facing left - normal jump - not aiming - moving forward

$9B:CBA5 A9 07 00    LDA #$0007             ;\
$9B:CBA8 8D 32 0A    STA $0A32  [$7E:0A32]  ;} Super special prospective pose change command = start release from grapple swing
$9B:CBAB 9C 1E 0D    STZ $0D1E  [$7E:0D1E]  ; $0D1E = 0 (unused)
$9B:CBAE 9C 20 0D    STZ $0D20  [$7E:0D20]  ; $0D20 = 0 (unused)
$9B:CBB1 9C 34 0D    STZ $0D34  [$7E:0D34]  ; Direction grapple is fired = 0
$9B:CBB4 9C 36 0D    STZ $0D36  [$7E:0D36]  ; Disable special grapple beam angle handling
$9B:CBB7 9C 9E 0A    STZ $0A9E  [$7E:0A9E]  ; Grapple walljump timer = 0
$9B:CBBA 9C F8 0C    STZ $0CF8  [$7E:0CF8]  ; Slow grapple scrolling flag = 0
$9B:CBBD 9C F6 0C    STZ $0CF6  [$7E:0CF6]  ; Grapple pose change auto-fire timer = 0
$9B:CBC0 9C F4 0C    STZ $0CF4  [$7E:0CF4]  ; Grapple beam flags = 0
$9B:CBC3 9C D0 0C    STZ $0CD0  [$7E:0CD0]  ; Flare counter = 0
$9B:CBC6 9C D6 0C    STZ $0CD6  [$7E:0CD6]  ;\
$9B:CBC9 9C D8 0C    STZ $0CD8  [$7E:0CD8]  ;} Charge beam animation frames = 0
$9B:CBCC 9C DA 0C    STZ $0CDA  [$7E:0CDA]  ;/
$9B:CBCF 9C DC 0C    STZ $0CDC  [$7E:0CDC]  ;\
$9B:CBD2 9C DE 0C    STZ $0CDE  [$7E:0CDE]  ;} Charge beam animation delays = 0
$9B:CBD5 9C E0 0C    STZ $0CE0  [$7E:0CE0]  ;/
$9B:CBD8 AD A6 09    LDA $09A6  [$7E:09A6]  ;\
$9B:CBDB 22 F0 AC 90 JSL $90ACF0[$90:ACF0]  ;} Load current beam palette
$9B:CBDF A9 F0 C4    LDA #$C4F0             ;\
$9B:CBE2 8D 32 0D    STA $0D32  [$7E:0D32]  ;} Grapple beam function = inactive
$9B:CBE5 A9 52 EB    LDA #$EB52             ;\
$9B:CBE8 8D 5C 0A    STA $0A5C  [$7E:0A5C]  ;} Samus drawing handler = default
$9B:CBEB 22 22 EF 90 JSL $90EF22[$90:EF22]  ; Post grapple collision handling
$9B:CBEF AD 04 0A    LDA $0A04  [$7E:0A04]  ;\
$9B:CBF2 F0 06       BEQ $06    [$CBFA]     ;} If [auto-cancel HUD item index] != 0:
$9B:CBF4 9C D2 09    STZ $09D2  [$7E:09D2]  ; HUD item index = 0
$9B:CBF7 9C 04 0A    STZ $0A04  [$7E:0A04]  ; Auto-cancel HUD item index = 0

$9B:CBFA 60          RTS
}
}
}


;;; $CBFB: Free space ;;;
{
$9B:CBFB             fillto $9BE000, $FF
}


;;; $E000..E9FF: Samus top tiles - set 8 (Samus appearance electricity) ;;;
{
;;; $E000: Samus top tiles - set 8 - entry 0 ;;;
{
; 0: Facing forward - power suit - frames 3 / 5 / 7 / 9 / Bh / Dh / Fh / 11h / 13h / 15h / 17h / 19h / 1Bh / 1Dh / 1Fh / 21h / 23h / 25h / 27h / 29h / 2Bh / 2Dh / 2Fh / 31h / 33h / 35h / 37h / 39h / 3Bh / 3Dh / 3Fh / 41h / 43h / 45h / 47h / 49h / 4Bh / 4Dh / 4Fh / 51h / 53h / 55h / 57h / 59h / 5Bh / 5Dh / 5Fh
; 9Bh: Facing forward - varia/gravity suit - frames 3 / 5 / 7 / 9 / Bh / Dh / Fh / 11h / 13h / 15h / 17h / 19h / 1Bh / 1Dh / 1Fh / 21h / 23h / 25h / 27h / 29h / 2Bh / 2Dh / 2Fh / 31h / 33h / 35h / 37h / 39h / 3Bh / 3Dh / 3Fh / 41h / 43h / 45h / 47h / 49h / 4Bh / 4Dh / 4Fh / 51h / 53h / 55h / 57h / 59h / 5Bh / 5Dh / 5Fh
; |--------|
; |        |
; |        |
; |        |
; |        |
; |        |
; |        |
; |        |
; |        |
; |--------|
$9B:E000             db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
}


;;; $E020: Samus top tiles - set 8 - entry 1 ;;;
{
; Unused
; |--------|
; |        |
; |    4444|
; |   44   |
; | 44     |
; | 4      |
; |  4     |
; |  4     |
; |  4     |
; |--------|
$9B:E020             db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,0F,00,18,00,60,00,40,00,20,00,20,00,20,00,
}


;;; $E040: Samus top tiles - set 8 - entry 2 ;;;
{
; 0: Facing forward - power suit - frames 2 / 8 / Eh / 14h / 1Ah / 20h / 26h / 2Ch / 32h / 38h / 3Eh / 44h / 4Ah
; 9Bh: Facing forward - varia/gravity suit - frames 2 / 8 / Eh / 14h / 1Ah / 20h / 26h / 2Ch / 32h / 38h / 3Eh / 44h / 4Ah
; |--------|--------|--------|--------|--------|--------|--------|--------|
; |    44  |444     |   44   |      4 |      4 |        |        |  44    |
; |     4  |  4     |   4444 |      4 |      4 |        |        |44 4    |
; |     44 |  4     |   4444 |      4 |     4  |        |        |44 4    |
; |       4|  4     |   4444 |     4  |     4  |        |        |44  44  |
; |       4|  4     |      44|     44 |     4  |        |        |444  444|
; |      4 |4 4     |       4|    444 |     4  |        |44444444|44444444|
; |      4 | 4444   |        |    444 |     44 |        |44444444|      44|
; |        |    4   |        |   44  4|      4 |        |    4444|        |
; |--------|--------|--------|--------|--------|--------|--------|--------|
; |        |
; |    4444|
; |   44   |
; | 44     |
; | 4      |
; |  4     |
; |  4     |
; |  4     |
; |--------|
$9B:E040             db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,0C,00,04,00,06,00,01,00,01,00,02,00,02,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,E0,00,20,00,20,00,20,00,20,00,A0,00,78,00,08,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,18,00,1E,00,1E,00,1E,00,03,00,01,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,02,00,02,00,02,00,04,00,06,00,0E,00,0E,00,19,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,02,00,02,00,04,00,04,00,04,00,04,00,06,00,02,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,FF,00,FF,00,0F,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,30,00,D0,00,D0,00,CC,00,E7,00,FF,00,03,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,0F,00,18,00,60,00,40,00,20,00,20,00,20,00,
}


;;; $E160: Samus top tiles - set 8 - entry 3 ;;;
{
; 0: Facing forward - power suit - frames 4 / Ah / 10h / 16h / 1Ch / 22h / 28h / 2Eh / 34h / 3Ah / 40h / 46h / 4Ch
; 9Bh: Facing forward - varia/gravity suit - frames 4 / Ah / 10h / 16h / 1Ch / 22h / 28h / 2Eh / 34h / 3Ah / 40h / 46h / 4Ch
; |--------|--------|--------|--------|--------|--------|--------|
; |        |      44|    44  |        |        |    4   |        |
; |        |  444444|    44  |        |        |    4   |        |
; |        |44   44 |    44  |     44 |        |    4   |        |
; |        |     4  |    4444|    4   |        |    4   |44      |
; |        |444444  |    4444| 4444   |        |    4   |4 4     |
; |        | 44444  |        |4444    |      44|    4   |  4     |
; |        |   44   |        |44      |      44|    4   | 4      |
; |        |        |        |4       |      44|    4   | 444    |
; |--------|--------|--------|--------|--------|--------|--------|
$9B:E160             db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,03,00,3F,00,C6,00,04,00,FC,00,7C,00,18,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,0C,00,0C,00,0C,00,0F,00,0F,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,06,00,08,00,78,00,F0,00,C0,00,80,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,03,00,03,00,03,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,08,00,08,00,08,00,08,00,08,00,08,00,08,00,08,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,C0,00,A0,00,20,00,40,00,70,00,
}


;;; $E240: Samus top tiles - set 8 - entry 4 ;;;
{
; 0: Facing forward - power suit - frames 6 / Ch / 12h / 18h / 1Eh / 24h / 2Ah / 30h / 36h / 3Ch / 42h / 48h / 4Eh
; 9Bh: Facing forward - varia/gravity suit - frames 6 / Ch / 12h / 18h / 1Eh / 24h / 2Ah / 30h / 36h / 3Ch / 42h / 48h / 4Eh
; |--------|--------|--------|--------|--------|--------|--------|--------|
; |4444    | 4   4  |  444   |        |        |      44|        |  44    |
; |44      | 4   444|  44    |        |        |      44|        |   4444 |
; |        |44      |   4    |        |4       |       4|        |    4 4 |
; |        |4       |   4    |        |4       |      44|        |    4  4|
; |        |4       |   44   |        |        |  44 444|        |    4  4|
; |        |4444    |   444  |        |        |  4444  |        |     4 4|
; |        |    4   |  4444  |        |        |  444   |        |     4 4|
; |        |        | 4444   |  444   |        |  444   |        |      44|
; |--------|--------|--------|--------|--------|--------|--------|--------|
; |   44   |    4   |        |
; |  44    |  44 4  |        |
; |4444    | 4   4  |        |
; |444     |44   44 |        |
; |444     |      4 |       4|
; |444     |        |      44|
; | 44     |        |     44 |
; |  4     |        |    44  |
; |--------|--------|--------|
$9B:E240             db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,F0,00,C0,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,44,00,47,00,C0,00,80,00,80,00,F0,00,08,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,38,00,30,00,10,00,10,00,18,00,1C,00,3C,00,78,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,38,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,80,00,80,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,03,00,03,00,01,00,03,00,37,00,3C,00,38,00,38,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,30,00,1E,00,0A,00,09,00,09,00,05,00,05,00,03,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,18,00,30,00,F0,00,E0,00,E0,00,E0,00,60,00,20,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,08,00,34,00,44,00,C6,00,02,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,01,00,03,00,06,00,0C,00,
}


;;; $E3A0: Samus top tiles - set 8 - entry 5 ;;;
{
; 0: Facing forward - power suit - frame 50h
; 9Bh: Facing forward - varia/gravity suit - frame 50h
; |--------|--------|--------|--------|--------|--------|--------|--------|
; |    4   |        | 4      | 4      |    4   |        |4  44   |4       |
; |  444   |        | 4      | 44     |  44    |        | 44     |44      |
; |44 44   |        | 4      |   4    | 44     |4       |  4     |  44    |
; |        |        | 44     |        | 4      |44      |  4     |   4    |
; |        |        | 44     |        |        |  44    |  4     |    4   |
; |        |        |  4     |        |        |   4    |  4     |    4   |
; |        |        |   4    |        |        |  44    |  4     |    4   |
; |        |        |   44   |        |        | 4      | 4      |    4   |
; |--------|--------|--------|--------|--------|--------|--------|--------|
; |       4|    44  |      4 |      4 |        |        |        |
; |       4|   44   |      4 |      4 |        |        |        |
; |        |  44    |      4 |      44|        |        |        |
; |        | 4 4    |4    4  |        |        |4       |      44|
; |        | 4 4    |4    4  |        |        |4       |        |
; |        |4  4    |4 4444  |        |        |4       |        |
; |        |4 4     | 4      |       4|      4 |        |       4|
; |        |4 44    |4       |       4|     44 |        |       4|
; |--------|--------|--------|--------|--------|--------|--------|
$9B:E3A0             db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,08,00,38,00,D8,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,40,00,40,00,40,00,60,00,60,00,20,00,10,00,18,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,40,00,60,00,10,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,08,00,30,00,60,00,40,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,80,00,C0,00,30,00,10,00,30,00,40,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,98,00,60,00,20,00,20,00,20,00,20,00,20,00,40,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,80,00,C0,00,30,00,10,00,08,00,08,00,08,00,08,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,01,00,01,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,0C,00,18,00,30,00,50,00,50,00,90,00,A0,00,B0,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,02,00,02,00,02,00,84,00,84,00,BC,00,40,00,80,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,02,00,02,00,03,00,00,00,00,00,00,00,01,00,01,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,02,00,06,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,80,00,80,00,80,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,03,00,00,00,00,00,01,00,01,00,
}


;;; $E580: Samus top tiles - set 8 - entry 6 ;;;
{
; 0: Facing forward - power suit - frame 52h
; 9Bh: Facing forward - varia/gravity suit - frame 52h
; |--------|--------|--------|--------|--------|--------|--------|--------|
; |        | 4      |        |    44  |   4    |       4|        |        |
; |        | 4      |        |     44 |    4   |      4 |        |        |
; |   44   |        |        |      4 |    4   |   444  |        |        |
; |   444  |        |     4  |        |    444 |  44    |        |        |
; |   4    |        |     4  |        |      4 |  4     |      4 |        |
; |  44    |        |     4  |        |        |  4     |       4|        |
; | 4      |        |    44  |        |        |  44    |    444 |        |
; |        |        |  444   |        |        |   44   |   44   |       4|
; |--------|--------|--------|--------|--------|--------|--------|--------|
$9B:E580             db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,18,00,1C,00,10,00,30,00,40,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,40,00,40,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,04,00,04,00,04,00,0C,00,38,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,0C,00,06,00,02,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,10,00,08,00,08,00,0E,00,02,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,01,00,02,00,1C,00,30,00,20,00,20,00,30,00,18,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,02,00,01,00,0E,00,18,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,01,00,
}


;;; $E680: Samus top tiles - set 8 - entry 7 ;;;
{
; 0: Facing forward - power suit - frames 54h / 5Ah
; 9Bh: Facing forward - varia/gravity suit - frames 54h / 5Ah
; |--------|--------|--------|--------|--------|--------|--------|--------|
; | 4     4| 4      |        |        |        |     44 |        |     4  |
; |  4 4 4 | 4      |        |        |        |     4  |        |     4  |
; |   4    | 4      |        |        |     4  |        |4       |     4 4|
; |        |        |        |        |    44  |        |4       |     44 |
; |        |        |        |        |    44  |        |4       |        |
; |        |        |        |44      |     4  |        |4       |        |
; |        |        |        | 4      |     444|        |4       |        |
; |        |        |        | 4      |        |        |        |        |
; |--------|--------|--------|--------|--------|--------|--------|--------|
; |        |        |
; |4       |       4|
; | 4      |      4 |
; | 44     |        |
; |  4     |        |
; |  44 4  |        |
; |   4444 |        |
; |      4 |        |
; |--------|--------|
$9B:E680             db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,41,00,2A,00,10,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,40,00,40,00,40,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,C0,00,40,00,40,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,04,00,0C,00,0C,00,04,00,07,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,06,00,04,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,80,00,80,00,80,00,80,00,80,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,04,00,04,00,05,00,06,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,80,00,40,00,60,00,20,00,34,00,1E,00,02,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,01,00,02,00,00,00,00,00,00,00,00,00,00,00,
}


;;; $E7C0: Samus top tiles - set 8 - entry 8 ;;;
{
; 0: Facing forward - power suit - frames 56h / 5Ch
; 9Bh: Facing forward - varia/gravity suit - frames 56h / 5Ch
; |--------|--------|--------|--------|--------|--------|--------|--------|
; |      44|        |        |    444 |        |        |        |    4 4 |
; |        |        |        |       4|    4   |        |        |    444 |
; |        |        |        |        |   4    |        |        |     44 |
; |        |  44    |        |        |44 4    |        |     4  |        |
; |        |        |        |        |  44    |        |        |        |
; |        |   4    |        |    4   |        |        |   44   |        |
; |        |  4     |        |     4  |        |        |   4    |        |
; |        | 4      |        |        |        |        |        |        |
; |--------|--------|--------|--------|--------|--------|--------|--------|
; |        |        |        |
; |    4   |        |        |
; | 44     |        |        |
; |     4  |        |        |
; | 4   4  |        |        |
; |        |        |        |
; |4       |        | 4      |
; |        |       4| 444    |
; |--------|--------|--------|
$9B:E7C0             db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,03,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,30,00,00,00,10,00,20,00,40,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,0E,00,01,00,00,00,00,00,00,00,08,00,04,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,08,00,10,00,D0,00,30,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,04,00,00,00,18,00,10,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,0A,00,0E,00,06,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,08,00,60,00,04,00,44,00,00,00,80,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,01,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,40,00,70,00,
}


;;; $E920: Samus top tiles - set 8 - entry 9 ;;;
{
; 0: Facing forward - power suit - frames 58h / 5Eh
; 9Bh: Facing forward - varia/gravity suit - frames 58h / 5Eh
; |--------|--------|--------|--------|--------|--------|--------|
; |  4     |    4   |        |        |        |        |        |
; |   4    |        |        |        |        |        |   4 4  |
; |        |        |        |        |        |        |   4    |
; |    4   |        |        |      4 |        |        |  4     |
; |   4    |        |        |     4  |        |        |        |
; |        |        |        |    4 4 |44      |        |        |
; |        |        |    4   |       4|4       |        |        |
; |        |        |   4    |        |4       |      44|        |
; |--------|--------|--------|--------|--------|--------|--------|
$9B:E920             db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,20,00,10,00,00,00,08,00,10,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,08,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,08,00,10,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,02,00,04,00,0A,00,01,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,C0,00,80,00,80,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,03,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,14,00,10,00,20,00,00,00,00,00,00,00,00,00,
}
}


;;; $EA00..EE1F: Samus bottom tiles - set 8 (facing forward) ;;;
{
;;; $EA00: Samus bottom tiles - set 8 - entry 0 ;;;
{
; 0: Facing forward - power suit - frames 2..5Fh
; |--------|--------|--------|--------|--------|--------|--------|--------|
; |  3BBAB |        |     333|3B  31C1|11C13  3|333     |EEF     |        |
; |   BABAB|        |     D7D|73   11C|CC11   B|2AB     |E9EF    |        |
; |   BA2AB|        |     88D|5D3 311C|CC113  B|AAB     |6EFF3 33|33      |
; |   BA2A |        |     785|5D3 33C1|11C33   |BA3     |9E4F93BB|BB3     |
; |   BA2A |        |     875|5D33B33C|1C33B3  |BB3     |E44FEBA2|B2AB    |
; |    B2B |        |     575|5D3BBB3B|CB3BBB  |333     |44F8FBBB|BBAB    |
; |    BAB |        |     378|53 BAB33|C33BAB 3|BAAB    |4F733BA2|ABB3    |
; |    BCB |        |     578|53 A2C13|131C2A 3|A22B    |5F3F3BAA|AB33    |
; |--------|--------|--------|--------|--------|--------|--------|--------|
; |    BBB |        |     333|33 A2C13|331C2A 3|A3AB    |33FEFBAB|B353    |
; |    BBB |        |     578|53 BAC13| 31CAB  |3AA     |E9FFE3B3|D58D    |
; |    3B33|        |     333|33 BAB13| 311AB  |        |EFF4FF33|3333    |
; |    33B2|        |     D78|D3 BCB3 |  31CB  |        |FF44F33B|BBB     |
; |   B3BA3|3       |      33|33 BBB3 |  31BB  |        |FE4F333B|ABA     |
; |   BB332|2B      |        |   33B3 |  3133  |        |FF33133B|ABA     |
; |   3A3AA|AAAB    |        |  BAB33 |  33BAB |        |333C333A|2BB     |
; |   33333|3333    |        |  B2AB3 |  3BA2B |        |2C133  B|AB3     |
; |--------|--------|--------|--------|--------|--------|--------|--------|
$9B:EA00             db 3A,3E,15,1F,11,1F,10,1E,10,1E,0A,0E,0A,0E,0A,0A,00,1E,00,1F,00,1B,00,1A,00,1A,00,0A,00,0E,04,0E,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        07,07,07,02,01,00,05,04,03,02,07,02,06,06,06,02,00,00,07,05,01,07,05,02,03,04,07,00,02,01,06,01,
                        CD,C8,C6,C0,EE,28,ED,2C,FE,3E,FF,3F,D7,5F,C3,59,02,42,81,01,C1,41,C2,42,C1,49,C0,5D,80,1C,84,14,
                        D9,09,31,01,39,09,D8,18,BC,3C,7C,7C,75,7D,E1,4D,20,20,C0,C1,C0,C1,20,20,40,48,80,DC,80,9C,10,14,
                        E0,E0,20,E0,20,E0,A0,E0,E0,E0,E0,E0,90,F0,10,F0,00,00,00,60,00,E0,00,C0,00,C0,00,00,00,F0,00,90,
                        20,E0,50,B0,3B,FB,9F,57,14,9F,2F,2F,7C,7F,FC,7F,E0,E0,B0,F0,F0,70,70,DB,F8,9E,E8,3F,E0,46,D0,57,
                        00,00,00,00,C0,C0,E0,E0,90,F0,D0,F0,70,F0,70,F0,00,00,00,00,00,00,00,C0,00,B0,00,F0,00,E0,00,C0,
                        0E,0E,0E,0E,0F,0F,0E,0F,1D,1F,1E,1F,14,1F,1F,1F,00,0E,00,0E,00,04,00,02,00,16,00,18,00,0B,00,00,
                        00,00,00,00,00,00,00,00,80,80,40,C0,10,F0,F0,F0,00,00,00,00,00,00,00,00,00,00,00,40,00,F0,00,00,
                        07,07,06,02,07,07,06,02,03,03,00,00,00,00,00,00,00,00,06,01,00,00,06,05,00,00,00,00,00,00,00,00,
                        C3,D9,D3,59,D7,DD,D6,56,DE,DE,1E,1E,2E,3E,26,3E,04,14,84,1C,00,1C,88,9C,00,1C,00,04,00,38,00,2C,
                        E1,CD,64,4C,74,4C,34,24,3C,2C,3C,2C,3A,3E,32,3E,10,14,10,1C,00,0C,08,0C,00,0C,00,00,00,0E,00,1A,
                        50,F0,80,E0,00,00,00,00,00,00,00,00,00,00,00,00,00,B0,00,60,00,00,00,00,00,00,00,00,00,00,00,00,
                        ED,FF,77,BF,6F,EF,CF,CF,9F,DF,FF,F7,EE,EF,39,99,38,3F,B8,FA,FC,EC,F8,C9,F0,D1,C0,C1,10,11,40,41,
                        F0,D0,D0,00,F0,F0,E0,E0,40,E0,40,E0,60,E0,60,E0,20,80,D0,B0,00,00,00,E0,00,E0,00,E0,00,60,00,C0,
}


;;; $EC00: Samus bottom tiles - set 8 - entry 1 ;;;
{
; 9Bh: Facing forward - varia/gravity suit - frames 2..5Fh
; |--------|--------|--------|--------|--------|--------|--------|--------|
; |  3BBAB3|        |EEF     |        |     333|33  31C1|11C13  3|333A    |
; |  BBABAB|        |E9EF  3B|333B    |     D7D|7D 3311C|CC1133 B|B22A    |
; |  BB62AB|        |6EFF33B2|BBB2    |     88D|5D B3C1C|CC1C3B  |B22A    |
; |  3A222A|        |9E4F93BA|2ABB3   |     785|5DBAB3C1|11C3BAB |BA2     |
; |   BA223|        |E44FE3A2|262BB   |     875|5DA6BB3C|1C3BB6A3|BBA     |
; |   BA2A |        |44F8F3AB|BB2AB   |     575|53A2BB3C|CC3BB223|333     |
; |   BA2A |        |4F7333BA|2ABBB   |     378|53A2BAC3|C3CAB2A3|B22A    |
; |   BA2A |        |5F3F3BB2|22BAB   |     578|53AB2AC3|13CA2BA3|A22A    |
; |--------|--------|--------|--------|--------|--------|--------|--------|
; |   BBAB |        |33FFE3BA|A3333   |     333|33BB2AC3|33CA2BB3|232A    |
; |   3BAB3|2       |FEF6E333|3385D   |     578|53B2ACC3| 3CCA2B |322     |
; |   3BB32|A       |FF9EF3D5|87533   |     333|33B2AC3 |  3CA2B |        |
; |   3B3AA|B       |F99FF333|3333    |     D78|D3BAAC3 |  3CAAB |        |
; |   23BA3|3       |FEFF333B|A262    |      33|33B3313 |  3133B |        |
; |   AA33A|2B      |FF3313 B|A22A    |        |  3AB33 |  33BA3 |        |
; |   3A3A2|22AB    |333C33 B|A22B    |        |  B6A3  |   3A6B |        |
; |   33333|3333    |6C133  B|A22B    |        | 3A2AB  |   BA2A3|        |
; |--------|--------|--------|--------|--------|--------|--------|--------|
$9B:EC00             db 3B,3F,35,3F,31,3F,20,3F,11,1F,10,1E,10,1E,10,1E,00,1E,00,3F,08,33,00,11,00,18,00,1A,00,1A,00,1A,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        20,E0,53,B3,3E,FF,9E,57,14,9F,2D,2F,7E,7F,FE,7F,E0,E0,B0,F1,F0,72,70,DB,F8,9A,E8,3B,E0,43,D0,56,
                        00,00,F0,F0,E0,F0,38,F8,18,F8,C8,F8,38,F8,28,F8,00,00,00,10,00,E0,00,70,40,18,00,D8,00,78,00,38,
                        07,07,07,02,01,00,05,04,03,02,07,02,06,06,06,02,00,00,07,05,01,07,05,02,03,04,07,00,02,01,06,01,
                        CD,C8,DE,98,DA,18,ED,3C,CE,3E,CE,7E,C9,7D,D1,7D,02,02,C1,41,C5,55,C2,7A,D1,6D,81,2D,82,2E,82,36,
                        D9,09,3D,0D,2C,0C,DA,1E,B9,3F,39,3F,49,5F,C5,5F,20,20,C0,C1,D0,D4,20,2E,44,5A,C0,D8,A0,BA,20,36,
                        E0,F0,80,F0,80,F0,80,E0,C0,E0,E0,E0,80,F0,00,F0,00,10,00,90,00,90,00,C0,00,E0,00,00,00,90,00,90,
                        1A,1E,1B,1F,1E,1F,1C,1F,0D,1F,06,1F,14,1F,1F,1F,00,1E,00,0E,00,0C,00,0B,00,06,00,19,00,0A,00,00,
                        00,00,00,80,00,80,80,80,80,80,40,C0,10,F0,F0,F0,00,00,00,00,00,80,00,80,00,00,00,40,00,30,00,00,
                        F6,FF,A7,FF,EF,DC,FF,9F,BF,FF,FD,F5,ED,ED,39,99,38,3B,F8,E8,DB,FA,98,F8,F0,F1,C0,C1,10,11,C0,41,
                        78,F8,D8,C0,78,58,F0,F0,00,F0,00,F0,10,F0,10,F0,00,80,18,28,60,80,00,00,20,80,00,90,00,90,00,90,
                        07,07,06,02,07,07,06,02,03,03,00,00,00,00,00,00,00,00,06,01,00,00,06,05,00,00,00,00,00,00,00,00,
                        F1,FD,E1,79,E2,FA,E2,7A,FE,FA,2E,3E,24,3C,44,7C,02,36,86,2E,04,2C,84,BC,00,20,00,18,10,28,00,2C,
                        C7,DF,42,4E,22,2E,22,2E,3E,2E,3A,3E,12,1E,11,1F,20,36,30,3A,10,1A,10,1E,00,02,00,0C,04,0A,00,1A,
                        40,F0,80,E0,00,00,00,00,00,00,00,00,00,00,00,00,00,10,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
}


;;; $EE00: Samus bottom tiles - set 8 - entry 2 ;;;
{
; Unused
; |--------|
; |        |
; |        |
; |        |
; |        |
; |        |
; |        |
; |        |
; |        |
; |--------|
$9B:EE00             db 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
}
}


;;; $EE20..FD9F: Samus top tiles - set 9 (moving - gun extended) ;;;
{
;;; $EE20: Samus top tiles - set 9 - entry 0 ;;;
{
; Bh: Moving right - gun extended - frames 0 / 5
; |--------|--------|--------|--------|
; |     FFF|EE      |        |        |
; |   FFFEF|69E     |D33     |3DDDDDD3|
; |  FEBBBB|BFEF    |53D3    |35555553|
; |  EBAAA2|A34F    |7383    |38888873|
; | FBAA62B|2A44    |5353    |35555553|
; | FBA2B22|BA34    |D3D3    |3DDDDDD3|
; | FBA22B2|ABB3    |333     |33333333|
; |F3BAB2AB|B8D3    |        |        |
; |--------|--------|--------|--------|
; |E33BABB3|7853    |
; |EF3BBB38|83BBB   |
; |3F33B355|3BAABB  |
; |5FF33DD3|BA22AB3 |
; |85FF333B|A2262AB3|
; |333F3333|BA222BB3|
; | 3331113|3BA22B33|
; |  331C11|33BBB3AB|
; |--------|--------|
$9B:EE20             db 07,07,1D,1F,2F,3F,10,3F,61,7F,64,7F,62,7F,E9,FF,07,07,1F,1F,30,3F,20,3E,44,79,40,74,40,72,80,BB,
                        00,C0,40,A0,D0,F0,50,D0,00,C0,A0,E0,70,F0,B0,90,C0,C0,A0,60,70,F0,30,90,30,40,10,C0,00,E0,20,E0,
                        00,00,E0,60,F0,50,D0,D0,F0,50,F0,50,E0,E0,00,00,00,00,80,80,A0,20,80,20,A0,00,A0,A0,00,00,00,00,
                        00,00,FF,81,FF,81,83,83,FF,81,FF,81,FF,FF,00,00,00,00,7E,7E,7E,00,02,7C,7E,00,7E,7E,00,00,00,00,
                        77,FF,7E,FE,FF,FC,FF,79,7F,3F,FF,FF,7F,71,3B,30,80,9E,C0,DD,43,48,E6,66,70,B1,10,10,00,00,04,04,
                        B0,90,78,78,CC,FC,86,FE,03,FF,87,FF,C7,FF,FD,FF,A0,40,00,B8,00,7C,00,CC,10,86,00,C6,00,64,00,3B,
}


;;; $EEE0: Samus top tiles - set 9 - entry 1 ;;;
{
; Bh: Moving right - gun extended - frame 4
; |--------|--------|--------|--------|
; |     FFF|EE      |        |        |
; |   FFFEF|69E     |D33     |3DDDDDD3|
; |  FFEEFF|EFEF    |53D3    |35555553|
; |  FEBBBB|B34F    |7383    |38888873|
; | FEBA6A2|A344    |5353    |35555553|
; | FBAA22B|2A34    |D3D3    |3DDDDDD3|
; | FBA2B22|BAB3    |333     |33333333|
; |F3BA22BA|ABD3    |        |        |
; |--------|--------|--------|--------|
; |E3BABAAB|B853    |
; |EF3BABB3|783B3   |
; |3F3BBB38|83AAB3  |
; |5F333355|3A22AB3 |
; |85F33DD3|AA262AB3|
; |333F3333|BAA22AB3|
; | 3331113|3BA22B33|
; |  331C11|33BBB3AB|
; |--------|--------|
$9B:EEE0             db 07,07,1D,1F,33,3F,2F,3F,50,7F,61,7F,64,7F,E2,FF,07,07,1F,1F,3F,3F,30,3F,64,7A,40,79,40,74,80,B3,
                        00,C0,40,A0,50,F0,D0,D0,40,C0,20,E0,B0,F0,70,D0,C0,C0,A0,60,F0,F0,30,90,30,80,10,40,00,E0,20,E0,
                        00,00,E0,60,F0,50,D0,D0,F0,50,F0,50,E0,E0,00,00,00,00,80,80,A0,20,80,20,A0,00,A0,A0,00,00,00,00,
                        00,00,FF,81,FF,81,83,83,FF,81,FF,81,FF,FF,00,00,00,00,7E,7E,7E,00,02,7C,7E,00,7E,7E,00,00,00,00,
                        69,FF,77,FF,FE,FE,FF,7C,7F,39,FF,FF,7F,71,3B,30,80,BF,C0,DE,40,5D,C3,40,66,A6,10,10,00,00,04,04,
                        B0,90,B8,B8,4C,7C,86,FE,03,FF,83,FF,C7,FF,FD,FF,20,C0,80,50,00,B8,00,4C,10,C6,00,E6,00,64,00,3B,
}


;;; $EFA0: Samus top tiles - set 9 - entry 2 ;;;
{
; Bh: Moving right - gun extended - frame 2
; |--------|--------|--------|--------|--------|
; |        |FFFEE   |        |        |        |
; |      FF|EEF69E  |D33     |3DDDDDD3|        |
; |    AFFE|EFFEFEF |53D3    |35555553|B       |
; |   B3FFB|BBBBF4F |7383    |38888873|B3      |
; |  B3FFBA|6A2A344 |5353    |35555553|AB3     |
; | B33FBAA|22B2A34 |D3D3    |3DDDDDD3|AB3     |
; |BB3F3BA2|A22BAB3 |333     |33333333|B33     |
; |BB3F3BA2|2B2ABD3 |        |        |3AB     |
; |--------|--------|--------|--------|--------|
; |B33E3BAA|2ABB85F |
; |B33E33BA|BB3783BB|
; |333333BB|B388BAAB|
; |3B3D333B|355BA22A|
; | 338DF33|DD3A2262|
; |  333FF3|33BBA222|
; |   33111|133BBAAA|
; |    3311|C1333BBB|
; |--------|--------|
$9B:EFA0             db 00,00,03,03,06,0F,1F,1F,3E,3F,7C,7F,FC,FF,FC,FF,00,00,03,03,07,0F,06,17,0C,2F,08,4F,10,D6,10,D6,
                        E0,F8,28,F4,6A,FE,FA,FA,08,F8,24,FC,16,FE,4E,FA,F8,F8,F4,EC,FE,FE,0E,FA,86,50,02,28,00,9C,04,5C,
                        00,00,E0,60,F0,50,D0,D0,F0,50,F0,50,E0,E0,00,00,00,00,80,80,A0,20,80,20,A0,00,A0,A0,00,00,00,00,
                        00,00,FF,81,FF,81,83,83,FF,81,FF,81,FF,FF,00,00,00,00,7E,7E,7E,00,02,7C,7E,00,7E,7E,00,00,00,00,
                        00,00,00,00,80,80,C0,C0,60,E0,60,E0,E0,E0,A0,E0,00,00,00,00,00,80,00,80,00,C0,00,C0,00,80,00,60,
                        EC,FF,EE,FF,FF,FF,FF,EF,6F,67,3F,3F,1F,18,0F,0C,10,97,10,93,00,03,10,51,0C,1C,06,06,00,00,00,00,
                        36,F2,F7,F7,C9,CF,F0,9F,E0,3F,F0,FF,F8,7F,7F,3F,06,7A,10,CB,00,BF,60,19,C2,D0,00,38,00,1F,80,87,
}


;;; $F080: Samus top tiles - set 9 - entry 3 ;;;
{
; Bh: Moving right - gun extended - frame 3
; |--------|--------|--------|--------|--------|--------|
; |        |  FFFEE |        |        |        |3       |
; |       F|FFFEF69E|D33     |3DDDDDD3|        |BB      |
; |     AFF|FEEFFEFE|53D3    |35555553|F       |ABB     |
; |    B3FF|EBBBBB34|7383    |38888873|F       |2AB3    |
; |   B3FF3|BA6A2A34|5353    |35555553|4       |62AB3   |
; |   33FFB|AA22B2A3|D3D3    |3DDDDDD3|4       |22AB3   |
; |   B3F3B|A2B22BAB|333     |33333333|3       |22B33   |
; |  3B3E3B|A22B2ABD|        |        |3       |BB3AB   |
; |--------|--------|--------|--------|--------|--------|
; |  3B3E3B|AB2ABB85|
; | B333EF3|BABB3783|
; | B3B33F3|BBB3883A|
; | 33B35F3|3B3553A2|
; |  3B385F|33DD3BA2|
; |   33D3F|F3333BBA|
; |    3333|111133BB|
; |     333|31C1133B|
; |--------|--------|
$9B:F080             db 00,00,01,01,03,07,0F,0F,1F,1F,1F,1F,1F,1F,3B,3F,00,00,01,01,03,07,03,0B,06,16,06,07,04,15,04,15,
                        38,3E,EA,FD,9A,FF,7E,FE,82,FE,09,FF,25,FF,13,FE,3E,3E,FD,FB,FF,FF,81,FC,21,D4,00,CA,00,A7,01,97,
                        00,00,E0,60,F0,50,D0,D0,F0,50,F0,50,E0,E0,00,00,00,00,80,80,A0,20,80,20,A0,00,A0,A0,00,00,00,00,
                        00,00,FF,81,FF,81,83,83,FF,81,FF,81,FF,FF,00,00,00,00,7E,7E,7E,00,02,7C,7E,00,7E,7E,00,00,00,00,
                        00,00,00,00,80,80,80,80,00,00,00,00,80,80,80,80,00,00,00,00,80,80,80,80,80,00,80,00,00,00,00,00,
                        80,80,C0,C0,60,E0,30,F0,18,F8,18,F8,38,F8,E8,F8,00,00,00,C0,00,E0,00,60,80,30,00,30,00,20,00,D8,
                        3B,3F,7B,7F,7F,7F,7F,7B,3B,39,1F,1B,0F,0F,07,07,04,15,06,46,02,52,06,12,03,15,05,05,00,00,00,00,
                        4D,FC,BD,FD,F2,F3,FC,E7,FC,CF,FE,FF,FF,0F,DF,87,01,DE,04,F2,00,ED,18,42,30,36,80,87,00,03,20,21,
}


;;; $F180: Samus top tiles - set 9 - entry 4 ;;;
{
; Bh: Moving right - gun extended - frames 6 / 9
; |--------|--------|--------|--------|
; |     FFF|EE      |        |        |
; |   FFFEF|69E     |D33     |3DDDDDD3|
; |  FEBBBB|BFEF    |53D3    |35555553|
; |  EBAAA2|A34F    |7383    |38888873|
; | FBAA62B|2A44    |5353    |35555553|
; | FBA2B22|BA34    |D3D3    |3DDDDDD3|
; | FBA22B2|ABB3    |333     |33333333|
; |F3BAB2AB|B8D3    |        |        |
; |--------|--------|--------|--------|
; |E33BABB3|7853    |
; |EF3BBB38|83BBB   |
; |3F33B355|3BAABB  |
; |5FF33DD3|BA22AB3 |
; |85FF333B|A2262AB3|
; |333F3333|BA222BB3|
; | 3331113|3BA22B33|
; |  331C11|33BBB3AB|
; |--------|--------|
$9B:F180             db 07,07,1D,1F,2F,3F,10,3F,61,7F,64,7F,62,7F,E9,FF,07,07,1F,1F,30,3F,20,3E,44,79,40,74,40,72,80,BB,
                        00,C0,40,A0,D0,F0,50,D0,00,C0,A0,E0,70,F0,B0,90,C0,C0,A0,60,70,F0,30,90,30,40,10,C0,00,E0,20,E0,
                        00,00,E0,60,F0,50,D0,D0,F0,50,F0,50,E0,E0,00,00,00,00,80,80,A0,20,80,20,A0,00,A0,A0,00,00,00,00,
                        00,00,FF,81,FF,81,83,83,FF,81,FF,81,FF,FF,00,00,00,00,7E,7E,7E,00,02,7C,7E,00,7E,7E,00,00,00,00,
                        77,FF,7E,FE,FF,FC,FF,79,7F,3F,FF,FF,7F,71,3B,30,80,9E,C0,DD,43,48,E6,66,70,B1,10,10,00,00,04,04,
                        B0,90,78,78,CC,FC,86,FE,03,FF,87,FF,C7,FF,FD,FF,A0,40,00,B8,00,7C,00,CC,10,86,00,C6,00,64,00,3B,
}


;;; $F240: Samus top tiles - set 9 - entry 5 ;;;
{
; Bh: Moving right - gun extended - frame 7
; |--------|--------|--------|--------|--------|
; |     FFF|EE      |        |        |B2B     |
; |   FFFEF|69E     |D33     |3DDDDDD3|B2B     |
; |  FFEEFF|EFEF    |53D3    |35555553|BAB     |
; |  FEBBBB|B34F    |7383    |38888873|BBB     |
; | FEBA2A2|A344    |5353    |35555553|33      |
; | FBAA62B|2A34B   |D3D3    |3DDDDDD3|        |
; | FBA2B22|BAB3B   |333     |33333333|        |
; |F3BA22B2|ABD3B   |        |        |        |
; |--------|--------|--------|--------|--------|
; |E3BAB2AB|B853   B|
; |EF3BABB3|783BB 3A|
; |3F3BBB38|83AABB3A|
; |5F33B355|3A22AB33|
; |85F33DD3|A2262AB3|
; |333F3333|BA222AB3|
; | 3331113|3BA22B33|
; |  331C11|33BBB3AB|
; |--------|--------|
$9B:F240             db 07,07,1D,1F,33,3F,2F,3F,50,7F,61,7F,64,7F,E2,FF,07,07,1F,1F,3F,3F,30,3F,60,7A,44,79,40,74,80,B2,
                        00,C0,40,A0,50,F0,D0,D0,40,C0,28,E8,B8,F8,78,D8,C0,C0,A0,60,F0,F0,30,90,30,80,10,48,00,E8,20,E8,
                        00,00,E0,60,F0,50,D0,D0,F0,50,F0,50,E0,E0,00,00,00,00,80,80,A0,20,80,20,A0,00,A0,A0,00,00,00,00,
                        00,00,FF,81,FF,81,83,83,FF,81,FF,81,FF,FF,00,00,00,00,7E,7E,7E,00,02,7C,7E,00,7E,7E,00,00,00,00,
                        A0,E0,A0,E0,A0,E0,E0,E0,C0,C0,00,00,00,00,00,00,00,A0,00,A0,00,E0,00,E0,00,00,00,00,00,00,00,00,
                        69,FF,77,FF,FE,FE,FF,7C,7F,39,FF,FF,7F,71,3B,30,80,BB,C0,DE,40,5D,C3,48,66,A6,10,10,00,00,04,04,
                        B1,91,BA,BB,4E,7F,87,FF,03,FF,83,FF,C7,FF,FD,FF,20,C1,80,59,00,BD,00,4C,10,86,00,C6,00,64,00,3B,
}


;;; $F320: Samus top tiles - set 9 - entry 6 ;;;
{
; Ch: Moving left  - gun extended - frames 0 / 5
; |--------|--------|--------|--------|--------|--------|
; |      EE|FFF     |        |        |B3BBBB3 | B2A3ABB|
; |     EE9|6FEFF   |3DDDDDD3|D33     |AB3B333 | BAA3226|
; |    EFFE|EFFFFF  |35555553|53D3    |AA33BA3 |  BB3BAA|
; |    F43F|F3333F  |38888873|7383    |BBB3BB  |   333BB|
; |    443F|3BBBB3F3|35555553|5353    |        |        |
; |    4383|BA6A2B33|3DDDDDD3|D3D3    |        |        |
; |    3533|AA2B2AB3|33333333|333     |        |        |
; |    F33B|2B2B2AB3|        |        |        |        |
; |--------|--------|--------|--------|--------|--------|
; |    3E3B|ABABABB3|
; |    EE3B|BBB33333|
; |   3EFF3|D5877853|
; |3333FF33|33333333|
; |3AB33333|3BA2ABB3|
; |32AB331C|33226AB3|
; |32AB3333|33A22AB |
; |3B333333|B3BAAAB |
; |--------|--------|
$9B:F320             db 00,03,01,06,06,0F,0B,0B,03,03,05,05,0F,0B,0F,0F,03,03,06,07,0F,0F,0D,09,0D,01,08,02,04,00,08,09,
                        E0,E0,58,F8,7C,FC,FC,FC,FF,FF,87,FF,13,FF,53,FF,E0,E0,F8,78,FC,FC,84,84,02,7A,20,D4,00,D6,00,56,
                        00,00,FF,81,FF,81,83,83,FF,81,FF,81,FF,FF,00,00,00,00,7E,7E,7E,00,02,7C,7E,00,7E,7E,00,00,00,00,
                        00,00,E0,60,F0,50,D0,D0,F0,50,F0,50,E0,E0,00,00,00,00,80,80,A0,20,80,20,A0,00,A0,A0,00,00,00,00,
                        FE,FE,7E,FE,3A,FE,FC,FC,00,00,00,00,00,00,00,00,00,BC,00,D0,00,CC,00,EC,00,00,00,00,00,00,00,00,
                        4B,7F,48,7F,3C,3F,1F,1F,00,00,00,00,00,00,00,00,00,57,01,70,00,37,00,03,00,00,00,00,00,00,00,00,
                        0B,0F,03,0F,17,1F,FF,FF,BF,FF,9E,FC,9F,FF,FF,FF,04,05,0C,0D,0E,0E,0C,0C,00,60,01,31,00,30,00,40,
                        57,FF,FF,FF,DB,19,FF,FF,C7,FF,C3,FF,C2,FE,E2,FE,00,FE,00,E0,DA,A4,00,00,00,6E,08,06,00,26,00,BE,
}


;;; $F420: Samus top tiles - set 9 - entry 7 ;;;
{
; Ch: Moving left  - gun extended - frame 4
; |--------|--------|--------|--------|--------|--------|
; |      EE|FFF     |        |        |BAB3    |  BAAA33|
; |     EE9|6FEFF   |3DDDDDD3|D33     |3B3     |   BAB3A|
; |    EFFE|EFFFFF  |35555553|53D3    |3       |    B3BB|
; |    F43F|F333FF  |38888873|7383    |        |        |
; |    443F|3BBB33F |35555553|5353    |        |        |
; |    4383|3AA6AAB3|3DDDDDD3|D3D3    |        |        |
; |    3533|B2A2B2A3|33333333|333     |        |        |
; |    F333|A2B2B2AB|        |        |        |        |
; |--------|--------|--------|--------|--------|--------|
; |    3E33|AAB2BABB|
; |    EEF3|BBBB333B|
; |   3EFF3|D58785D3|
; | BB33F33|33333D33|
; |A2A33333|BA2B3338|
; |BA3BB33B|A262B333|
; |33B2AB3A|222AB3  |
; |B3B26A3B|A2AB3   |
; |--------|--------|
$9B:F420             db 00,03,01,06,06,0F,0B,0B,03,03,05,05,0F,0B,0F,0F,03,03,06,07,0F,0F,0D,09,0D,01,08,02,04,00,08,08,
                        E0,E0,58,F8,7C,FC,FC,FC,FE,FE,83,FF,89,FF,29,FF,E0,E0,F8,78,FC,FC,8C,8C,02,72,10,6E,00,AA,00,AB,
                        00,00,FF,81,FF,81,83,83,FF,81,FF,81,FF,FF,00,00,00,00,7E,7E,7E,00,02,7C,7E,00,7E,7E,00,00,00,00,
                        00,00,E0,60,F0,50,D0,D0,F0,50,F0,50,E0,E0,00,00,00,00,80,80,A0,20,80,20,A0,00,A0,A0,00,00,00,00,
                        B0,F0,E0,E0,80,80,00,00,00,00,00,00,00,00,00,00,00,E0,00,40,00,00,00,00,00,00,00,00,00,00,00,00,
                        23,3F,16,1F,0F,0F,00,00,00,00,00,00,00,00,00,00,00,3C,00,1D,00,0B,00,00,00,00,00,00,00,00,00,00,
                        0B,0F,03,0F,17,1F,7F,7F,1F,FF,BF,FF,E6,FF,E3,FF,04,04,0E,0E,0E,0E,04,64,00,A0,00,D9,00,2D,08,A5,
                        2B,FF,FF,FF,D7,11,FF,FB,9E,FE,0F,FF,0C,FC,18,F8,00,EF,00,F1,D6,AA,04,04,00,D1,20,88,00,18,00,B0,
}


;;; $F520: Samus top tiles - set 9 - entry 8 ;;;
{
; Ch: Moving left  - gun extended - frame 3
; |--------|--------|--------|--------|--------|--------|--------|
; |      EE|FFF     |        |AB33    | 33333A2|        |        |
; |     EE9|6FEFF   |        |B33     |  3BA3BA|3DDDDDD3|D33     |
; |    EFFE|EFFFFF  |       B|33      |   3B3BB|35555553|53D3    |
; |    F43F|F333333 |      AB|        |        |38888873|7383    |
; |    443F|3BBAABB3|      B3|        |        |35555553|5353    |
; |    4383|3A226ABB|      33|        |        |3DDDDDD3|D3D3    |
; |    3533|A22AA2AB|       3|        |        |33333333|333     |
; |    F333|B2AB2AAB|        |        |        |        |        |
; |--------|--------|--------|--------|--------|--------|--------|
; |    3E33|BBB2ABAB|
; |    EEF3|5BBABABB|
; |AB  EFF3|D83BABBB|
; |3B  3F33|3D733BB3|
; |2AAB333B|B3D83333|
; |A22A33BA|AB33DD33|
; |BA2B33A2|6AB3333 |
; |3BA33A22|2AB333  |
; |--------|--------|
$9B:F520             db 00,03,01,06,06,0F,0B,0B,03,03,05,05,0F,0B,0F,0F,03,03,06,07,0F,0F,0D,09,0D,01,08,02,04,00,08,08,
                        E0,E0,58,F8,7C,FC,FE,FE,E7,FF,83,FF,01,FF,91,FF,E0,E0,F8,78,FC,FC,80,80,00,7E,08,47,00,9B,00,B7,
                        00,00,00,00,01,01,01,03,03,03,03,03,01,01,00,00,00,00,00,00,00,01,00,03,00,02,00,00,00,00,00,00,
                        70,F0,E0,E0,C0,C0,00,00,00,00,00,00,00,00,00,00,00,C0,00,80,00,00,00,00,00,00,00,00,00,00,00,00,
                        7C,7F,36,3F,1F,1F,00,00,00,00,00,00,00,00,00,00,00,02,00,1B,00,0B,00,00,00,00,00,00,00,00,00,00,
                        00,00,FF,81,FF,81,83,83,FF,81,FF,81,FF,FF,00,00,00,00,7E,7E,7E,00,02,7C,7E,00,7E,7E,00,00,00,00,
                        00,00,E0,60,F0,50,D0,D0,F0,50,F0,50,E0,E0,00,00,00,00,80,80,A0,20,80,20,A0,00,A0,A0,00,00,00,00,
                        0B,0F,03,0F,47,CF,CF,CF,1F,FF,0E,FF,9C,FF,D8,FF,04,04,0E,0E,0E,CE,04,44,00,71,00,93,00,D2,00,64,
                        E5,FF,EB,7F,B7,3F,FF,BF,EF,CF,7F,F3,3E,FE,3C,FC,00,EF,80,7F,80,DF,60,46,20,B0,0C,CC,80,60,00,60,
}


;;; $F640: Samus top tiles - set 9 - entry 9 ;;;
{
; Ch: Moving left  - gun extended - frame 2
; |--------|--------|--------|--------|--------|--------|--------|
; |      EE|FFF     |    32B3|        |        |B3      |333BAAAB|
; |     EE9|6FEFF   |   3AA33|3DDDDDD3|D33     |3       | 3B333BB|
; |    EFFE|EFEEFF  |   3A3BA|35555553|53D3    |        |  3AB333|
; |    F4FE|F3333F  |    B3A2|38888873|7383    |        |        |
; |    443F|33AA333 |     BBA|35555553|5353    |        |        |
; |    4383|A226AB33|      3B|3DDDDDD3|D3D3    |        |        |
; |    3533|22AA6AB3|       B|33333333|333     |        |        |
; |    F33A|2AB26AB3|        |        |        |        |        |
; |--------|--------|--------|--------|--------|--------|--------|
; |    3E3B|AB22BAB3|
; |3   EEF5|BBABABB3|
; |B3  EF3D|83BABBB3|
; |AB3 FF33|D73BBB35|
; |2AB333B3|3D833338|
; |A2B33ABB|33355313|
; |AAB3B26A|B333333 |
; |BB3BA22A|AB33C1  |
; |--------|--------|
$9B:F640             db 00,03,01,06,06,0F,0A,0B,03,03,05,05,0F,0B,0E,0F,03,03,06,07,0F,0F,0F,0B,0D,01,08,02,04,00,08,09,
                        E0,E0,58,F8,4C,FC,FC,FC,CE,FE,07,FF,03,FF,23,FF,E0,E0,F8,78,FC,FC,84,84,00,30,10,8C,08,36,08,66,
                        0B,0F,13,1F,16,1F,0C,0F,06,07,03,03,01,01,00,00,00,02,00,0C,00,0B,00,0A,00,07,00,01,00,01,00,00,
                        00,00,FF,81,FF,81,83,83,FF,81,FF,81,FF,FF,00,00,00,00,7E,7E,7E,00,02,7C,7E,00,7E,7E,00,00,00,00,
                        00,00,E0,60,F0,50,D0,D0,F0,50,F0,50,E0,E0,00,00,00,00,80,80,A0,20,80,20,A0,00,A0,A0,00,00,00,00,
                        C0,C0,80,80,00,00,00,00,00,00,00,00,00,00,00,00,00,80,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        F1,FF,7F,7F,2F,3F,00,00,00,00,00,00,00,00,00,00,00,1F,00,23,00,18,00,00,00,00,00,00,00,00,00,00,
                        0B,0F,83,8E,C7,CE,6F,EF,3F,FF,3B,FF,38,FF,F0,FF,04,05,0F,0E,0D,8D,0C,CC,00,62,00,A7,02,E9,00,D9,
                        4B,FF,D7,FF,6F,7F,FF,7E,DE,9E,FF,E5,FE,FE,74,F0,00,CE,00,FE,00,BE,C1,9C,40,61,18,00,00,80,08,C8,
}


;;; $F760: Samus top tiles - set 9 - entry Ah ;;;
{
; Ch: Moving left  - gun extended - frames 6 / 9
; |--------|--------|--------|--------|--------|--------|
; |      EE|FFF     |        |        | 3B3BAB3|        |
; |     EE9|6FEFF   |3DDDDDD3|D33     |BBAB333B|       3|
; |    EFFE|EFFFFF  |35555553|53D3    |A22A3B2A|    333B|
; |    F43F|33333FF |38888873|7383    |262A3BAB|   3B23A|
; |    4433|BBABB33F|35555553|5353    |AAB33   |   3AAA3|
; |    433B|BA62AB33|3DDDDDD3|D3D3    |333     |   3BAB3|
; |    353B|2A22BAB3|33333333|333     |        |    333 |
; |    F33B|22BAA333|        |        |        |        |
; |--------|--------|--------|--------|--------|--------|
; |    3E3B|A2B335D3|
; |    EE3B|BAB87333|
; |   3EFF3|B8733B33|
; |3333FFF3|3533BAB3|
; |3AB33F33|33BB2AAB|
; |32AB3311|33BA226A|
; |32ABB331|133BA22A|
; |3AB33333|333BBAAB|
; |--------|--------|
$9B:F760             db 00,03,01,06,06,0F,0B,0B,03,03,07,07,0F,0B,0F,0F,03,03,06,07,0F,0F,0D,09,0C,00,08,01,04,01,08,09,
                        E0,E0,58,F8,7C,FC,FE,FE,DF,FF,87,FF,0B,FF,27,FF,E0,E0,F8,78,FC,FC,06,06,01,F9,20,CC,00,4E,00,38,
                        00,00,FF,81,FF,81,83,83,FF,81,FF,81,FF,FF,00,00,00,00,7E,7E,7E,00,02,7C,7E,00,7E,7E,00,00,00,00,
                        00,00,E0,60,F0,50,D0,D0,F0,50,F0,50,E0,E0,00,00,00,00,80,80,A0,20,80,20,A0,00,A0,A0,00,00,00,00,
                        7B,7F,DF,FF,0C,FF,0D,FF,38,F8,E0,E0,00,00,00,00,00,2E,00,F1,00,95,40,17,00,E0,00,00,00,00,00,00,
                        00,00,01,01,0F,0F,1A,1F,11,1F,1B,1F,0E,0E,00,00,00,00,00,00,00,01,00,09,00,0E,00,0E,00,00,00,00,
                        0B,0F,03,0F,17,1F,FF,FF,BF,FF,9F,FC,9F,FE,BF,FF,04,05,0C,0D,0E,0E,0E,0E,04,64,00,30,00,38,00,60,
                        3F,F9,AF,EF,BF,BF,FB,BF,F1,FF,E0,FF,F0,7F,F9,FF,06,A2,08,F0,20,C4,40,0E,00,37,02,31,00,19,00,1F,
}


;;; $F860: Samus top tiles - set 9 - entry Bh ;;;
{
; Ch: Moving left  - gun extended - frame 8
; |--------|--------|--------|--------|--------|--------|--------|--------|
; |FFF     |        |        |        |22AB    |     3BA|    3E3B|      EE|
; |6FEFF   |        |3DDDDDD3|D33     |2AB3    |    33A2|    EE33|     EE9|
; |EFFFFF  |        |35555553|53D3    |AB3     |    333B|   3EFF3|    EFFE|
; |33BB33F |        |38888873|7383    |B3      |   32AB3|3333FFF3|    F43F|
; |BBBABB33|        |35555553|5353    |3       |   BAAB3|3AB33F33|    443F|
; |BA2A2BB3|        |3DDDDDD3|D3D3    |        |   3BBB3|32AB3331|    4383|
; |BA26BA33|        |33333333|333     |        |    333 |32ABB333|    3533|
; |A2B2A35D|3       |        |        |        |        |3AB3333 |    F33B|
; |--------|--------|--------|--------|--------|--------|--------|--------|
; |A2ABB8D3|B       |
; |BABB733A|AB      |
; |3B38D3A2|6AB     |
; |33DD3B22|22B     |
; |11333AA2|2A3B    |
; |C11333BA|A33A3   |
; |31311B33|3B3B3   |
; |3333C13A|6AB33   |
; |--------|--------|
$9B:F860             db E0,E0,58,F8,7C,FC,FE,FE,EF,FF,87,FF,8B,FF,27,FC,E0,E0,F8,78,FC,FC,02,32,00,FC,00,D6,10,CC,03,A9,
                        00,00,00,00,00,00,00,00,00,00,00,00,00,00,80,80,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,FF,81,FF,81,83,83,FF,81,FF,81,FF,FF,00,00,00,00,7E,7E,7E,00,02,7C,7E,00,7E,7E,00,00,00,00,
                        00,00,E0,60,F0,50,D0,D0,F0,50,F0,50,E0,E0,00,00,00,00,80,80,A0,20,80,20,A0,00,A0,A0,00,00,00,00,
                        10,F0,30,F0,60,E0,C0,C0,80,80,00,00,00,00,00,00,00,30,00,60,00,C0,00,80,00,00,00,00,00,00,00,00,
                        06,07,0C,0F,0F,0F,13,1F,13,1F,1F,1F,0E,0E,00,00,00,03,00,02,00,01,00,06,00,1E,00,0E,00,00,00,00,
                        0B,0F,03,0F,17,1F,FF,FF,BF,FF,9F,FE,9F,FF,BE,FE,04,05,0C,0C,0E,0E,0E,0E,04,64,00,30,00,38,00,60,
                        00,03,01,06,06,0F,0B,0B,03,03,05,05,0F,0B,0F,0F,03,03,06,07,0F,0F,0D,09,0D,01,08,02,04,00,08,09,
                        1B,F9,BE,FF,EC,E7,FC,CF,F8,3F,7E,1F,FF,A7,F6,F3,02,BE,08,F1,08,5A,30,34,00,06,80,83,00,04,08,09,
                        80,80,40,C0,20,E0,20,E0,30,F0,68,F8,F8,F8,38,F8,00,80,00,C0,80,60,00,20,00,50,00,90,00,50,80,60,
}


;;; $F9A0: Samus top tiles - set 9 - entry Ch ;;;
{
; Bh: Moving right - gun extended - frame 8
; |--------|--------|--------|--------|--------|--------|
; |     FFF|EE      |        |        |BAB     |        |
; |   FFFEF|69E     |D33     |3DDDDDD3|BBB     |        |
; |  FFEEFF|EFEF    |53D3    |35555553|33      |        |
; |  FEBBBB|B34F    |7383    |38888873|3       |        |
; | FEBA2A2|A344    |5353    |35555553|        |        |
; | FBAA62B|2A34    |D3D3    |3DDDDDD3|        |        |
; | FBA2B22|BAB3   B|333     |33333333|        |BAB     |
; |F3BA22B2|ABD3  3A|        |        |        |B2B     |
; |--------|--------|--------|--------|--------|--------|
; |E3BAB2AB|B853  3A|
; |EF3BABB3|783BB3B3|
; |3F3BBB38|83AABBBB|
; |5F33B355|3A22AB3B|
; |85F33DD3|A2262AB3|
; |333F3333|BA222AB3|
; | 3331113|3BA22B33|
; |  331C11|33BBB3AB|
; |--------|--------|
$9B:F9A0             db 07,07,1D,1F,33,3F,2F,3F,50,7F,61,7F,64,7F,E2,FF,07,07,1F,1F,3F,3F,30,3F,60,7A,44,79,40,74,80,B2,
                        00,C0,40,A0,50,F0,D0,D0,40,C0,20,E0,B1,F1,72,D3,C0,C0,A0,60,F0,F0,30,90,30,80,10,40,00,E1,20,E1,
                        00,00,E0,60,F0,50,D0,D0,F0,50,F0,50,E0,E0,00,00,00,00,80,80,A0,20,80,20,A0,00,A0,A0,00,00,00,00,
                        00,00,FF,81,FF,81,83,83,FF,81,FF,81,FF,FF,00,00,00,00,7E,7E,7E,00,02,7C,7E,00,7E,7E,00,00,00,00,
                        A0,E0,E0,E0,C0,C0,80,80,00,00,00,00,00,00,00,00,00,E0,00,E0,00,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,00,00,00,00,00,00,00,00,00,00,A0,E0,A0,E0,00,00,00,00,00,00,00,00,00,00,00,00,00,E0,00,A0,
                        69,FF,77,FF,FE,FE,FF,7C,7F,39,FF,FF,7F,71,3B,30,80,BB,C0,DE,40,5D,C3,48,66,A6,10,10,00,00,04,04,
                        B2,93,BF,BF,4F,7F,87,FF,03,FF,83,FF,C7,FF,FD,FF,20,C1,80,5A,00,BF,00,4D,10,86,00,C6,00,64,00,3B,
}


;;; $FAA0: Samus top tiles - set 9 - entry Dh ;;;
{
; Ch: Moving left  - gun extended - frame 7
; |--------|--------|--------|--------|--------|--------|--------|--------|
; |FFF     |        |        |        |A22AB   |       B|    3E33|      EE|
; |6FEFF   |        |3DDDDDD3|D33     |3B2B3   |     333|    EEF3|     EE9|
; |EFFFFF  |        |35555553|53D3    |B3B3    |     B3A|   3EFF3|    EFFE|
; |F333BBF |        |38888873|7383    |AB3     |     AB2|3333FFF3|    F43F|
; |3BAA2BA3|        |35555553|5353    |AB      |      3B|3AB33F33|    443F|
; |BB26B2BB|3       |3DDDDDD3|D3D3    |3       |       3|32AB3331|    4383|
; |BAA22BA3|3       |33333333|333     |        |        |32ABB333|    3533|
; |BA2BAA35|33      |        |        |        |        |3AB333  |    F333|
; |--------|--------|--------|--------|--------|--------|--------|--------|
; |BA2AB38D|3B3     |
; |BBAB37D3|AAB3    |
; |3BB58D3A|26AB    |
; |333D3BA2|222A3   |
; |133333BA|2AB3A3  |
; |C313313B|B333B3  |
; |13311133|3BAB33  |
; | 333C133|BA62A3  |
; |--------|--------|
$9B:FAA0             db E0,E0,58,F8,7C,FC,FE,FE,C5,FF,CB,FF,85,FF,93,FE,E0,E0,F8,78,FC,FC,82,8E,00,76,10,CB,00,E6,01,DC,
                        00,00,00,00,00,00,00,00,00,00,80,80,80,80,C0,C0,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,
                        00,00,FF,81,FF,81,83,83,FF,81,FF,81,FF,FF,00,00,00,00,7E,7E,7E,00,02,7C,7E,00,7E,7E,00,00,00,00,
                        00,00,E0,60,F0,50,D0,D0,F0,50,F0,50,E0,E0,00,00,00,00,80,80,A0,20,80,20,A0,00,A0,A0,00,00,00,00,
                        08,F8,D8,F8,F0,F0,60,E0,40,C0,80,80,00,00,00,00,00,98,00,50,00,A0,00,C0,00,C0,00,00,00,00,00,00,
                        01,01,07,07,06,07,02,07,03,03,01,01,00,00,00,00,00,01,00,00,00,05,00,06,00,01,00,00,00,00,00,00,
                        0B,0F,03,0F,17,1F,FF,FF,BF,FF,9F,FE,9F,FF,BC,FC,04,04,0E,0E,0E,0E,0E,0E,04,64,00,30,00,38,00,60,
                        00,03,01,06,06,0F,0B,0B,03,03,05,05,0F,0B,0F,0F,03,03,06,07,0F,0F,0D,09,0D,01,08,02,04,00,08,08,
                        8D,FC,DF,FD,F6,E3,FC,EF,FE,7F,7F,5B,FF,63,77,73,01,DB,06,F2,14,6D,10,16,00,03,80,81,00,00,08,08,
                        E0,E0,30,F0,10,F0,08,F8,34,FC,FC,FC,DC,FC,84,FC,00,40,00,E0,40,30,00,10,00,68,00,88,00,70,20,C8,
}


;;; $FBE0: Samus top tiles - set 9 - entry Eh ;;;
{
; Bh: Moving right - gun extended - frame 1
; |--------|--------|--------|--------|
; |     FFF|EE      |        |        |
; |   FFFEF|69E     |D33     |3DDDDDD3|
; |  FEBBBB|BFEF    |53D3    |35555553|
; |  EBAAA2|A34F    |7383    |38888873|
; | FBAA62B|2A44    |5353    |35555553|
; | FBA2B22|BA34    |D3D3    |3DDDDDD3|
; | FBA22B2|ABB3    |333     |33333333|
; |F3BAB2AB|B8D3    |        |        |
; |--------|--------|--------|--------|
; |E33BABB3|7853    |
; |EF3BBB38|83BBB   |
; |3F33B355|3BAABB  |
; |5FF33DD3|BA22AB3 |
; |85FF333B|A2262AB3|
; |333F3333|BA222BB3|
; | 3331113|3BA22B33|
; |  331C11|33BBB3AB|
; |--------|--------|
$9B:FBE0             db 07,07,1D,1F,2F,3F,10,3F,61,7F,64,7F,62,7F,E9,FF,07,07,1F,1F,30,3F,20,3E,44,79,40,74,40,72,80,BB,
                        00,C0,40,A0,D0,F0,50,D0,00,C0,A0,E0,70,F0,B0,90,C0,C0,A0,60,70,F0,30,90,30,40,10,C0,00,E0,20,E0,
                        00,00,E0,60,F0,50,D0,D0,F0,50,F0,50,E0,E0,00,00,00,00,80,80,A0,20,80,20,A0,00,A0,A0,00,00,00,00,
                        00,00,FF,81,FF,81,83,83,FF,81,FF,81,FF,FF,00,00,00,00,7E,7E,7E,00,02,7C,7E,00,7E,7E,00,00,00,00,
                        77,FF,7E,FE,FF,FC,FF,79,7F,3F,FF,FF,7F,71,3B,30,80,9E,C0,DD,43,48,E6,66,70,B1,10,10,00,00,04,04,
                        B0,90,78,78,CC,FC,86,FE,03,FF,87,FF,C7,FF,FD,FF,A0,40,00,B8,00,7C,00,CC,10,86,00,C6,00,64,00,3B,
}


;;; $FCA0: Samus top tiles - set 9 - entry Fh ;;;
{
; Ch: Moving left  - gun extended - frame 1
; |--------|--------|--------|--------|--------|--------|
; |      EE|FFF     |        |        |BAB3    |  BAAA33|
; |     EE9|6FEFF   |3DDDDDD3|D33     |3B3     |   BAB3A|
; |    EFFE|EFFFFF  |35555553|53D3    |3       |    B3BB|
; |    F43F|F333FF  |38888873|7383    |        |        |
; |    443F|3BBB33F |35555553|5353    |        |        |
; |    4383|3AA6AAB3|3DDDDDD3|D3D3    |        |        |
; |    3533|B2A2B2A3|33333333|333     |        |        |
; |    F333|A2B2B2AB|        |        |        |        |
; |--------|--------|--------|--------|--------|--------|
; |    3E33|AAB2BABB|
; |    EEF3|BBBB333B|
; |   3EFF3|D58785D3|
; | BB33F33|33333D33|
; |A2A33333|BA2B3338|
; |BA3BB33B|A262B333|
; |33B2AB3A|222AB3  |
; |B3B26A3B|A2AB3   |
; |--------|--------|
$9B:FCA0             db 00,03,01,06,06,0F,0B,0B,03,03,05,05,0F,0B,0F,0F,03,03,06,07,0F,0F,0D,09,0D,01,08,02,04,00,08,08,
                        E0,E0,58,F8,7C,FC,FC,FC,FE,FE,83,FF,89,FF,29,FF,E0,E0,F8,78,FC,FC,8C,8C,02,72,10,6E,00,AA,00,AB,
                        00,00,FF,81,FF,81,83,83,FF,81,FF,81,FF,FF,00,00,00,00,7E,7E,7E,00,02,7C,7E,00,7E,7E,00,00,00,00,
                        00,00,E0,60,F0,50,D0,D0,F0,50,F0,50,E0,E0,00,00,00,00,80,80,A0,20,80,20,A0,00,A0,A0,00,00,00,00,
                        B0,F0,E0,E0,80,80,00,00,00,00,00,00,00,00,00,00,00,E0,00,40,00,00,00,00,00,00,00,00,00,00,00,00,
                        23,3F,16,1F,0F,0F,00,00,00,00,00,00,00,00,00,00,00,3C,00,1D,00,0B,00,00,00,00,00,00,00,00,00,00,
                        0B,0F,03,0F,17,1F,7F,7F,1F,FF,BF,FF,E6,FF,E3,FF,04,04,0E,0E,0E,0E,04,64,00,A0,00,D9,00,2D,08,A5,
                        2B,FF,FF,FF,D7,11,FF,FB,9E,FE,0F,FF,0C,FC,18,F8,00,EF,00,F1,D6,AA,04,04,00,D1,20,88,00,18,00,B0,
}
}


;;; $FDA0: Free space ;;;
{
$9B:FDA0             fillto $9C8000, $FF
}
